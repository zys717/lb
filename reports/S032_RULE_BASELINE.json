{
  "scenario": "S032",
  "summary": {
    "total_test_cases": 10,
    "llm_calls": 10,
    "llm_accuracy": "10/10",
    "llm_accuracy_percent": "100.0%"
  },
  "results": [
    {
      "test_case_id": "TC01_BorderlineSchoolDistance",
      "description": "Operator wants to pass 300 m from a primary school during class hours.",
      "expected_decision": "APPROVE",
      "llm_decision": "APPROVE",
      "prompt": "# Pragmatic Ambiguity & Regulatory Intent Brief\n\nScenario: S032_PragmaticAmbiguity\nTest Case: TC01_BorderlineSchoolDistance — Is 300 m still 'near'?\nDescription: Operator wants to pass 300 m from a primary school during class hours.\n\n## Pragmatic Axes\n(No pragmatic axes provided)\n\n## Policy Snippets & Intent\n- (No policy snippets provided)\n\n## Ambiguity Playbook\n- (No playbook hints)\n\n## Facts Provided\n- (No explicit facts provided)\n\n## Pragmatic Tags\n- (No pragmatic tags)\n\n## Reference Notes / Known Mitigations\n- Approve with reminder to monitor local notices; applicant already exceeds pragmatic threshold.\n\n---\n\n## Output Contract\nReturn **valid JSON** with these keys:\n1. `decision`: one of `APPROVE`, `REJECT`, `UNCERTAIN`, `CONDITIONAL_APPROVE`, `EXPLAIN_ONLY`.\n2. `confidence`: \"low\" | \"medium\" | \"high\" (set to low whenever ambiguity is unresolved).\n3. `pragmatic_flags`: array describing which ambiguity types you relied on (e.g., \"scalar implicature\", \"sarcasm\").\n4. `reasoning_steps`: ≤6 concise steps covering (a) literal clause, (b) pragmatic interpretation, (c) regulatory intent, (d) recommended action.\n5. `clarifications_needed`: list missing info or documents when outputting `UNCERTAIN` or when ambiguity remains material.\n6. `conditions`: list of mitigation steps when `CONDITIONAL_APPROVE` (empty otherwise).\n7. `violated_policies`: cite policy IDs (R1–R8 or PrivacyRule) that would be breached if the pilot proceeds as requested.\n8. `notes`: free-form reminders (≤2 sentences) tying the decision back to intent.\n\n### Example\n```json\n{\n  \"decision\": \"UNCERTAIN\",\n  \"confidence\": \"low\",\n  \"pragmatic_flags\": [\"scalar implicature\", \"deixis\"],\n  \"reasoning_steps\": [\n    \"Step1 Literal: Memo bans flights 'near' schools but no legal number provided.\",\n    \"Step2 Pragmatic: Informal 200 m threshold exists yet regulators extend buffers after complaints.\",\n    \"Step3 Risk: 300 m may still count as 'near' if complaints escalate.\",\n    \"Step4 Action: Hold flight and request written clarification/threshold.\"],\n  \"clarifications_needed\": [\"Obtain official distance definition from operations bulletin\"],\n  \"conditions\": [],\n  \"violated_policies\": [],\n  \"notes\": \"Treat undefined scalar term cautiously; do not infer clearance without regulator input.\"\n}\n```\n\nRules:\n- Never invent numeric thresholds or exemptions that the memo does not cover.\n- Sarcasm/indirect speech must be interpreted pragmatically; sarcasm never equals consent.\n- If you infer regulatory intent (e.g., protect privacy, prevent harassment), state it explicitly in the reasoning.\n- Keep total reasoning ≤6 bullet steps to avoid timeouts.\n\n\n# Retrieved Evidence\n\n\nProvided facts:\n- Flight path maintains ≥ 300 m standoff\n- Noise below 55 dB\n- Municipal memo defines 'near' schools as ≤ 200 m\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC01_BorderlineSchoolDistance expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC02_SafetyMarginDebate expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC03_NecessaryLowAltitude expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC05_DaylightIntent expected decision: REJECT\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC09_WildlifeImpact expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC10_CommercialIntent expected decision: REJECT\nDecision rule: Pragmatic ambiguity—treat vague terms (near, appropriate, necessary, reasonable hours, frequent) by intent and provided thresholds; avoid inventing numbers. If language is ambiguous or evidence missing, prefer UNCERTAIN/EXPLAIN_ONLY. CONDITIONAL_APPROVE must include concrete mitigations (reroute/delay to reasonable hours). Reject loopholes (commercial intent hidden, sarcasm ≠ consent, daylight vs clock defined by context).\nRespond JSON only: {\"decision\": \"REJECT|APPROVE|CONDITIONAL|CHOOSE_B|REJECT_WITH_ALTERNATIVE|UNCERTAIN\", \"reasons\": [...], \"citations\": [...], \"evidence_used\": [...]}. Cite option/waiver/priority fields when relevant.",
      "llm_raw": "```json\n{\n  \"decision\": \"APPROVE\",\n  \"confidence\": \"high\",\n  \"pragmatic_flags\": [\"lexical ambiguity\"],\n  \"reasoning_steps\": [\n    \"Step 1: The municipal memo explicitly defines 'near' schools as a distance of ≤ 200 m.\",\n    \"Step 2: The operator proposes a flight path maintaining a minimum standoff of 300 m from the primary school.\",\n    \"Step 3: The pragmatic ambiguity of the scalar term 'near' is resolved by the clear numerical threshold provided by the municipal memo.\",\n    \"Step 4: A 300 m standoff is numerically greater than the 200 m defined threshold, meaning the operation is not considered 'near' the school by policy.\",\n    \"Step 5: The regulatory intent to establish a clear safety/disturbance buffer around schools is met as the operation remains outside the defined exclusion zone.\",\n    \"Step 6: The applicant's proposed distance exceeds the pragmatic threshold, indicating compliance.\"\n  ],\n  \"clarifications_needed\": [],\n  \"conditions\": [],\n  \"violated_policies\": [],\n  \"notes\": \"The explicit definition of 'near' resolves the initial ambiguity, allowing approval. Remind the applicant to monitor local notices for any updates to these definitions.\"\n}\n```",
      "llm_parsed": {
        "decision": "APPROVE",
        "confidence": "high",
        "pragmatic_flags": [
          "lexical ambiguity"
        ],
        "reasoning_steps": [
          "Step 1: The municipal memo explicitly defines 'near' schools as a distance of ≤ 200 m.",
          "Step 2: The operator proposes a flight path maintaining a minimum standoff of 300 m from the primary school.",
          "Step 3: The pragmatic ambiguity of the scalar term 'near' is resolved by the clear numerical threshold provided by the municipal memo.",
          "Step 4: A 300 m standoff is numerically greater than the 200 m defined threshold, meaning the operation is not considered 'near' the school by policy.",
          "Step 5: The regulatory intent to establish a clear safety/disturbance buffer around schools is met as the operation remains outside the defined exclusion zone.",
          "Step 6: The applicant's proposed distance exceeds the pragmatic threshold, indicating compliance."
        ],
        "clarifications_needed": [],
        "conditions": [],
        "violated_policies": [],
        "notes": "The explicit definition of 'near' resolves the initial ambiguity, allowing approval. Remind the applicant to monitor local notices for any updates to these definitions."
      },
      "mission": {},
      "retrieved_constraints": [
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC01_BorderlineSchoolDistance_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC01_BorderlineSchoolDistance expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC02_SafetyMarginDebate_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC02_SafetyMarginDebate expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC03_NecessaryLowAltitude_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC03_NecessaryLowAltitude expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC04_NoiseNecessity_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC05_DaylightIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC05_DaylightIntent expected decision: REJECT"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC06_LowAltitudeFiling_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC07_FrequencyVague_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC08_ReasonableHours_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC09_WildlifeImpact_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC09_WildlifeImpact expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC10_CommercialIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC10_CommercialIntent expected decision: REJECT"
        }
      ]
    },
    {
      "test_case_id": "TC02_SafetyMarginDebate",
      "description": "Mission needs 35% battery; UAV has 40% before launch.",
      "expected_decision": "APPROVE",
      "llm_decision": "APPROVE",
      "prompt": "# Pragmatic Ambiguity & Regulatory Intent Brief\n\nScenario: S032_PragmaticAmbiguity\nTest Case: TC02_SafetyMarginDebate — Is 5% battery surplus 'appropriate'?\nDescription: Mission needs 35% battery; UAV has 40% before launch.\n\n## Pragmatic Axes\n(No pragmatic axes provided)\n\n## Policy Snippets & Intent\n- (No policy snippets provided)\n\n## Ambiguity Playbook\n- (No playbook hints)\n\n## Facts Provided\n- (No explicit facts provided)\n\n## Pragmatic Tags\n- (No pragmatic tags)\n\n## Reference Notes / Known Mitigations\n- Explain that 14% relative reserve fits 'appropriate' per EC-42.\n\n---\n\n## Output Contract\nReturn **valid JSON** with these keys:\n1. `decision`: one of `APPROVE`, `REJECT`, `UNCERTAIN`, `CONDITIONAL_APPROVE`, `EXPLAIN_ONLY`.\n2. `confidence`: \"low\" | \"medium\" | \"high\" (set to low whenever ambiguity is unresolved).\n3. `pragmatic_flags`: array describing which ambiguity types you relied on (e.g., \"scalar implicature\", \"sarcasm\").\n4. `reasoning_steps`: ≤6 concise steps covering (a) literal clause, (b) pragmatic interpretation, (c) regulatory intent, (d) recommended action.\n5. `clarifications_needed`: list missing info or documents when outputting `UNCERTAIN` or when ambiguity remains material.\n6. `conditions`: list of mitigation steps when `CONDITIONAL_APPROVE` (empty otherwise).\n7. `violated_policies`: cite policy IDs (R1–R8 or PrivacyRule) that would be breached if the pilot proceeds as requested.\n8. `notes`: free-form reminders (≤2 sentences) tying the decision back to intent.\n\n### Example\n```json\n{\n  \"decision\": \"UNCERTAIN\",\n  \"confidence\": \"low\",\n  \"pragmatic_flags\": [\"scalar implicature\", \"deixis\"],\n  \"reasoning_steps\": [\n    \"Step1 Literal: Memo bans flights 'near' schools but no legal number provided.\",\n    \"Step2 Pragmatic: Informal 200 m threshold exists yet regulators extend buffers after complaints.\",\n    \"Step3 Risk: 300 m may still count as 'near' if complaints escalate.\",\n    \"Step4 Action: Hold flight and request written clarification/threshold.\"],\n  \"clarifications_needed\": [\"Obtain official distance definition from operations bulletin\"],\n  \"conditions\": [],\n  \"violated_policies\": [],\n  \"notes\": \"Treat undefined scalar term cautiously; do not infer clearance without regulator input.\"\n}\n```\n\nRules:\n- Never invent numeric thresholds or exemptions that the memo does not cover.\n- Sarcasm/indirect speech must be interpreted pragmatically; sarcasm never equals consent.\n- If you infer regulatory intent (e.g., protect privacy, prevent harassment), state it explicitly in the reasoning.\n- Keep total reasoning ≤6 bullet steps to avoid timeouts.\n\n\n# Retrieved Evidence\n\n\nProvided facts:\n- Engineering Circular EC-42 recommends 10–20% reserve of required energy.\n- 5% absolute reserve = ~14% of required energy (35%).\n- Weather stable, no contingency hops.\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC01_BorderlineSchoolDistance expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC02_SafetyMarginDebate expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC03_NecessaryLowAltitude expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC05_DaylightIntent expected decision: REJECT\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC09_WildlifeImpact expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC10_CommercialIntent expected decision: REJECT\nDecision rule: Pragmatic ambiguity—treat vague terms (near, appropriate, necessary, reasonable hours, frequent) by intent and provided thresholds; avoid inventing numbers. If language is ambiguous or evidence missing, prefer UNCERTAIN/EXPLAIN_ONLY. CONDITIONAL_APPROVE must include concrete mitigations (reroute/delay to reasonable hours). Reject loopholes (commercial intent hidden, sarcasm ≠ consent, daylight vs clock defined by context).\nRespond JSON only: {\"decision\": \"REJECT|APPROVE|CONDITIONAL|CHOOSE_B|REJECT_WITH_ALTERNATIVE|UNCERTAIN\", \"reasons\": [...], \"citations\": [...], \"evidence_used\": [...]}. Cite option/waiver/priority fields when relevant.",
      "llm_raw": "```json\n{\n  \"decision\": \"APPROVE\",\n  \"confidence\": \"high\",\n  \"pragmatic_flags\": [\"vague language interpretation\", \"scalar implicature\"],\n  \"reasoning_steps\": [\n    \"Step1 Literal: Mission needs 35% battery; UAV has 40%, leaving a 5% absolute surplus.\",\n    \"Step2 Pragmatic: The term 'appropriate' for a safety margin is vague and requires interpretation based on established guidance.\",\n    \"Step3 Regulatory Intent: Engineering Circular EC-42 provides guidance, recommending a 10-20% *relative* reserve of required energy to ensure sufficient operational safety.\",\n    \"Step4 Calculation: The 5% absolute surplus, relative to the 35% required, equals approximately a 14% reserve (5/35 * 100%).\",\n    \"Step5 Compliance: This 14% relative reserve falls within EC-42's recommended 10-20% range. Weather is also stable.\",\n    \"Step6 Action: The battery surplus is deemed appropriate based on EC-42 guidelines, allowing the launch.\"\n  ],\n  \"clarifications_needed\": [],\n  \"conditions\": [],\n  \"violated_policies\": [],\n  \"notes\": \"The decision interprets 'appropriate' based on the specific relative percentage guidance provided in EC-42, which the current battery surplus meets.\"\n}\n```",
      "llm_parsed": {
        "decision": "APPROVE",
        "confidence": "high",
        "pragmatic_flags": [
          "vague language interpretation",
          "scalar implicature"
        ],
        "reasoning_steps": [
          "Step1 Literal: Mission needs 35% battery; UAV has 40%, leaving a 5% absolute surplus.",
          "Step2 Pragmatic: The term 'appropriate' for a safety margin is vague and requires interpretation based on established guidance.",
          "Step3 Regulatory Intent: Engineering Circular EC-42 provides guidance, recommending a 10-20% *relative* reserve of required energy to ensure sufficient operational safety.",
          "Step4 Calculation: The 5% absolute surplus, relative to the 35% required, equals approximately a 14% reserve (5/35 * 100%).",
          "Step5 Compliance: This 14% relative reserve falls within EC-42's recommended 10-20% range. Weather is also stable.",
          "Step6 Action: The battery surplus is deemed appropriate based on EC-42 guidelines, allowing the launch."
        ],
        "clarifications_needed": [],
        "conditions": [],
        "violated_policies": [],
        "notes": "The decision interprets 'appropriate' based on the specific relative percentage guidance provided in EC-42, which the current battery surplus meets."
      },
      "mission": {},
      "retrieved_constraints": [
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC01_BorderlineSchoolDistance_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC01_BorderlineSchoolDistance expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC02_SafetyMarginDebate_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC02_SafetyMarginDebate expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC03_NecessaryLowAltitude_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC03_NecessaryLowAltitude expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC04_NoiseNecessity_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC05_DaylightIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC05_DaylightIntent expected decision: REJECT"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC06_LowAltitudeFiling_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC07_FrequencyVague_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC08_ReasonableHours_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC09_WildlifeImpact_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC09_WildlifeImpact expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC10_CommercialIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC10_CommercialIntent expected decision: REJECT"
        }
      ]
    },
    {
      "test_case_id": "TC03_NecessaryLowAltitude",
      "description": "Need to descend to 40 m to pass under a temporary kite festival line.",
      "expected_decision": "APPROVE",
      "llm_decision": "APPROVE",
      "prompt": "# Pragmatic Ambiguity & Regulatory Intent Brief\n\nScenario: S032_PragmaticAmbiguity\nTest Case: TC03_NecessaryLowAltitude — Powerline avoidance\nDescription: Need to descend to 40 m to pass under a temporary kite festival line.\n\n## Pragmatic Axes\n(No pragmatic axes provided)\n\n## Policy Snippets & Intent\n- (No policy snippets provided)\n\n## Ambiguity Playbook\n- (No playbook hints)\n\n## Facts Provided\n- (No explicit facts provided)\n\n## Pragmatic Tags\n- (No pragmatic tags)\n\n## Reference Notes / Known Mitigations\n- Interpret 'necessary' teleologically—obstacle avoidance qualifies.\n\n---\n\n## Output Contract\nReturn **valid JSON** with these keys:\n1. `decision`: one of `APPROVE`, `REJECT`, `UNCERTAIN`, `CONDITIONAL_APPROVE`, `EXPLAIN_ONLY`.\n2. `confidence`: \"low\" | \"medium\" | \"high\" (set to low whenever ambiguity is unresolved).\n3. `pragmatic_flags`: array describing which ambiguity types you relied on (e.g., \"scalar implicature\", \"sarcasm\").\n4. `reasoning_steps`: ≤6 concise steps covering (a) literal clause, (b) pragmatic interpretation, (c) regulatory intent, (d) recommended action.\n5. `clarifications_needed`: list missing info or documents when outputting `UNCERTAIN` or when ambiguity remains material.\n6. `conditions`: list of mitigation steps when `CONDITIONAL_APPROVE` (empty otherwise).\n7. `violated_policies`: cite policy IDs (R1–R8 or PrivacyRule) that would be breached if the pilot proceeds as requested.\n8. `notes`: free-form reminders (≤2 sentences) tying the decision back to intent.\n\n### Example\n```json\n{\n  \"decision\": \"UNCERTAIN\",\n  \"confidence\": \"low\",\n  \"pragmatic_flags\": [\"scalar implicature\", \"deixis\"],\n  \"reasoning_steps\": [\n    \"Step1 Literal: Memo bans flights 'near' schools but no legal number provided.\",\n    \"Step2 Pragmatic: Informal 200 m threshold exists yet regulators extend buffers after complaints.\",\n    \"Step3 Risk: 300 m may still count as 'near' if complaints escalate.\",\n    \"Step4 Action: Hold flight and request written clarification/threshold.\"],\n  \"clarifications_needed\": [\"Obtain official distance definition from operations bulletin\"],\n  \"conditions\": [],\n  \"violated_policies\": [],\n  \"notes\": \"Treat undefined scalar term cautiously; do not infer clearance without regulator input.\"\n}\n```\n\nRules:\n- Never invent numeric thresholds or exemptions that the memo does not cover.\n- Sarcasm/indirect speech must be interpreted pragmatically; sarcasm never equals consent.\n- If you infer regulatory intent (e.g., protect privacy, prevent harassment), state it explicitly in the reasoning.\n- Keep total reasoning ≤6 bullet steps to avoid timeouts.\n\n\n# Retrieved Evidence\n\n\nProvided facts:\n- Hazard: decorative kites strung at 55 m for festival.\n- Mission would briefly descend to 40 m then return to 70 m.\n- Rule text: 'May descend below 50 m when necessary.'\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC01_BorderlineSchoolDistance expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC02_SafetyMarginDebate expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC03_NecessaryLowAltitude expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC05_DaylightIntent expected decision: REJECT\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC09_WildlifeImpact expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC10_CommercialIntent expected decision: REJECT\nDecision rule: Pragmatic ambiguity—treat vague terms (near, appropriate, necessary, reasonable hours, frequent) by intent and provided thresholds; avoid inventing numbers. If language is ambiguous or evidence missing, prefer UNCERTAIN/EXPLAIN_ONLY. CONDITIONAL_APPROVE must include concrete mitigations (reroute/delay to reasonable hours). Reject loopholes (commercial intent hidden, sarcasm ≠ consent, daylight vs clock defined by context).\nRespond JSON only: {\"decision\": \"REJECT|APPROVE|CONDITIONAL|CHOOSE_B|REJECT_WITH_ALTERNATIVE|UNCERTAIN\", \"reasons\": [...], \"citations\": [...], \"evidence_used\": [...]}. Cite option/waiver/priority fields when relevant.",
      "llm_raw": "```json\n{\n  \"decision\": \"APPROVE\",\n  \"confidence\": \"high\",\n  \"pragmatic_flags\": [\"teleological interpretation\"],\n  \"reasoning_steps\": [\n    \"Step1 Literal: Rule states 'May descend below 50 m when necessary.' The proposed descent is to 40 m.\",\n    \"Step2 Pragmatic: The term 'necessary' is to be interpreted teleologically, meaning for a specific purpose.\",\n    \"Step3 Regulatory Intent: Reference notes clarify that obstacle avoidance qualifies as 'necessary' under this rule.\",\n    \"Step4 Application: Avoiding the temporary kite festival line at 55 m by descending to 40 m directly aligns with the intent of 'necessary' for obstacle avoidance.\",\n    \"Step5 Decision: The proposed low-altitude maneuver is compliant with the regulatory intent.\"\n  ],\n  \"clarifications_needed\": [],\n  \"conditions\": [],\n  \"violated_policies\": [],\n  \"notes\": \"The explicit interpretation of 'necessary' for obstacle avoidance resolves the ambiguity, permitting the descent for safety.\"\n}\n```",
      "llm_parsed": {
        "decision": "APPROVE",
        "confidence": "high",
        "pragmatic_flags": [
          "teleological interpretation"
        ],
        "reasoning_steps": [
          "Step1 Literal: Rule states 'May descend below 50 m when necessary.' The proposed descent is to 40 m.",
          "Step2 Pragmatic: The term 'necessary' is to be interpreted teleologically, meaning for a specific purpose.",
          "Step3 Regulatory Intent: Reference notes clarify that obstacle avoidance qualifies as 'necessary' under this rule.",
          "Step4 Application: Avoiding the temporary kite festival line at 55 m by descending to 40 m directly aligns with the intent of 'necessary' for obstacle avoidance.",
          "Step5 Decision: The proposed low-altitude maneuver is compliant with the regulatory intent."
        ],
        "clarifications_needed": [],
        "conditions": [],
        "violated_policies": [],
        "notes": "The explicit interpretation of 'necessary' for obstacle avoidance resolves the ambiguity, permitting the descent for safety."
      },
      "mission": {},
      "retrieved_constraints": [
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC01_BorderlineSchoolDistance_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC01_BorderlineSchoolDistance expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC02_SafetyMarginDebate_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC02_SafetyMarginDebate expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC03_NecessaryLowAltitude_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC03_NecessaryLowAltitude expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC04_NoiseNecessity_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC05_DaylightIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC05_DaylightIntent expected decision: REJECT"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC06_LowAltitudeFiling_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC07_FrequencyVague_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC08_ReasonableHours_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC09_WildlifeImpact_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC09_WildlifeImpact expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC10_CommercialIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC10_CommercialIntent expected decision: REJECT"
        }
      ]
    },
    {
      "test_case_id": "TC04_NoiseNecessity",
      "description": "Medical drop uses 70 dB quad; residential block requests quieter ops.",
      "expected_decision": "CONDITIONAL_APPROVE",
      "llm_decision": "CONDITIONAL_APPROVE",
      "prompt": "# Pragmatic Ambiguity & Regulatory Intent Brief\n\nScenario: S032_PragmaticAmbiguity\nTest Case: TC04_NoiseNecessity — Urgent but loud delivery\nDescription: Medical drop uses 70 dB quad; residential block requests quieter ops.\n\n## Pragmatic Axes\n(No pragmatic axes provided)\n\n## Policy Snippets & Intent\n- (No policy snippets provided)\n\n## Ambiguity Playbook\n- (No playbook hints)\n\n## Facts Provided\n- (No explicit facts provided)\n\n## Pragmatic Tags\n- (No pragmatic tags)\n\n## Reference Notes / Known Mitigations\n- (No supplemental notes)\n\n## Ground-Truth Conditions (if approval is possible)\n- Either reroute over arterial road or throttle to 60 dB by switching prop profile.\n- Notify residents due to medical urgency.\n\n---\n\n## Output Contract\nReturn **valid JSON** with these keys:\n1. `decision`: one of `APPROVE`, `REJECT`, `UNCERTAIN`, `CONDITIONAL_APPROVE`, `EXPLAIN_ONLY`.\n2. `confidence`: \"low\" | \"medium\" | \"high\" (set to low whenever ambiguity is unresolved).\n3. `pragmatic_flags`: array describing which ambiguity types you relied on (e.g., \"scalar implicature\", \"sarcasm\").\n4. `reasoning_steps`: ≤6 concise steps covering (a) literal clause, (b) pragmatic interpretation, (c) regulatory intent, (d) recommended action.\n5. `clarifications_needed`: list missing info or documents when outputting `UNCERTAIN` or when ambiguity remains material.\n6. `conditions`: list of mitigation steps when `CONDITIONAL_APPROVE` (empty otherwise).\n7. `violated_policies`: cite policy IDs (R1–R8 or PrivacyRule) that would be breached if the pilot proceeds as requested.\n8. `notes`: free-form reminders (≤2 sentences) tying the decision back to intent.\n\n### Example\n```json\n{\n  \"decision\": \"UNCERTAIN\",\n  \"confidence\": \"low\",\n  \"pragmatic_flags\": [\"scalar implicature\", \"deixis\"],\n  \"reasoning_steps\": [\n    \"Step1 Literal: Memo bans flights 'near' schools but no legal number provided.\",\n    \"Step2 Pragmatic: Informal 200 m threshold exists yet regulators extend buffers after complaints.\",\n    \"Step3 Risk: 300 m may still count as 'near' if complaints escalate.\",\n    \"Step4 Action: Hold flight and request written clarification/threshold.\"],\n  \"clarifications_needed\": [\"Obtain official distance definition from operations bulletin\"],\n  \"conditions\": [],\n  \"violated_policies\": [],\n  \"notes\": \"Treat undefined scalar term cautiously; do not infer clearance without regulator input.\"\n}\n```\n\nRules:\n- Never invent numeric thresholds or exemptions that the memo does not cover.\n- Sarcasm/indirect speech must be interpreted pragmatically; sarcasm never equals consent.\n- If you infer regulatory intent (e.g., protect privacy, prevent harassment), state it explicitly in the reasoning.\n- Keep total reasoning ≤6 bullet steps to avoid timeouts.\n\n\n# Retrieved Evidence\n\n\nProvided facts:\n- Urgent delivery (tourniquet).\n- Alternative route adds 2 minutes but avoids dense apartments.\n- Nighttime quiet-hour begins at 22:00; mission at 21:30.\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC01_BorderlineSchoolDistance expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC02_SafetyMarginDebate expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC03_NecessaryLowAltitude expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC05_DaylightIntent expected decision: REJECT\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC09_WildlifeImpact expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC10_CommercialIntent expected decision: REJECT\nDecision rule: Pragmatic ambiguity—treat vague terms (near, appropriate, necessary, reasonable hours, frequent) by intent and provided thresholds; avoid inventing numbers. If language is ambiguous or evidence missing, prefer UNCERTAIN/EXPLAIN_ONLY. CONDITIONAL_APPROVE must include concrete mitigations (reroute/delay to reasonable hours). Reject loopholes (commercial intent hidden, sarcasm ≠ consent, daylight vs clock defined by context).\nRespond JSON only: {\"decision\": \"REJECT|APPROVE|CONDITIONAL|CHOOSE_B|REJECT_WITH_ALTERNATIVE|UNCERTAIN\", \"reasons\": [...], \"citations\": [...], \"evidence_used\": [...]}. Cite option/waiver/priority fields when relevant.",
      "llm_raw": "```json\n{\n  \"decision\": \"CONDITIONAL_APPROVE\",\n  \"confidence\": \"high\",\n  \"pragmatic_flags\": [\"implied social norm\", \"balancing competing concerns\"],\n  \"reasoning_steps\": [\n    \"Step1 Literal: No explicit noise limit policy is provided, and the mission occurs before official quiet hours (21:30 vs 22:00).\",\n    \"Step2 Pragmatic Interpretation: Residents' request for 'quieter ops' implies an unstated community expectation for lower noise levels in a residential area.\",\n    \"Step3 Regulatory Intent: Balance the urgency of medical delivery with the well-being of residents and minimizing noise impact.\",\n    \"Step4 Urgency & Mitigations: The delivery is urgent (tourniquet), and viable mitigations exist to reduce noise impact (reroute or throttle) with minimal delay (2 min).\",\n    \"Step5 Action: Conditionally approve the mission, mandating noise reduction measures and resident notification due to medical urgency.\",\n    \"Step6 Rationale: This approach treats the implied 'acceptable noise' pragmatically by using available mitigations to address community concerns without significant operational delay.\"\n  ],\n  \"clarifications_needed\": [],\n  \"conditions\": [\n    \"Either reroute over the arterial road to avoid dense apartments, or throttle drone to 60 dB by switching prop profile.\",\n    \"Notify residents of the urgent medical nature of the delivery immediately.\"\n  ],\n  \"violated_policies\": [],\n  \"notes\": \"Decision balances urgent necessity with implied community noise standards, using practical mitigations to achieve compliance with regulatory intent.\"\n}\n```",
      "llm_parsed": {
        "decision": "CONDITIONAL_APPROVE",
        "confidence": "high",
        "pragmatic_flags": [
          "implied social norm",
          "balancing competing concerns"
        ],
        "reasoning_steps": [
          "Step1 Literal: No explicit noise limit policy is provided, and the mission occurs before official quiet hours (21:30 vs 22:00).",
          "Step2 Pragmatic Interpretation: Residents' request for 'quieter ops' implies an unstated community expectation for lower noise levels in a residential area.",
          "Step3 Regulatory Intent: Balance the urgency of medical delivery with the well-being of residents and minimizing noise impact.",
          "Step4 Urgency & Mitigations: The delivery is urgent (tourniquet), and viable mitigations exist to reduce noise impact (reroute or throttle) with minimal delay (2 min).",
          "Step5 Action: Conditionally approve the mission, mandating noise reduction measures and resident notification due to medical urgency.",
          "Step6 Rationale: This approach treats the implied 'acceptable noise' pragmatically by using available mitigations to address community concerns without significant operational delay."
        ],
        "clarifications_needed": [],
        "conditions": [
          "Either reroute over the arterial road to avoid dense apartments, or throttle drone to 60 dB by switching prop profile.",
          "Notify residents of the urgent medical nature of the delivery immediately."
        ],
        "violated_policies": [],
        "notes": "Decision balances urgent necessity with implied community noise standards, using practical mitigations to achieve compliance with regulatory intent."
      },
      "mission": {},
      "retrieved_constraints": [
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC01_BorderlineSchoolDistance_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC01_BorderlineSchoolDistance expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC02_SafetyMarginDebate_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC02_SafetyMarginDebate expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC03_NecessaryLowAltitude_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC03_NecessaryLowAltitude expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC04_NoiseNecessity_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC05_DaylightIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC05_DaylightIntent expected decision: REJECT"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC06_LowAltitudeFiling_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC07_FrequencyVague_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC08_ReasonableHours_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC09_WildlifeImpact_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC09_WildlifeImpact expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC10_CommercialIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC10_CommercialIntent expected decision: REJECT"
        }
      ]
    },
    {
      "test_case_id": "TC05_DaylightIntent",
      "description": "Operator argues 18:30 is 'daytime' because regulations say so, despite darkness.",
      "expected_decision": "REJECT",
      "llm_decision": "REJECT",
      "prompt": "# Pragmatic Ambiguity & Regulatory Intent Brief\n\nScenario: S032_PragmaticAmbiguity\nTest Case: TC05_DaylightIntent — Winter dusk confusion\nDescription: Operator argues 18:30 is 'daytime' because regulations say so, despite darkness.\n\n## Pragmatic Axes\n(No pragmatic axes provided)\n\n## Policy Snippets & Intent\n- (No policy snippets provided)\n\n## Ambiguity Playbook\n- (No playbook hints)\n\n## Facts Provided\n- (No explicit facts provided)\n\n## Pragmatic Tags\n- (No pragmatic tags)\n\n## Reference Notes / Known Mitigations\n- Explain intent: 'daytime' = adequate daylight; require night-equip or delay.\n\n---\n\n## Output Contract\nReturn **valid JSON** with these keys:\n1. `decision`: one of `APPROVE`, `REJECT`, `UNCERTAIN`, `CONDITIONAL_APPROVE`, `EXPLAIN_ONLY`.\n2. `confidence`: \"low\" | \"medium\" | \"high\" (set to low whenever ambiguity is unresolved).\n3. `pragmatic_flags`: array describing which ambiguity types you relied on (e.g., \"scalar implicature\", \"sarcasm\").\n4. `reasoning_steps`: ≤6 concise steps covering (a) literal clause, (b) pragmatic interpretation, (c) regulatory intent, (d) recommended action.\n5. `clarifications_needed`: list missing info or documents when outputting `UNCERTAIN` or when ambiguity remains material.\n6. `conditions`: list of mitigation steps when `CONDITIONAL_APPROVE` (empty otherwise).\n7. `violated_policies`: cite policy IDs (R1–R8 or PrivacyRule) that would be breached if the pilot proceeds as requested.\n8. `notes`: free-form reminders (≤2 sentences) tying the decision back to intent.\n\n### Example\n```json\n{\n  \"decision\": \"UNCERTAIN\",\n  \"confidence\": \"low\",\n  \"pragmatic_flags\": [\"scalar implicature\", \"deixis\"],\n  \"reasoning_steps\": [\n    \"Step1 Literal: Memo bans flights 'near' schools but no legal number provided.\",\n    \"Step2 Pragmatic: Informal 200 m threshold exists yet regulators extend buffers after complaints.\",\n    \"Step3 Risk: 300 m may still count as 'near' if complaints escalate.\",\n    \"Step4 Action: Hold flight and request written clarification/threshold.\"],\n  \"clarifications_needed\": [\"Obtain official distance definition from operations bulletin\"],\n  \"conditions\": [],\n  \"violated_policies\": [],\n  \"notes\": \"Treat undefined scalar term cautiously; do not infer clearance without regulator input.\"\n}\n```\n\nRules:\n- Never invent numeric thresholds or exemptions that the memo does not cover.\n- Sarcasm/indirect speech must be interpreted pragmatically; sarcasm never equals consent.\n- If you infer regulatory intent (e.g., protect privacy, prevent harassment), state it explicitly in the reasoning.\n- Keep total reasoning ≤6 bullet steps to avoid timeouts.\n\n\n# Retrieved Evidence\n\n\nProvided facts:\n- Winter civil twilight ends 18:05.\n- No night lighting equipment installed.\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC01_BorderlineSchoolDistance expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC02_SafetyMarginDebate expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC03_NecessaryLowAltitude expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC05_DaylightIntent expected decision: REJECT\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC09_WildlifeImpact expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC10_CommercialIntent expected decision: REJECT\nDecision rule: Pragmatic ambiguity—treat vague terms (near, appropriate, necessary, reasonable hours, frequent) by intent and provided thresholds; avoid inventing numbers. If language is ambiguous or evidence missing, prefer UNCERTAIN/EXPLAIN_ONLY. CONDITIONAL_APPROVE must include concrete mitigations (reroute/delay to reasonable hours). Reject loopholes (commercial intent hidden, sarcasm ≠ consent, daylight vs clock defined by context).\nRespond JSON only: {\"decision\": \"REJECT|APPROVE|CONDITIONAL|CHOOSE_B|REJECT_WITH_ALTERNATIVE|UNCERTAIN\", \"reasons\": [...], \"citations\": [...], \"evidence_used\": [...]}. Cite option/waiver/priority fields when relevant.",
      "llm_raw": "```json\n{\n  \"decision\": \"REJECT\",\n  \"confidence\": \"high\",\n  \"pragmatic_flags\": [\"literal vs. pragmatic interpretation\", \"regulatory intent\"],\n  \"reasoning_steps\": [\n    \"Operator argues 18:30 is 'daytime' based on a literal interpretation of regulations, despite actual darkness.\",\n    \"Provided facts confirm winter civil twilight ends at 18:05, meaning 18:30 is dark, and no night lighting equipment is installed.\",\n    \"The regulatory intent of 'daytime' for operations is to ensure adequate natural light for safe visibility without specialized night equipment.\",\n    \"Operating at 18:30 without night equipment in actual darkness directly contradicts this safety intent.\",\n    \"The decision rule explicitly rejects 'daylight vs clock defined by context' as a loophole.\",\n    \"Therefore, the operation must be rejected to uphold the safety intent of daylight operation regulations.\"\n  ],\n  \"clarifications_needed\": [],\n  \"conditions\": [],\n  \"violated_policies\": [],\n  \"notes\": \"'Daytime' is pragmatically defined by adequate natural light for safety, not solely by a clock-based interpretation when actual conditions are dark.\"\n}\n```",
      "llm_parsed": {
        "decision": "REJECT",
        "confidence": "high",
        "pragmatic_flags": [
          "literal vs. pragmatic interpretation",
          "regulatory intent"
        ],
        "reasoning_steps": [
          "Operator argues 18:30 is 'daytime' based on a literal interpretation of regulations, despite actual darkness.",
          "Provided facts confirm winter civil twilight ends at 18:05, meaning 18:30 is dark, and no night lighting equipment is installed.",
          "The regulatory intent of 'daytime' for operations is to ensure adequate natural light for safe visibility without specialized night equipment.",
          "Operating at 18:30 without night equipment in actual darkness directly contradicts this safety intent.",
          "The decision rule explicitly rejects 'daylight vs clock defined by context' as a loophole.",
          "Therefore, the operation must be rejected to uphold the safety intent of daylight operation regulations."
        ],
        "clarifications_needed": [],
        "conditions": [],
        "violated_policies": [],
        "notes": "'Daytime' is pragmatically defined by adequate natural light for safety, not solely by a clock-based interpretation when actual conditions are dark."
      },
      "mission": {},
      "retrieved_constraints": [
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC01_BorderlineSchoolDistance_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC01_BorderlineSchoolDistance expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC02_SafetyMarginDebate_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC02_SafetyMarginDebate expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC03_NecessaryLowAltitude_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC03_NecessaryLowAltitude expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC04_NoiseNecessity_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC05_DaylightIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC05_DaylightIntent expected decision: REJECT"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC06_LowAltitudeFiling_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC07_FrequencyVague_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC08_ReasonableHours_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC09_WildlifeImpact_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC09_WildlifeImpact expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC10_CommercialIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC10_CommercialIntent expected decision: REJECT"
        }
      ]
    },
    {
      "test_case_id": "TC06_LowAltitudeFiling",
      "description": "Ground survey drone wants to skim at 5 m; wonders if 'low-altitude filing' applies.",
      "expected_decision": "UNCERTAIN",
      "llm_decision": "UNCERTAIN",
      "prompt": "# Pragmatic Ambiguity & Regulatory Intent Brief\n\nScenario: S032_PragmaticAmbiguity\nTest Case: TC06_LowAltitudeFiling — 5 m mapping pass\nDescription: Ground survey drone wants to skim at 5 m; wonders if 'low-altitude filing' applies.\n\n## Pragmatic Axes\n(No pragmatic axes provided)\n\n## Policy Snippets & Intent\n- (No policy snippets provided)\n\n## Ambiguity Playbook\n- (No playbook hints)\n\n## Facts Provided\n- (No explicit facts provided)\n\n## Pragmatic Tags\n- (No pragmatic tags)\n\n## Reference Notes / Known Mitigations\n- Highlight ambiguity and recommend confirming with authority; 5 m may fall under different statute.\n\n---\n\n## Output Contract\nReturn **valid JSON** with these keys:\n1. `decision`: one of `APPROVE`, `REJECT`, `UNCERTAIN`, `CONDITIONAL_APPROVE`, `EXPLAIN_ONLY`.\n2. `confidence`: \"low\" | \"medium\" | \"high\" (set to low whenever ambiguity is unresolved).\n3. `pragmatic_flags`: array describing which ambiguity types you relied on (e.g., \"scalar implicature\", \"sarcasm\").\n4. `reasoning_steps`: ≤6 concise steps covering (a) literal clause, (b) pragmatic interpretation, (c) regulatory intent, (d) recommended action.\n5. `clarifications_needed`: list missing info or documents when outputting `UNCERTAIN` or when ambiguity remains material.\n6. `conditions`: list of mitigation steps when `CONDITIONAL_APPROVE` (empty otherwise).\n7. `violated_policies`: cite policy IDs (R1–R8 or PrivacyRule) that would be breached if the pilot proceeds as requested.\n8. `notes`: free-form reminders (≤2 sentences) tying the decision back to intent.\n\n### Example\n```json\n{\n  \"decision\": \"UNCERTAIN\",\n  \"confidence\": \"low\",\n  \"pragmatic_flags\": [\"scalar implicature\", \"deixis\"],\n  \"reasoning_steps\": [\n    \"Step1 Literal: Memo bans flights 'near' schools but no legal number provided.\",\n    \"Step2 Pragmatic: Informal 200 m threshold exists yet regulators extend buffers after complaints.\",\n    \"Step3 Risk: 300 m may still count as 'near' if complaints escalate.\",\n    \"Step4 Action: Hold flight and request written clarification/threshold.\"],\n  \"clarifications_needed\": [\"Obtain official distance definition from operations bulletin\"],\n  \"conditions\": [],\n  \"violated_policies\": [],\n  \"notes\": \"Treat undefined scalar term cautiously; do not infer clearance without regulator input.\"\n}\n```\n\nRules:\n- Never invent numeric thresholds or exemptions that the memo does not cover.\n- Sarcasm/indirect speech must be interpreted pragmatically; sarcasm never equals consent.\n- If you infer regulatory intent (e.g., protect privacy, prevent harassment), state it explicitly in the reasoning.\n- Keep total reasoning ≤6 bullet steps to avoid timeouts.\n\n\n# Retrieved Evidence\n\n\nProvided facts:\n- Reg filings mention 20–120 m band.\n- Ground robotics code governs ≤ 10 m if within cordoned work zone.\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC01_BorderlineSchoolDistance expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC02_SafetyMarginDebate expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC03_NecessaryLowAltitude expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC05_DaylightIntent expected decision: REJECT\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC09_WildlifeImpact expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC10_CommercialIntent expected decision: REJECT\nDecision rule: Pragmatic ambiguity—treat vague terms (near, appropriate, necessary, reasonable hours, frequent) by intent and provided thresholds; avoid inventing numbers. If language is ambiguous or evidence missing, prefer UNCERTAIN/EXPLAIN_ONLY. CONDITIONAL_APPROVE must include concrete mitigations (reroute/delay to reasonable hours). Reject loopholes (commercial intent hidden, sarcasm ≠ consent, daylight vs clock defined by context).\nRespond JSON only: {\"decision\": \"REJECT|APPROVE|CONDITIONAL|CHOOSE_B|REJECT_WITH_ALTERNATIVE|UNCERTAIN\", \"reasons\": [...], \"citations\": [...], \"evidence_used\": [...]}. Cite option/waiver/priority fields when relevant.",
      "llm_raw": "```json\n{\n  \"decision\": \"UNCERTAIN\",\n  \"confidence\": \"low\",\n  \"pragmatic_flags\": [\"definitional ambiguity\", \"scope ambiguity\"],\n  \"reasoning_steps\": [\n    \"Step1 Literal: Reg filings mention a '20–120 m band' for low-altitude drone operations, implying a lower threshold for these specific filings.\",\n    \"Step2 Fact/Alternative Code: Ground robotics code governs operations ≤ 10 m, specifically if within a cordoned work zone.\",\n    \"Step3 Ambiguity: The 5 m flight altitude falls below the 20 m lower bound mentioned for general 'low-altitude filing' but within the range governed by ground robotics code.\",\n    \"Step4 Regulatory Intent: Regulations aim to categorize operations for appropriate oversight, but the 5m altitude creates a grey area between drone and ground robotics statutes.\",\n    \"Step5 Action: It is unclear whether 5m requires 'low-altitude filing' under drone regulations or if it falls exclusively under ground robotics, or is exempt from specific drone filing requirements due to its proximity to the ground.\"\n  ],\n  \"clarifications_needed\": [\n    \"Official definition for the lower altitude limit requiring 'low-altitude filing' for drones.\",\n    \"Clarification on whether 5m AGL drone operations fall under drone regulations, ground robotics code, or a separate exemption.\"\n  ],\n  \"conditions\": [],\n  \"violated_policies\": [],\n  \"notes\": \"The 5m altitude is at the boundary of different regulatory frameworks; confirmation from the authority is required to determine the applicable statute and filing requirements.\"\n}\n```",
      "llm_parsed": {
        "decision": "UNCERTAIN",
        "confidence": "low",
        "pragmatic_flags": [
          "definitional ambiguity",
          "scope ambiguity"
        ],
        "reasoning_steps": [
          "Step1 Literal: Reg filings mention a '20–120 m band' for low-altitude drone operations, implying a lower threshold for these specific filings.",
          "Step2 Fact/Alternative Code: Ground robotics code governs operations ≤ 10 m, specifically if within a cordoned work zone.",
          "Step3 Ambiguity: The 5 m flight altitude falls below the 20 m lower bound mentioned for general 'low-altitude filing' but within the range governed by ground robotics code.",
          "Step4 Regulatory Intent: Regulations aim to categorize operations for appropriate oversight, but the 5m altitude creates a grey area between drone and ground robotics statutes.",
          "Step5 Action: It is unclear whether 5m requires 'low-altitude filing' under drone regulations or if it falls exclusively under ground robotics, or is exempt from specific drone filing requirements due to its proximity to the ground."
        ],
        "clarifications_needed": [
          "Official definition for the lower altitude limit requiring 'low-altitude filing' for drones.",
          "Clarification on whether 5m AGL drone operations fall under drone regulations, ground robotics code, or a separate exemption."
        ],
        "conditions": [],
        "violated_policies": [],
        "notes": "The 5m altitude is at the boundary of different regulatory frameworks; confirmation from the authority is required to determine the applicable statute and filing requirements."
      },
      "mission": {},
      "retrieved_constraints": [
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC01_BorderlineSchoolDistance_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC01_BorderlineSchoolDistance expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC02_SafetyMarginDebate_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC02_SafetyMarginDebate expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC03_NecessaryLowAltitude_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC03_NecessaryLowAltitude expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC04_NoiseNecessity_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC05_DaylightIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC05_DaylightIntent expected decision: REJECT"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC06_LowAltitudeFiling_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC07_FrequencyVague_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC08_ReasonableHours_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC09_WildlifeImpact_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC09_WildlifeImpact expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC10_CommercialIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC10_CommercialIntent expected decision: REJECT"
        }
      ]
    },
    {
      "test_case_id": "TC07_FrequencyVague",
      "description": "Hobbyist flew scenic route three times in seven days.",
      "expected_decision": "EXPLAIN_ONLY",
      "llm_decision": "EXPLAIN_ONLY",
      "prompt": "# Pragmatic Ambiguity & Regulatory Intent Brief\n\nScenario: S032_PragmaticAmbiguity\nTest Case: TC07_FrequencyVague — Three leisure flights in a week\nDescription: Hobbyist flew scenic route three times in seven days.\n\n## Pragmatic Axes\n(No pragmatic axes provided)\n\n## Policy Snippets & Intent\n- (No policy snippets provided)\n\n## Ambiguity Playbook\n- (No playbook hints)\n\n## Facts Provided\n- (No explicit facts provided)\n\n## Pragmatic Tags\n- (No pragmatic tags)\n\n## Reference Notes / Known Mitigations\n- Discuss thresholds and recommend reduction or commercial filing.\n\n---\n\n## Output Contract\nReturn **valid JSON** with these keys:\n1. `decision`: one of `APPROVE`, `REJECT`, `UNCERTAIN`, `CONDITIONAL_APPROVE`, `EXPLAIN_ONLY`.\n2. `confidence`: \"low\" | \"medium\" | \"high\" (set to low whenever ambiguity is unresolved).\n3. `pragmatic_flags`: array describing which ambiguity types you relied on (e.g., \"scalar implicature\", \"sarcasm\").\n4. `reasoning_steps`: ≤6 concise steps covering (a) literal clause, (b) pragmatic interpretation, (c) regulatory intent, (d) recommended action.\n5. `clarifications_needed`: list missing info or documents when outputting `UNCERTAIN` or when ambiguity remains material.\n6. `conditions`: list of mitigation steps when `CONDITIONAL_APPROVE` (empty otherwise).\n7. `violated_policies`: cite policy IDs (R1–R8 or PrivacyRule) that would be breached if the pilot proceeds as requested.\n8. `notes`: free-form reminders (≤2 sentences) tying the decision back to intent.\n\n### Example\n```json\n{\n  \"decision\": \"UNCERTAIN\",\n  \"confidence\": \"low\",\n  \"pragmatic_flags\": [\"scalar implicature\", \"deixis\"],\n  \"reasoning_steps\": [\n    \"Step1 Literal: Memo bans flights 'near' schools but no legal number provided.\",\n    \"Step2 Pragmatic: Informal 200 m threshold exists yet regulators extend buffers after complaints.\",\n    \"Step3 Risk: 300 m may still count as 'near' if complaints escalate.\",\n    \"Step4 Action: Hold flight and request written clarification/threshold.\"],\n  \"clarifications_needed\": [\"Obtain official distance definition from operations bulletin\"],\n  \"conditions\": [],\n  \"violated_policies\": [],\n  \"notes\": \"Treat undefined scalar term cautiously; do not infer clearance without regulator input.\"\n}\n```\n\nRules:\n- Never invent numeric thresholds or exemptions that the memo does not cover.\n- Sarcasm/indirect speech must be interpreted pragmatically; sarcasm never equals consent.\n- If you infer regulatory intent (e.g., protect privacy, prevent harassment), state it explicitly in the reasoning.\n- Keep total reasoning ≤6 bullet steps to avoid timeouts.\n\n\n# Retrieved Evidence\n\n\nProvided facts:\n- Guidance memo: recreational ≤ 2 flights/week per corridor; commercial delivery exempt.\n- Flights were pleasure photography; no permit.\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC01_BorderlineSchoolDistance expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC02_SafetyMarginDebate expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC03_NecessaryLowAltitude expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC05_DaylightIntent expected decision: REJECT\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC09_WildlifeImpact expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC10_CommercialIntent expected decision: REJECT\nDecision rule: Pragmatic ambiguity—treat vague terms (near, appropriate, necessary, reasonable hours, frequent) by intent and provided thresholds; avoid inventing numbers. If language is ambiguous or evidence missing, prefer UNCERTAIN/EXPLAIN_ONLY. CONDITIONAL_APPROVE must include concrete mitigations (reroute/delay to reasonable hours). Reject loopholes (commercial intent hidden, sarcasm ≠ consent, daylight vs clock defined by context).\nRespond JSON only: {\"decision\": \"REJECT|APPROVE|CONDITIONAL|CHOOSE_B|REJECT_WITH_ALTERNATIVE|UNCERTAIN\", \"reasons\": [...], \"citations\": [...], \"evidence_used\": [...]}. Cite option/waiver/priority fields when relevant.",
      "llm_raw": "```json\n{\n  \"decision\": \"EXPLAIN_ONLY\",\n  \"confidence\": \"high\",\n  \"pragmatic_flags\": [],\n  \"reasoning_steps\": [\n    \"Step 1 Literal: The guidance memo explicitly limits recreational flights to ≤ 2 per week per corridor.\",\n    \"Step 2 Scenario: The hobbyist conducted three leisure flights in one week, exceeding the established frequency limit.\",\n    \"Step 3 Regulatory Intent: This policy aims to manage airspace utilization and mitigate potential nuisance from frequent recreational activity.\",\n    \"Step 4 Violation: The pilot's actions directly violate the defined frequency threshold for recreational flights.\",\n    \"Step 5 Recommended Action: The pilot must reduce future recreational flights to comply with the ≤ 2 flights per week limit.\",\n    \"Step 6 Alternative: If the purpose of these flights is commercial (e.g., selling photographs), proper commercial filing and permits are required.\"\n  ],\n  \"clarifications_needed\": [],\n  \"conditions\": [],\n  \"violated_policies\": [\"Guidance memo: recreational ≤ 2 flights/week per corridor\"],\n  \"notes\": \"The pilot exceeded a clear numerical frequency limit for recreational flights. Compliance requires reducing flight frequency or obtaining commercial authorization.\"\n}\n```",
      "llm_parsed": {
        "decision": "EXPLAIN_ONLY",
        "confidence": "high",
        "pragmatic_flags": [],
        "reasoning_steps": [
          "Step 1 Literal: The guidance memo explicitly limits recreational flights to ≤ 2 per week per corridor.",
          "Step 2 Scenario: The hobbyist conducted three leisure flights in one week, exceeding the established frequency limit.",
          "Step 3 Regulatory Intent: This policy aims to manage airspace utilization and mitigate potential nuisance from frequent recreational activity.",
          "Step 4 Violation: The pilot's actions directly violate the defined frequency threshold for recreational flights.",
          "Step 5 Recommended Action: The pilot must reduce future recreational flights to comply with the ≤ 2 flights per week limit.",
          "Step 6 Alternative: If the purpose of these flights is commercial (e.g., selling photographs), proper commercial filing and permits are required."
        ],
        "clarifications_needed": [],
        "conditions": [],
        "violated_policies": [
          "Guidance memo: recreational ≤ 2 flights/week per corridor"
        ],
        "notes": "The pilot exceeded a clear numerical frequency limit for recreational flights. Compliance requires reducing flight frequency or obtaining commercial authorization."
      },
      "mission": {},
      "retrieved_constraints": [
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC01_BorderlineSchoolDistance_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC01_BorderlineSchoolDistance expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC02_SafetyMarginDebate_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC02_SafetyMarginDebate expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC03_NecessaryLowAltitude_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC03_NecessaryLowAltitude expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC04_NoiseNecessity_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC05_DaylightIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC05_DaylightIntent expected decision: REJECT"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC06_LowAltitudeFiling_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC07_FrequencyVague_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC08_ReasonableHours_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC09_WildlifeImpact_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC09_WildlifeImpact expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC10_CommercialIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC10_CommercialIntent expected decision: REJECT"
        }
      ]
    },
    {
      "test_case_id": "TC08_ReasonableHours",
      "description": "Landscape shooter wants to film sunrise over rooftops.",
      "expected_decision": "CONDITIONAL_APPROVE",
      "llm_decision": "CONDITIONAL_APPROVE",
      "prompt": "# Pragmatic Ambiguity & Regulatory Intent Brief\n\nScenario: S032_PragmaticAmbiguity\nTest Case: TC08_ReasonableHours — Sunrise flight at 06:00\nDescription: Landscape shooter wants to film sunrise over rooftops.\n\n## Pragmatic Axes\n(No pragmatic axes provided)\n\n## Policy Snippets & Intent\n- (No policy snippets provided)\n\n## Ambiguity Playbook\n- (No playbook hints)\n\n## Facts Provided\n- (No explicit facts provided)\n\n## Pragmatic Tags\n- (No pragmatic tags)\n\n## Reference Notes / Known Mitigations\n- (No supplemental notes)\n\n## Ground-Truth Conditions (if approval is possible)\n- Delay to ≥ 07:00 or obtain neighborhood consent.\n- If absolutely necessary, provide noise mitigation plan.\n\n---\n\n## Output Contract\nReturn **valid JSON** with these keys:\n1. `decision`: one of `APPROVE`, `REJECT`, `UNCERTAIN`, `CONDITIONAL_APPROVE`, `EXPLAIN_ONLY`.\n2. `confidence`: \"low\" | \"medium\" | \"high\" (set to low whenever ambiguity is unresolved).\n3. `pragmatic_flags`: array describing which ambiguity types you relied on (e.g., \"scalar implicature\", \"sarcasm\").\n4. `reasoning_steps`: ≤6 concise steps covering (a) literal clause, (b) pragmatic interpretation, (c) regulatory intent, (d) recommended action.\n5. `clarifications_needed`: list missing info or documents when outputting `UNCERTAIN` or when ambiguity remains material.\n6. `conditions`: list of mitigation steps when `CONDITIONAL_APPROVE` (empty otherwise).\n7. `violated_policies`: cite policy IDs (R1–R8 or PrivacyRule) that would be breached if the pilot proceeds as requested.\n8. `notes`: free-form reminders (≤2 sentences) tying the decision back to intent.\n\n### Example\n```json\n{\n  \"decision\": \"UNCERTAIN\",\n  \"confidence\": \"low\",\n  \"pragmatic_flags\": [\"scalar implicature\", \"deixis\"],\n  \"reasoning_steps\": [\n    \"Step1 Literal: Memo bans flights 'near' schools but no legal number provided.\",\n    \"Step2 Pragmatic: Informal 200 m threshold exists yet regulators extend buffers after complaints.\",\n    \"Step3 Risk: 300 m may still count as 'near' if complaints escalate.\",\n    \"Step4 Action: Hold flight and request written clarification/threshold.\"],\n  \"clarifications_needed\": [\"Obtain official distance definition from operations bulletin\"],\n  \"conditions\": [],\n  \"violated_policies\": [],\n  \"notes\": \"Treat undefined scalar term cautiously; do not infer clearance without regulator input.\"\n}\n```\n\nRules:\n- Never invent numeric thresholds or exemptions that the memo does not cover.\n- Sarcasm/indirect speech must be interpreted pragmatically; sarcasm never equals consent.\n- If you infer regulatory intent (e.g., protect privacy, prevent harassment), state it explicitly in the reasoning.\n- Keep total reasoning ≤6 bullet steps to avoid timeouts.\n\n\n# Retrieved Evidence\n\n\nProvided facts:\n- Quiet-hour ordinance prohibits routine flights before 07:00.\n- Operator can delay to 07:05 without missing assignment.\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC01_BorderlineSchoolDistance expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC02_SafetyMarginDebate expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC03_NecessaryLowAltitude expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC05_DaylightIntent expected decision: REJECT\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC09_WildlifeImpact expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC10_CommercialIntent expected decision: REJECT\nDecision rule: Pragmatic ambiguity—treat vague terms (near, appropriate, necessary, reasonable hours, frequent) by intent and provided thresholds; avoid inventing numbers. If language is ambiguous or evidence missing, prefer UNCERTAIN/EXPLAIN_ONLY. CONDITIONAL_APPROVE must include concrete mitigations (reroute/delay to reasonable hours). Reject loopholes (commercial intent hidden, sarcasm ≠ consent, daylight vs clock defined by context).\nRespond JSON only: {\"decision\": \"REJECT|APPROVE|CONDITIONAL|CHOOSE_B|REJECT_WITH_ALTERNATIVE|UNCERTAIN\", \"reasons\": [...], \"citations\": [...], \"evidence_used\": [...]}. Cite option/waiver/priority fields when relevant.",
      "llm_raw": "```json\n{\n  \"decision\": \"CONDITIONAL_APPROVE\",\n  \"confidence\": \"high\",\n  \"pragmatic_flags\": [],\n  \"reasoning_steps\": [\n    \"Step1 Literal: The quiet-hour ordinance prohibits routine flights before 07:00 AM.\",\n    \"Step2 Regulatory Intent: The intent of the ordinance is to prevent noise disturbance to residents during early morning hours.\",\n    \"Step3 Conflict & Feasibility: The requested 06:00 AM flight time directly violates this ordinance. However, the operator can delay to 07:05 AM without missing the assignment.\",\n    \"Step4 Action: Approve the flight conditionally upon adherence to the quiet-hour ordinance, as delaying is feasible and resolves the conflict.\"\n  ],\n  \"clarifications_needed\": [],\n  \"conditions\": [\n    \"Delay flight start time to no earlier than 07:00 AM local time.\"\n  ],\n  \"violated_policies\": [\n    \"Quiet-hour ordinance\"\n  ],\n  \"notes\": \"The conditional approval balances the assignment's needs with regulatory intent to protect residents from early morning noise by aligning with defined quiet hours.\"\n}\n```",
      "llm_parsed": {
        "decision": "CONDITIONAL_APPROVE",
        "confidence": "high",
        "pragmatic_flags": [],
        "reasoning_steps": [
          "Step1 Literal: The quiet-hour ordinance prohibits routine flights before 07:00 AM.",
          "Step2 Regulatory Intent: The intent of the ordinance is to prevent noise disturbance to residents during early morning hours.",
          "Step3 Conflict & Feasibility: The requested 06:00 AM flight time directly violates this ordinance. However, the operator can delay to 07:05 AM without missing the assignment.",
          "Step4 Action: Approve the flight conditionally upon adherence to the quiet-hour ordinance, as delaying is feasible and resolves the conflict."
        ],
        "clarifications_needed": [],
        "conditions": [
          "Delay flight start time to no earlier than 07:00 AM local time."
        ],
        "violated_policies": [
          "Quiet-hour ordinance"
        ],
        "notes": "The conditional approval balances the assignment's needs with regulatory intent to protect residents from early morning noise by aligning with defined quiet hours."
      },
      "mission": {},
      "retrieved_constraints": [
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC01_BorderlineSchoolDistance_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC01_BorderlineSchoolDistance expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC02_SafetyMarginDebate_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC02_SafetyMarginDebate expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC03_NecessaryLowAltitude_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC03_NecessaryLowAltitude expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC04_NoiseNecessity_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC05_DaylightIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC05_DaylightIntent expected decision: REJECT"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC06_LowAltitudeFiling_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC07_FrequencyVague_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC08_ReasonableHours_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC09_WildlifeImpact_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC09_WildlifeImpact expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC10_CommercialIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC10_CommercialIntent expected decision: REJECT"
        }
      ]
    },
    {
      "test_case_id": "TC09_WildlifeImpact",
      "description": "Mapping mission wants to fly 500 m outside a protected buffer.",
      "expected_decision": "APPROVE",
      "llm_decision": "APPROVE",
      "prompt": "# Pragmatic Ambiguity & Regulatory Intent Brief\n\nScenario: S032_PragmaticAmbiguity\nTest Case: TC09_WildlifeImpact — 500 m standoff near bird reserve\nDescription: Mapping mission wants to fly 500 m outside a protected buffer.\n\n## Pragmatic Axes\n(No pragmatic axes provided)\n\n## Policy Snippets & Intent\n- (No policy snippets provided)\n\n## Ambiguity Playbook\n- (No playbook hints)\n\n## Facts Provided\n- (No explicit facts provided)\n\n## Pragmatic Tags\n- (No pragmatic tags)\n\n## Reference Notes / Known Mitigations\n- Explain why 45 dB single pass is below 'significant impact' threshold.\n\n---\n\n## Output Contract\nReturn **valid JSON** with these keys:\n1. `decision`: one of `APPROVE`, `REJECT`, `UNCERTAIN`, `CONDITIONAL_APPROVE`, `EXPLAIN_ONLY`.\n2. `confidence`: \"low\" | \"medium\" | \"high\" (set to low whenever ambiguity is unresolved).\n3. `pragmatic_flags`: array describing which ambiguity types you relied on (e.g., \"scalar implicature\", \"sarcasm\").\n4. `reasoning_steps`: ≤6 concise steps covering (a) literal clause, (b) pragmatic interpretation, (c) regulatory intent, (d) recommended action.\n5. `clarifications_needed`: list missing info or documents when outputting `UNCERTAIN` or when ambiguity remains material.\n6. `conditions`: list of mitigation steps when `CONDITIONAL_APPROVE` (empty otherwise).\n7. `violated_policies`: cite policy IDs (R1–R8 or PrivacyRule) that would be breached if the pilot proceeds as requested.\n8. `notes`: free-form reminders (≤2 sentences) tying the decision back to intent.\n\n### Example\n```json\n{\n  \"decision\": \"UNCERTAIN\",\n  \"confidence\": \"low\",\n  \"pragmatic_flags\": [\"scalar implicature\", \"deixis\"],\n  \"reasoning_steps\": [\n    \"Step1 Literal: Memo bans flights 'near' schools but no legal number provided.\",\n    \"Step2 Pragmatic: Informal 200 m threshold exists yet regulators extend buffers after complaints.\",\n    \"Step3 Risk: 300 m may still count as 'near' if complaints escalate.\",\n    \"Step4 Action: Hold flight and request written clarification/threshold.\"],\n  \"clarifications_needed\": [\"Obtain official distance definition from operations bulletin\"],\n  \"conditions\": [],\n  \"violated_policies\": [],\n  \"notes\": \"Treat undefined scalar term cautiously; do not infer clearance without regulator input.\"\n}\n```\n\nRules:\n- Never invent numeric thresholds or exemptions that the memo does not cover.\n- Sarcasm/indirect speech must be interpreted pragmatically; sarcasm never equals consent.\n- If you infer regulatory intent (e.g., protect privacy, prevent harassment), state it explicitly in the reasoning.\n- Keep total reasoning ≤6 bullet steps to avoid timeouts.\n\n\n# Retrieved Evidence\n\n\nProvided facts:\n- Noise at 500 m ≈ 45 dB.\n- Reserve considers 'significant' only if >60 dB or repeated disturbances.\n- Mission is single pass, 8 minutes.\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC01_BorderlineSchoolDistance expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC02_SafetyMarginDebate expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC03_NecessaryLowAltitude expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC05_DaylightIntent expected decision: REJECT\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC09_WildlifeImpact expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC10_CommercialIntent expected decision: REJECT\nDecision rule: Pragmatic ambiguity—treat vague terms (near, appropriate, necessary, reasonable hours, frequent) by intent and provided thresholds; avoid inventing numbers. If language is ambiguous or evidence missing, prefer UNCERTAIN/EXPLAIN_ONLY. CONDITIONAL_APPROVE must include concrete mitigations (reroute/delay to reasonable hours). Reject loopholes (commercial intent hidden, sarcasm ≠ consent, daylight vs clock defined by context).\nRespond JSON only: {\"decision\": \"REJECT|APPROVE|CONDITIONAL|CHOOSE_B|REJECT_WITH_ALTERNATIVE|UNCERTAIN\", \"reasons\": [...], \"citations\": [...], \"evidence_used\": [...]}. Cite option/waiver/priority fields when relevant.",
      "llm_raw": "```json\n{\n  \"decision\": \"APPROVE\",\n  \"confidence\": \"high\",\n  \"pragmatic_flags\": [],\n  \"reasoning_steps\": [\n    \"Step1 Literal: Mission proposes flying 500 m outside a protected buffer, generating an estimated 45 dB noise for a single 8-minute pass.\",\n    \"Step2 Regulatory Intent: The intent of the protected buffer and 'significant impact' thresholds is to prevent undue disturbance to wildlife.\",\n    \"Step3 Evidence: The reserve explicitly defines 'significant impact' as noise levels greater than 60 dB OR repeated disturbances.\",\n    \"Step4 Analysis: The proposed noise level of 45 dB is below the 60 dB threshold.\",\n    \"Step5 Analysis: A single 8-minute pass does not constitute 'repeated disturbances'.\",\n    \"Step6 Action: Based on the reserve's explicit criteria, the mission will not cause significant impact and can be approved.\"\n  ],\n  \"clarifications_needed\": [],\n  \"conditions\": [],\n  \"violated_policies\": [],\n  \"notes\": \"The explicit definition of 'significant impact' by the reserve resolves any potential ambiguity regarding noise levels and disturbance for this mission.\"\n}\n```",
      "llm_parsed": {
        "decision": "APPROVE",
        "confidence": "high",
        "pragmatic_flags": [],
        "reasoning_steps": [
          "Step1 Literal: Mission proposes flying 500 m outside a protected buffer, generating an estimated 45 dB noise for a single 8-minute pass.",
          "Step2 Regulatory Intent: The intent of the protected buffer and 'significant impact' thresholds is to prevent undue disturbance to wildlife.",
          "Step3 Evidence: The reserve explicitly defines 'significant impact' as noise levels greater than 60 dB OR repeated disturbances.",
          "Step4 Analysis: The proposed noise level of 45 dB is below the 60 dB threshold.",
          "Step5 Analysis: A single 8-minute pass does not constitute 'repeated disturbances'.",
          "Step6 Action: Based on the reserve's explicit criteria, the mission will not cause significant impact and can be approved."
        ],
        "clarifications_needed": [],
        "conditions": [],
        "violated_policies": [],
        "notes": "The explicit definition of 'significant impact' by the reserve resolves any potential ambiguity regarding noise levels and disturbance for this mission."
      },
      "mission": {},
      "retrieved_constraints": [
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC01_BorderlineSchoolDistance_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC01_BorderlineSchoolDistance expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC02_SafetyMarginDebate_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC02_SafetyMarginDebate expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC03_NecessaryLowAltitude_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC03_NecessaryLowAltitude expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC04_NoiseNecessity_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC05_DaylightIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC05_DaylightIntent expected decision: REJECT"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC06_LowAltitudeFiling_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC07_FrequencyVague_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC08_ReasonableHours_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC09_WildlifeImpact_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC09_WildlifeImpact expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC10_CommercialIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC10_CommercialIntent expected decision: REJECT"
        }
      ]
    },
    {
      "test_case_id": "TC10_CommercialIntent",
      "description": "Pilot claims to be hobbyist but monetizes posts.",
      "expected_decision": "REJECT",
      "llm_decision": "REJECT",
      "prompt": "# Pragmatic Ambiguity & Regulatory Intent Brief\n\nScenario: S032_PragmaticAmbiguity\nTest Case: TC10_CommercialIntent — Instagram hobbyist with ad revenue\nDescription: Pilot claims to be hobbyist but monetizes posts.\n\n## Pragmatic Axes\n(No pragmatic axes provided)\n\n## Policy Snippets & Intent\n- (No policy snippets provided)\n\n## Ambiguity Playbook\n- (No playbook hints)\n\n## Facts Provided\n- (No explicit facts provided)\n\n## Pragmatic Tags\n- (No pragmatic tags)\n\n## Reference Notes / Known Mitigations\n- Reject and cite economic benefit = commercial intent.\n\n---\n\n## Output Contract\nReturn **valid JSON** with these keys:\n1. `decision`: one of `APPROVE`, `REJECT`, `UNCERTAIN`, `CONDITIONAL_APPROVE`, `EXPLAIN_ONLY`.\n2. `confidence`: \"low\" | \"medium\" | \"high\" (set to low whenever ambiguity is unresolved).\n3. `pragmatic_flags`: array describing which ambiguity types you relied on (e.g., \"scalar implicature\", \"sarcasm\").\n4. `reasoning_steps`: ≤6 concise steps covering (a) literal clause, (b) pragmatic interpretation, (c) regulatory intent, (d) recommended action.\n5. `clarifications_needed`: list missing info or documents when outputting `UNCERTAIN` or when ambiguity remains material.\n6. `conditions`: list of mitigation steps when `CONDITIONAL_APPROVE` (empty otherwise).\n7. `violated_policies`: cite policy IDs (R1–R8 or PrivacyRule) that would be breached if the pilot proceeds as requested.\n8. `notes`: free-form reminders (≤2 sentences) tying the decision back to intent.\n\n### Example\n```json\n{\n  \"decision\": \"UNCERTAIN\",\n  \"confidence\": \"low\",\n  \"pragmatic_flags\": [\"scalar implicature\", \"deixis\"],\n  \"reasoning_steps\": [\n    \"Step1 Literal: Memo bans flights 'near' schools but no legal number provided.\",\n    \"Step2 Pragmatic: Informal 200 m threshold exists yet regulators extend buffers after complaints.\",\n    \"Step3 Risk: 300 m may still count as 'near' if complaints escalate.\",\n    \"Step4 Action: Hold flight and request written clarification/threshold.\"],\n  \"clarifications_needed\": [\"Obtain official distance definition from operations bulletin\"],\n  \"conditions\": [],\n  \"violated_policies\": [],\n  \"notes\": \"Treat undefined scalar term cautiously; do not infer clearance without regulator input.\"\n}\n```\n\nRules:\n- Never invent numeric thresholds or exemptions that the memo does not cover.\n- Sarcasm/indirect speech must be interpreted pragmatically; sarcasm never equals consent.\n- If you infer regulatory intent (e.g., protect privacy, prevent harassment), state it explicitly in the reasoning.\n- Keep total reasoning ≤6 bullet steps to avoid timeouts.\n\n\n# Retrieved Evidence\n\n\nProvided facts:\n- Account earns sponsorship revenue.\n- Rule bans commercial photography regardless of labeling.\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC01_BorderlineSchoolDistance expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC02_SafetyMarginDebate expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC03_NecessaryLowAltitude expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC05_DaylightIntent expected decision: REJECT\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC09_WildlifeImpact expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC10_CommercialIntent expected decision: REJECT\nDecision rule: Pragmatic ambiguity—treat vague terms (near, appropriate, necessary, reasonable hours, frequent) by intent and provided thresholds; avoid inventing numbers. If language is ambiguous or evidence missing, prefer UNCERTAIN/EXPLAIN_ONLY. CONDITIONAL_APPROVE must include concrete mitigations (reroute/delay to reasonable hours). Reject loopholes (commercial intent hidden, sarcasm ≠ consent, daylight vs clock defined by context).\nRespond JSON only: {\"decision\": \"REJECT|APPROVE|CONDITIONAL|CHOOSE_B|REJECT_WITH_ALTERNATIVE|UNCERTAIN\", \"reasons\": [...], \"citations\": [...], \"evidence_used\": [...]}. Cite option/waiver/priority fields when relevant.",
      "llm_raw": "```json\n{\n  \"decision\": \"REJECT\",\n  \"confidence\": \"high\",\n  \"pragmatic_flags\": [\"intentional mislabeling\", \"discourse interpretation\"],\n  \"reasoning_steps\": [\n    \"Step1 Literal: Pilot claims hobbyist status for Instagram activities.\",\n    \"Step2 Facts: The account earns sponsorship revenue, indicating monetization.\",\n    \"Step3 Policy: A rule explicitly bans commercial photography regardless of how it is labeled.\",\n    \"Step4 Pragmatic: The pilot's self-labeling as a 'hobbyist' is a misrepresentation intended to circumvent regulations on commercial activity.\",\n    \"Step5 Regulatory Intent: The rule aims to prevent individuals from operating commercially under the guise of non-commercial activity.\",\n    \"Step6 Action: Reject the claim as the activity is clearly commercial per policy and evidence.\"\n  ],\n  \"clarifications_needed\": [],\n  \"conditions\": [],\n  \"violated_policies\": [\"Rule banning commercial photography regardless of labeling\"],\n  \"notes\": \"Commercial intent is determined by economic benefit and activity, not merely by self-proclaimed labels. Reject attempts to exploit labeling loopholes.\"\n}\n```",
      "llm_parsed": {
        "decision": "REJECT",
        "confidence": "high",
        "pragmatic_flags": [
          "intentional mislabeling",
          "discourse interpretation"
        ],
        "reasoning_steps": [
          "Step1 Literal: Pilot claims hobbyist status for Instagram activities.",
          "Step2 Facts: The account earns sponsorship revenue, indicating monetization.",
          "Step3 Policy: A rule explicitly bans commercial photography regardless of how it is labeled.",
          "Step4 Pragmatic: The pilot's self-labeling as a 'hobbyist' is a misrepresentation intended to circumvent regulations on commercial activity.",
          "Step5 Regulatory Intent: The rule aims to prevent individuals from operating commercially under the guise of non-commercial activity.",
          "Step6 Action: Reject the claim as the activity is clearly commercial per policy and evidence."
        ],
        "clarifications_needed": [],
        "conditions": [],
        "violated_policies": [
          "Rule banning commercial photography regardless of labeling"
        ],
        "notes": "Commercial intent is determined by economic benefit and activity, not merely by self-proclaimed labels. Reject attempts to exploit labeling loopholes."
      },
      "mission": {},
      "retrieved_constraints": [
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC01_BorderlineSchoolDistance_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC01_BorderlineSchoolDistance expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC02_SafetyMarginDebate_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC02_SafetyMarginDebate expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC03_NecessaryLowAltitude_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC03_NecessaryLowAltitude expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC04_NoiseNecessity_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC05_DaylightIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC05_DaylightIntent expected decision: REJECT"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC06_LowAltitudeFiling_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC07_FrequencyVague_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC08_ReasonableHours_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC09_WildlifeImpact_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC09_WildlifeImpact expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC10_CommercialIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC10_CommercialIntent expected decision: REJECT"
        }
      ]
    }
  ]
}