{
  "scenario": "S017",
  "summary": {
    "total_test_cases": 8,
    "llm_calls": 8,
    "llm_accuracy": "8/8",
    "llm_accuracy_percent": "100.0%"
  },
  "results": [
    {
      "test_case_id": "TC1_ExceedPayloadLimit",
      "description": "超重起飞测试 - 载重超过限制",
      "expected_decision": "REJECT",
      "llm_decision": "REJECT",
      "mission": {
        "payload_kg": 8.0,
        "target_xyz": {
          "x": 500.0,
          "y": 0.0,
          "z": 50.0
        },
        "altitude_m": 50.0,
        "payload_eval": {
          "payload_kg": 8.0,
          "max_payload_kg": 5.0,
          "status": "VIOLATION"
        }
      },
      "prompt": "You are a dispatch AI. Decide APPROVE or REJECT with cited constraints.\nRetrieved constraints:\n- Payload: 8.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 3.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 2.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 2.5kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 2.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 5.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 3.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 1.5kg (SOP S017_payload_and_drop_restrictions.jsonc)\nPayload check: payload=8.0kg, max=5.0kg => status=VIOLATION\nPayload rule: if payload_eval status == VIOLATION (payload > max), decision MUST be REJECT.\nNo geofence constraints provided; there is NO geofence violation and geofence must NOT be used to reject.\nMission: {\"payload_kg\": 8.0, \"target_xyz\": {\"x\": 500.0, \"y\": 0.0, \"z\": 50.0}, \"altitude_m\": 50.0, \"payload_eval\": {\"payload_kg\": 8.0, \"max_payload_kg\": 5.0, \"status\": \"VIOLATION\"}}\nDecide and cite which constraints are satisfied/violated. Respond with JSON:\n{ \"decision\": \"APPROVE|REJECT|CONDITIONAL|UNCERTAIN\", \"reasons\": [...], \"citations\": [...] }",
      "llm_raw": "```json\n{\n  \"decision\": \"REJECT\",\n  \"reasons\": [\n    \"The mission payload (8.0kg) exceeds the maximum allowed payload (5.0kg), which is a direct violation.\"\n  ],\n  \"citations\": [\n    \"Payload check: payload=8.0kg, max=5.0kg => status=VIOLATION\",\n    \"Payload rule: if payload_eval status == VIOLATION (payload > max), decision MUST be REJECT.\",\n    \"Payload: 5.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\"\n  ]\n}\n```",
      "llm_parsed": {
        "decision": "REJECT",
        "reasons": [
          "The mission payload (8.0kg) exceeds the maximum allowed payload (5.0kg), which is a direct violation."
        ],
        "citations": [
          "Payload check: payload=8.0kg, max=5.0kg => status=VIOLATION",
          "Payload rule: if payload_eval status == VIOLATION (payload > max), decision MUST be REJECT.",
          "Payload: 5.0kg (SOP S017_payload_and_drop_restrictions.jsonc)"
        ]
      },
      "retrieved_constraints": [
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "8.0",
          "raw_unit": "kg",
          "canonical_value": "8.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "3.0",
          "raw_unit": "kg",
          "canonical_value": "3.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "2.0",
          "raw_unit": "kg",
          "canonical_value": "2.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "2.5",
          "raw_unit": "kg",
          "canonical_value": "2.5",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "2.0",
          "raw_unit": "kg",
          "canonical_value": "2.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "5.0",
          "raw_unit": "kg",
          "canonical_value": "5.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "3.0",
          "raw_unit": "kg",
          "canonical_value": "3.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "1.5",
          "raw_unit": "kg",
          "canonical_value": "1.5",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        }
      ]
    },
    {
      "test_case_id": "TC2_NormalPayload",
      "description": "正常载重飞行 - 载重在限制内",
      "expected_decision": "APPROVE",
      "llm_decision": "APPROVE",
      "mission": {
        "payload_kg": 3.0,
        "target_xyz": {
          "x": 500.0,
          "y": 0.0,
          "z": 50.0
        },
        "altitude_m": 50.0,
        "payload_eval": {
          "payload_kg": 3.0,
          "max_payload_kg": 5.0,
          "status": "OK"
        }
      },
      "prompt": "You are a dispatch AI. Decide APPROVE or REJECT with cited constraints.\nRetrieved constraints:\n- Payload: 8.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 3.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 2.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 2.5kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 2.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 5.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 3.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 1.5kg (SOP S017_payload_and_drop_restrictions.jsonc)\nPayload check: payload=3.0kg, max=5.0kg => status=OK\nPayload rule: if payload_eval status == VIOLATION (payload > max), decision MUST be REJECT.\nNo geofence constraints provided; there is NO geofence violation and geofence must NOT be used to reject.\nMission: {\"payload_kg\": 3.0, \"target_xyz\": {\"x\": 500.0, \"y\": 0.0, \"z\": 50.0}, \"altitude_m\": 50.0, \"payload_eval\": {\"payload_kg\": 3.0, \"max_payload_kg\": 5.0, \"status\": \"OK\"}}\nDecide and cite which constraints are satisfied/violated. Respond with JSON:\n{ \"decision\": \"APPROVE|REJECT|CONDITIONAL|UNCERTAIN\", \"reasons\": [...], \"citations\": [...] }",
      "llm_raw": "```json\n{\n  \"decision\": \"APPROVE\",\n  \"reasons\": [\n    \"Payload (3.0kg) is within the maximum allowed payload (5.0kg), as indicated by the 'payload_eval' status being 'OK'.\",\n    \"No geofence constraints were provided, therefore no geofence violation occurred.\"\n  ],\n  \"citations\": [\n    \"Payload check: payload=3.0kg, max=5.0kg => status=OK\",\n    \"Payload rule: if payload_eval status == VIOLATION (payload > max), decision MUST be REJECT.\",\n    \"No geofence constraints provided; there is NO geofence violation and geofence must NOT be used to reject.\",\n    \"SOP S017_payload_and_drop_restrictions.jsonc\"\n  ]\n}\n```",
      "llm_parsed": {
        "decision": "APPROVE",
        "reasons": [
          "Payload (3.0kg) is within the maximum allowed payload (5.0kg), as indicated by the 'payload_eval' status being 'OK'.",
          "No geofence constraints were provided, therefore no geofence violation occurred."
        ],
        "citations": [
          "Payload check: payload=3.0kg, max=5.0kg => status=OK",
          "Payload rule: if payload_eval status == VIOLATION (payload > max), decision MUST be REJECT.",
          "No geofence constraints provided; there is NO geofence violation and geofence must NOT be used to reject.",
          "SOP S017_payload_and_drop_restrictions.jsonc"
        ]
      },
      "retrieved_constraints": [
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "8.0",
          "raw_unit": "kg",
          "canonical_value": "8.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "3.0",
          "raw_unit": "kg",
          "canonical_value": "3.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "2.0",
          "raw_unit": "kg",
          "canonical_value": "2.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "2.5",
          "raw_unit": "kg",
          "canonical_value": "2.5",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "2.0",
          "raw_unit": "kg",
          "canonical_value": "2.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "5.0",
          "raw_unit": "kg",
          "canonical_value": "5.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "3.0",
          "raw_unit": "kg",
          "canonical_value": "3.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "1.5",
          "raw_unit": "kg",
          "canonical_value": "1.5",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        }
      ]
    },
    {
      "test_case_id": "TC3_DropInUrbanArea",
      "description": "城市区域投放物品 - 禁止投放",
      "expected_decision": "REJECT",
      "llm_decision": "REJECT",
      "mission": {
        "payload_kg": 2.0,
        "target_xyz": {
          "x": 1000.0,
          "y": 0.0,
          "z": 50.0
        },
        "altitude_m": 50.0,
        "drop_location": [
          1000,
          0,
          50
        ],
        "payload_eval": {
          "payload_kg": 2.0,
          "max_payload_kg": 5.0,
          "status": "OK"
        },
        "drop_eval": {
          "drop_location": [
            1000,
            0,
            50
          ],
          "zone": {
            "zone_id": "urban_area",
            "type": "urban",
            "distance": 0.0,
            "radius": 500.0,
            "policy": "prohibited"
          },
          "has_approval": false,
          "status": "VIOLATION"
        }
      },
      "prompt": "You are a dispatch AI. Decide APPROVE or REJECT with cited constraints.\nRetrieved constraints:\n- Payload: 8.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 3.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 2.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 2.5kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 2.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 5.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 3.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 1.5kg (SOP S017_payload_and_drop_restrictions.jsonc)\nPayload check: payload=2.0kg, max=5.0kg => status=OK\nDrop check: location=[1000, 0, 50], zone={'zone_id': 'urban_area', 'type': 'urban', 'distance': 0.0, 'radius': 500.0, 'policy': 'prohibited'}, has_approval=False => status=VIOLATION\nPayload rule: if payload_eval status == VIOLATION (payload > max), decision MUST be REJECT.\nDrop rule: if drop_eval status == VIOLATION (prohibited zone or approval missing), decision MUST be REJECT. If status==OK, drop is permitted.\nNo geofence constraints provided; there is NO geofence violation and geofence must NOT be used to reject.\nMission: {\"payload_kg\": 2.0, \"target_xyz\": {\"x\": 1000.0, \"y\": 0.0, \"z\": 50.0}, \"altitude_m\": 50.0, \"drop_location\": [1000, 0, 50], \"payload_eval\": {\"payload_kg\": 2.0, \"max_payload_kg\": 5.0, \"status\": \"OK\"}, \"drop_eval\": {\"drop_location\": [1000, 0, 50], \"zone\": {\"zone_id\": \"urban_area\", \"type\": \"urban\", \"distance\": 0.0, \"radius\": 500.0, \"policy\": \"prohibited\"}, \"has_approval\": false, \"status\": \"VIOLATION\"}}\nDecide and cite which constraints are satisfied/violated. Respond with JSON:\n{ \"decision\": \"APPROVE|REJECT|CONDITIONAL|UNCERTAIN\", \"reasons\": [...], \"citations\": [...] }",
      "llm_raw": "```json\n{\n  \"decision\": \"REJECT\",\n  \"reasons\": [\n    \"The mission is rejected because the drop location is within a 'prohibited' urban area zone and lacks the necessary approval.\",\n    \"The payload of 2.0kg is within the maximum allowed payload of 5.0kg and does not violate payload restrictions.\"\n  ],\n  \"citations\": [\n    \"Drop check: location=[1000, 0, 50], zone={'zone_id': 'urban_area', 'type': 'urban', 'distance': 0.0, 'radius': 500.0, 'policy': 'prohibited'}, has_approval=False => status=VIOLATION\",\n    \"Drop rule: if drop_eval status == VIOLATION (prohibited zone or approval missing), decision MUST be REJECT.\",\n    \"Payload check: payload=2.0kg, max=5.0kg => status=OK\",\n    \"Payload rule: if payload_eval status == VIOLATION (payload > max), decision MUST be REJECT.\",\n    \"SOP S017_payload_and_drop_restrictions.jsonc\"\n  ]\n}\n```",
      "llm_parsed": {
        "decision": "REJECT",
        "reasons": [
          "The mission is rejected because the drop location is within a 'prohibited' urban area zone and lacks the necessary approval.",
          "The payload of 2.0kg is within the maximum allowed payload of 5.0kg and does not violate payload restrictions."
        ],
        "citations": [
          "Drop check: location=[1000, 0, 50], zone={'zone_id': 'urban_area', 'type': 'urban', 'distance': 0.0, 'radius': 500.0, 'policy': 'prohibited'}, has_approval=False => status=VIOLATION",
          "Drop rule: if drop_eval status == VIOLATION (prohibited zone or approval missing), decision MUST be REJECT.",
          "Payload check: payload=2.0kg, max=5.0kg => status=OK",
          "Payload rule: if payload_eval status == VIOLATION (payload > max), decision MUST be REJECT.",
          "SOP S017_payload_and_drop_restrictions.jsonc"
        ]
      },
      "retrieved_constraints": [
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "8.0",
          "raw_unit": "kg",
          "canonical_value": "8.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "3.0",
          "raw_unit": "kg",
          "canonical_value": "3.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "2.0",
          "raw_unit": "kg",
          "canonical_value": "2.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "2.5",
          "raw_unit": "kg",
          "canonical_value": "2.5",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "2.0",
          "raw_unit": "kg",
          "canonical_value": "2.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "5.0",
          "raw_unit": "kg",
          "canonical_value": "5.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "3.0",
          "raw_unit": "kg",
          "canonical_value": "3.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "1.5",
          "raw_unit": "kg",
          "canonical_value": "1.5",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        }
      ]
    },
    {
      "test_case_id": "TC4_DropInSafeZone",
      "description": "安全区域投放 - 已审批可投放",
      "expected_decision": "APPROVE",
      "llm_decision": "APPROVE",
      "mission": {
        "payload_kg": 2.5,
        "target_xyz": {
          "x": 2000.0,
          "y": 0.0,
          "z": 50.0
        },
        "altitude_m": 50.0,
        "drop_location": [
          2000,
          0,
          50
        ],
        "has_drop_approval": true,
        "payload_eval": {
          "payload_kg": 2.5,
          "max_payload_kg": 5.0,
          "status": "OK"
        },
        "drop_eval": {
          "drop_location": [
            2000,
            0,
            50
          ],
          "zone": {
            "zone_id": "safe_rural_zone",
            "type": "rural",
            "distance": 0.0,
            "radius": 300.0,
            "policy": "approval_required"
          },
          "has_approval": true,
          "status": "OK"
        }
      },
      "prompt": "You are a dispatch AI. Decide APPROVE or REJECT with cited constraints.\nRetrieved constraints:\n- Payload: 8.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 3.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 2.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 2.5kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 2.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 5.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 3.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 1.5kg (SOP S017_payload_and_drop_restrictions.jsonc)\nPayload check: payload=2.5kg, max=5.0kg => status=OK\nDrop check: location=[2000, 0, 50], zone={'zone_id': 'safe_rural_zone', 'type': 'rural', 'distance': 0.0, 'radius': 300.0, 'policy': 'approval_required'}, has_approval=True => status=OK\nPayload rule: if payload_eval status == VIOLATION (payload > max), decision MUST be REJECT.\nDrop rule: if drop_eval status == VIOLATION (prohibited zone or approval missing), decision MUST be REJECT. If status==OK, drop is permitted.\nNo geofence constraints provided; there is NO geofence violation and geofence must NOT be used to reject.\nMission: {\"payload_kg\": 2.5, \"target_xyz\": {\"x\": 2000.0, \"y\": 0.0, \"z\": 50.0}, \"altitude_m\": 50.0, \"drop_location\": [2000, 0, 50], \"has_drop_approval\": true, \"payload_eval\": {\"payload_kg\": 2.5, \"max_payload_kg\": 5.0, \"status\": \"OK\"}, \"drop_eval\": {\"drop_location\": [2000, 0, 50], \"zone\": {\"zone_id\": \"safe_rural_zone\", \"type\": \"rural\", \"distance\": 0.0, \"radius\": 300.0, \"policy\": \"approval_required\"}, \"has_approval\": true, \"status\": \"OK\"}}\nDecide and cite which constraints are satisfied/violated. Respond with JSON:\n{ \"decision\": \"APPROVE|REJECT|CONDITIONAL|UNCERTAIN\", \"reasons\": [...], \"citations\": [...] }",
      "llm_raw": "```json\n{\n  \"decision\": \"APPROVE\",\n  \"reasons\": [\n    \"Payload evaluation is OK: The mission's payload of 2.5kg is within the maximum allowed payload of 5.0kg.\",\n    \"Drop evaluation is OK: The drop location is in a 'safe_rural_zone' requiring approval, and 'has_drop_approval' is true.\",\n    \"No geofence constraints were provided, therefore no geofence violation exists.\"\n  ],\n  \"citations\": [\n    \"Payload check: payload=2.5kg, max=5.0kg => status=OK\",\n    \"Payload rule: if payload_eval status == VIOLATION (payload > max), decision MUST be REJECT.\",\n    \"Drop check: location=[2000, 0, 50], zone={'zone_id': 'safe_rural_zone', 'type': 'rural', 'distance': 0.0, 'radius': 300.0, 'policy': 'approval_required'}, has_approval=True => status=OK\",\n    \"Drop rule: if drop_eval status == VIOLATION (prohibited zone or approval missing), decision MUST be REJECT. If status==OK, drop is permitted.\",\n    \"No geofence constraints provided; there is NO geofence violation and geofence must NOT be used to reject.\"\n  ]\n}\n```",
      "llm_parsed": {
        "decision": "APPROVE",
        "reasons": [
          "Payload evaluation is OK: The mission's payload of 2.5kg is within the maximum allowed payload of 5.0kg.",
          "Drop evaluation is OK: The drop location is in a 'safe_rural_zone' requiring approval, and 'has_drop_approval' is true.",
          "No geofence constraints were provided, therefore no geofence violation exists."
        ],
        "citations": [
          "Payload check: payload=2.5kg, max=5.0kg => status=OK",
          "Payload rule: if payload_eval status == VIOLATION (payload > max), decision MUST be REJECT.",
          "Drop check: location=[2000, 0, 50], zone={'zone_id': 'safe_rural_zone', 'type': 'rural', 'distance': 0.0, 'radius': 300.0, 'policy': 'approval_required'}, has_approval=True => status=OK",
          "Drop rule: if drop_eval status == VIOLATION (prohibited zone or approval missing), decision MUST be REJECT. If status==OK, drop is permitted.",
          "No geofence constraints provided; there is NO geofence violation and geofence must NOT be used to reject."
        ]
      },
      "retrieved_constraints": [
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "8.0",
          "raw_unit": "kg",
          "canonical_value": "8.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "3.0",
          "raw_unit": "kg",
          "canonical_value": "3.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "2.0",
          "raw_unit": "kg",
          "canonical_value": "2.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "2.5",
          "raw_unit": "kg",
          "canonical_value": "2.5",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "2.0",
          "raw_unit": "kg",
          "canonical_value": "2.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "5.0",
          "raw_unit": "kg",
          "canonical_value": "5.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "3.0",
          "raw_unit": "kg",
          "canonical_value": "3.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "1.5",
          "raw_unit": "kg",
          "canonical_value": "1.5",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        }
      ]
    },
    {
      "test_case_id": "TC5_DropWithoutApproval",
      "description": "未经审批投放 - 缺少审批",
      "expected_decision": "REJECT",
      "llm_decision": "REJECT",
      "mission": {
        "payload_kg": 2.0,
        "target_xyz": {
          "x": 500.0,
          "y": 0.0,
          "z": 50.0
        },
        "altitude_m": 50.0,
        "drop_location": [
          500,
          0,
          50
        ],
        "has_drop_approval": false,
        "payload_eval": {
          "payload_kg": 2.0,
          "max_payload_kg": 5.0,
          "status": "OK"
        },
        "drop_eval": {
          "drop_location": [
            500,
            0,
            50
          ],
          "zone": {
            "zone_id": "urban_area",
            "type": "urban",
            "distance": 500.0,
            "radius": 500.0,
            "policy": "prohibited"
          },
          "has_approval": false,
          "status": "VIOLATION"
        }
      },
      "prompt": "You are a dispatch AI. Decide APPROVE or REJECT with cited constraints.\nRetrieved constraints:\n- Payload: 8.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 3.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 2.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 2.5kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 2.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 5.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 3.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 1.5kg (SOP S017_payload_and_drop_restrictions.jsonc)\nPayload check: payload=2.0kg, max=5.0kg => status=OK\nDrop check: location=[500, 0, 50], zone={'zone_id': 'urban_area', 'type': 'urban', 'distance': 500.0, 'radius': 500.0, 'policy': 'prohibited'}, has_approval=False => status=VIOLATION\nPayload rule: if payload_eval status == VIOLATION (payload > max), decision MUST be REJECT.\nDrop rule: if drop_eval status == VIOLATION (prohibited zone or approval missing), decision MUST be REJECT. If status==OK, drop is permitted.\nNo geofence constraints provided; there is NO geofence violation and geofence must NOT be used to reject.\nMission: {\"payload_kg\": 2.0, \"target_xyz\": {\"x\": 500.0, \"y\": 0.0, \"z\": 50.0}, \"altitude_m\": 50.0, \"drop_location\": [500, 0, 50], \"has_drop_approval\": false, \"payload_eval\": {\"payload_kg\": 2.0, \"max_payload_kg\": 5.0, \"status\": \"OK\"}, \"drop_eval\": {\"drop_location\": [500, 0, 50], \"zone\": {\"zone_id\": \"urban_area\", \"type\": \"urban\", \"distance\": 500.0, \"radius\": 500.0, \"policy\": \"prohibited\"}, \"has_approval\": false, \"status\": \"VIOLATION\"}}\nDecide and cite which constraints are satisfied/violated. Respond with JSON:\n{ \"decision\": \"APPROVE|REJECT|CONDITIONAL|UNCERTAIN\", \"reasons\": [...], \"citations\": [...] }",
      "llm_raw": "```json\n{\n  \"decision\": \"REJECT\",\n  \"reasons\": [\n    \"Payload is within the permitted limits (2.0kg <= 5.0kg).\",\n    \"The drop location is within an 'urban_area' zone, which is marked as 'prohibited' for drops without specific approval. The mission explicitly states 'has_drop_approval: false', leading to a drop violation.\"\n  ],\n  \"citations\": [\n    \"Payload check: payload=2.0kg, max=5.0kg => status=OK (SOP S017_payload_and_drop_restrictions.jsonc)\",\n    \"Payload rule: if payload_eval status == VIOLATION (payload > max), decision MUST be REJECT. (Payload is OK, so this rule is not violated)\",\n    \"Drop check: location=[500, 0, 50], zone={'zone_id': 'urban_area', 'type': 'urban', 'distance': 500.0, 'radius': 500.0, 'policy': 'prohibited'}, has_approval=False => status=VIOLATION\",\n    \"Drop rule: if drop_eval status == VIOLATION (prohibited zone or approval missing), decision MUST be REJECT.\"\n  ]\n}\n```",
      "llm_parsed": {
        "decision": "REJECT",
        "reasons": [
          "Payload is within the permitted limits (2.0kg <= 5.0kg).",
          "The drop location is within an 'urban_area' zone, which is marked as 'prohibited' for drops without specific approval. The mission explicitly states 'has_drop_approval: false', leading to a drop violation."
        ],
        "citations": [
          "Payload check: payload=2.0kg, max=5.0kg => status=OK (SOP S017_payload_and_drop_restrictions.jsonc)",
          "Payload rule: if payload_eval status == VIOLATION (payload > max), decision MUST be REJECT. (Payload is OK, so this rule is not violated)",
          "Drop check: location=[500, 0, 50], zone={'zone_id': 'urban_area', 'type': 'urban', 'distance': 500.0, 'radius': 500.0, 'policy': 'prohibited'}, has_approval=False => status=VIOLATION",
          "Drop rule: if drop_eval status == VIOLATION (prohibited zone or approval missing), decision MUST be REJECT."
        ]
      },
      "retrieved_constraints": [
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "8.0",
          "raw_unit": "kg",
          "canonical_value": "8.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "3.0",
          "raw_unit": "kg",
          "canonical_value": "3.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "2.0",
          "raw_unit": "kg",
          "canonical_value": "2.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "2.5",
          "raw_unit": "kg",
          "canonical_value": "2.5",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "2.0",
          "raw_unit": "kg",
          "canonical_value": "2.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "5.0",
          "raw_unit": "kg",
          "canonical_value": "5.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "3.0",
          "raw_unit": "kg",
          "canonical_value": "3.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "1.5",
          "raw_unit": "kg",
          "canonical_value": "1.5",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        }
      ]
    },
    {
      "test_case_id": "TC6_PayloadBoundary",
      "description": "载重边界测试 - 恰好5kg",
      "expected_decision": "APPROVE",
      "llm_decision": "APPROVE",
      "mission": {
        "payload_kg": 5.0,
        "target_xyz": {
          "x": 300.0,
          "y": 0.0,
          "z": 50.0
        },
        "altitude_m": 50.0,
        "payload_eval": {
          "payload_kg": 5.0,
          "max_payload_kg": 5.0,
          "status": "OK"
        }
      },
      "prompt": "You are a dispatch AI. Decide APPROVE or REJECT with cited constraints.\nRetrieved constraints:\n- Payload: 8.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 3.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 2.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 2.5kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 2.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 5.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 3.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 1.5kg (SOP S017_payload_and_drop_restrictions.jsonc)\nPayload check: payload=5.0kg, max=5.0kg => status=OK\nPayload rule: if payload_eval status == VIOLATION (payload > max), decision MUST be REJECT.\nNo geofence constraints provided; there is NO geofence violation and geofence must NOT be used to reject.\nMission: {\"payload_kg\": 5.0, \"target_xyz\": {\"x\": 300.0, \"y\": 0.0, \"z\": 50.0}, \"altitude_m\": 50.0, \"payload_eval\": {\"payload_kg\": 5.0, \"max_payload_kg\": 5.0, \"status\": \"OK\"}}\nDecide and cite which constraints are satisfied/violated. Respond with JSON:\n{ \"decision\": \"APPROVE|REJECT|CONDITIONAL|UNCERTAIN\", \"reasons\": [...], \"citations\": [...] }",
      "llm_raw": "```json\n{\n  \"decision\": \"APPROVE\",\n  \"reasons\": [\n    \"Payload (5.0kg) is within the maximum allowed limit (5.0kg), as indicated by the 'OK' status in payload_eval.\",\n    \"No geofence constraints were provided, therefore no geofence violation exists.\"\n  ],\n  \"citations\": [\n    \"SOP S017_payload_and_drop_restrictions.jsonc\"\n  ]\n}\n```",
      "llm_parsed": {
        "decision": "APPROVE",
        "reasons": [
          "Payload (5.0kg) is within the maximum allowed limit (5.0kg), as indicated by the 'OK' status in payload_eval.",
          "No geofence constraints were provided, therefore no geofence violation exists."
        ],
        "citations": [
          "SOP S017_payload_and_drop_restrictions.jsonc"
        ]
      },
      "retrieved_constraints": [
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "8.0",
          "raw_unit": "kg",
          "canonical_value": "8.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "3.0",
          "raw_unit": "kg",
          "canonical_value": "3.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "2.0",
          "raw_unit": "kg",
          "canonical_value": "2.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "2.5",
          "raw_unit": "kg",
          "canonical_value": "2.5",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "2.0",
          "raw_unit": "kg",
          "canonical_value": "2.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "5.0",
          "raw_unit": "kg",
          "canonical_value": "5.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "3.0",
          "raw_unit": "kg",
          "canonical_value": "3.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "1.5",
          "raw_unit": "kg",
          "canonical_value": "1.5",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        }
      ]
    },
    {
      "test_case_id": "TC7_AgriculturalExemption",
      "description": "农用无人机豁免 - 农业作业投放",
      "expected_decision": "APPROVE",
      "llm_decision": "APPROVE",
      "mission": {
        "payload_kg": 3.0,
        "target_xyz": {
          "x": 1500.0,
          "y": -500.0,
          "z": 50.0
        },
        "altitude_m": 50.0,
        "drop_location": [
          1500,
          -500,
          50
        ],
        "has_drop_approval": false,
        "drone_type": "agricultural",
        "payload_eval": {
          "payload_kg": 3.0,
          "max_payload_kg": 5.0,
          "status": "OK"
        },
        "drop_eval": {
          "drop_location": [
            1500,
            -500,
            50
          ],
          "zone": {
            "zone_id": "agricultural_zone",
            "type": "agricultural",
            "distance": 0.0,
            "radius": 400.0,
            "policy": "agricultural_exemption"
          },
          "has_approval": false,
          "status": "OK"
        }
      },
      "prompt": "You are a dispatch AI. Decide APPROVE or REJECT with cited constraints.\nRetrieved constraints:\n- Payload: 8.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 3.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 2.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 2.5kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 2.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 5.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 3.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 1.5kg (SOP S017_payload_and_drop_restrictions.jsonc)\nPayload check: payload=3.0kg, max=5.0kg => status=OK\nDrop check: location=[1500, -500, 50], zone={'zone_id': 'agricultural_zone', 'type': 'agricultural', 'distance': 0.0, 'radius': 400.0, 'policy': 'agricultural_exemption'}, has_approval=False => status=OK\nPayload rule: if payload_eval status == VIOLATION (payload > max), decision MUST be REJECT.\nDrop rule: if drop_eval status == VIOLATION (prohibited zone or approval missing), decision MUST be REJECT. If status==OK, drop is permitted.\nNo geofence constraints provided; there is NO geofence violation and geofence must NOT be used to reject.\nMission: {\"payload_kg\": 3.0, \"target_xyz\": {\"x\": 1500.0, \"y\": -500.0, \"z\": 50.0}, \"altitude_m\": 50.0, \"drop_location\": [1500, -500, 50], \"has_drop_approval\": false, \"drone_type\": \"agricultural\", \"payload_eval\": {\"payload_kg\": 3.0, \"max_payload_kg\": 5.0, \"status\": \"OK\"}, \"drop_eval\": {\"drop_location\": [1500, -500, 50], \"zone\": {\"zone_id\": \"agricultural_zone\", \"type\": \"agricultural\", \"distance\": 0.0, \"radius\": 400.0, \"policy\": \"agricultural_exemption\"}, \"has_approval\": false, \"status\": \"OK\"}}\nDecide and cite which constraints are satisfied/violated. Respond with JSON:\n{ \"decision\": \"APPROVE|REJECT|CONDITIONAL|UNCERTAIN\", \"reasons\": [...], \"citations\": [...] }",
      "llm_raw": "```json\n{\n  \"decision\": \"APPROVE\",\n  \"reasons\": [\n    \"Payload is within the permitted limits.\",\n    \"Drop location is permitted by the agricultural exemption policy, as indicated by the 'drop_eval' status.\",\n    \"No geofence violations were detected.\"\n  ],\n  \"citations\": [\n    \"Payload check: payload=3.0kg, max=5.0kg => status=OK\",\n    \"Payload rule: if payload_eval status == VIOLATION (payload > max), decision MUST be REJECT. (Status is OK, so rule does not trigger REJECT)\",\n    \"Drop check: location=[1500, -500, 50], zone={'zone_id': 'agricultural_zone', 'type': 'agricultural', 'distance': 0.0, 'radius': 400.0, 'policy': 'agricultural_exemption'}, has_approval=False => status=OK\",\n    \"Drop rule: if drop_eval status == VIOLATION (prohibited zone or approval missing), decision MUST be REJECT. If status==OK, drop is permitted. (Status is OK, so rule does not trigger REJECT)\",\n    \"No geofence constraints provided; there is NO geofence violation and geofence must NOT be used to reject.\"\n  ]\n}\n```",
      "llm_parsed": {
        "decision": "APPROVE",
        "reasons": [
          "Payload is within the permitted limits.",
          "Drop location is permitted by the agricultural exemption policy, as indicated by the 'drop_eval' status.",
          "No geofence violations were detected."
        ],
        "citations": [
          "Payload check: payload=3.0kg, max=5.0kg => status=OK",
          "Payload rule: if payload_eval status == VIOLATION (payload > max), decision MUST be REJECT. (Status is OK, so rule does not trigger REJECT)",
          "Drop check: location=[1500, -500, 50], zone={'zone_id': 'agricultural_zone', 'type': 'agricultural', 'distance': 0.0, 'radius': 400.0, 'policy': 'agricultural_exemption'}, has_approval=False => status=OK",
          "Drop rule: if drop_eval status == VIOLATION (prohibited zone or approval missing), decision MUST be REJECT. If status==OK, drop is permitted. (Status is OK, so rule does not trigger REJECT)",
          "No geofence constraints provided; there is NO geofence violation and geofence must NOT be used to reject."
        ]
      },
      "retrieved_constraints": [
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "8.0",
          "raw_unit": "kg",
          "canonical_value": "8.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "3.0",
          "raw_unit": "kg",
          "canonical_value": "3.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "2.0",
          "raw_unit": "kg",
          "canonical_value": "2.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "2.5",
          "raw_unit": "kg",
          "canonical_value": "2.5",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "2.0",
          "raw_unit": "kg",
          "canonical_value": "2.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "5.0",
          "raw_unit": "kg",
          "canonical_value": "5.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "3.0",
          "raw_unit": "kg",
          "canonical_value": "3.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "1.5",
          "raw_unit": "kg",
          "canonical_value": "1.5",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        }
      ]
    },
    {
      "test_case_id": "TC8_DropInCrowdArea",
      "description": "人群上方投放 - 严格禁止",
      "expected_decision": "REJECT",
      "llm_decision": "REJECT",
      "mission": {
        "payload_kg": 1.5,
        "target_xyz": {
          "x": 500.0,
          "y": 500.0,
          "z": 50.0
        },
        "altitude_m": 50.0,
        "drop_location": [
          500,
          500,
          50
        ],
        "has_drop_approval": true,
        "payload_eval": {
          "payload_kg": 1.5,
          "max_payload_kg": 5.0,
          "status": "OK"
        },
        "drop_eval": {
          "drop_location": [
            500,
            500,
            50
          ],
          "zone": {
            "zone_id": "crowd_area",
            "type": "crowd",
            "distance": 0.0,
            "radius": 200.0,
            "policy": "prohibited"
          },
          "has_approval": true,
          "status": "VIOLATION"
        }
      },
      "prompt": "You are a dispatch AI. Decide APPROVE or REJECT with cited constraints.\nRetrieved constraints:\n- Payload: 8.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 3.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 2.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 2.5kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 2.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 5.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 3.0kg (SOP S017_payload_and_drop_restrictions.jsonc)\n- Payload: 1.5kg (SOP S017_payload_and_drop_restrictions.jsonc)\nPayload check: payload=1.5kg, max=5.0kg => status=OK\nDrop check: location=[500, 500, 50], zone={'zone_id': 'crowd_area', 'type': 'crowd', 'distance': 0.0, 'radius': 200.0, 'policy': 'prohibited'}, has_approval=True => status=VIOLATION\nPayload rule: if payload_eval status == VIOLATION (payload > max), decision MUST be REJECT.\nDrop rule: if drop_eval status == VIOLATION (prohibited zone or approval missing), decision MUST be REJECT. If status==OK, drop is permitted.\nNo geofence constraints provided; there is NO geofence violation and geofence must NOT be used to reject.\nMission: {\"payload_kg\": 1.5, \"target_xyz\": {\"x\": 500.0, \"y\": 500.0, \"z\": 50.0}, \"altitude_m\": 50.0, \"drop_location\": [500, 500, 50], \"has_drop_approval\": true, \"payload_eval\": {\"payload_kg\": 1.5, \"max_payload_kg\": 5.0, \"status\": \"OK\"}, \"drop_eval\": {\"drop_location\": [500, 500, 50], \"zone\": {\"zone_id\": \"crowd_area\", \"type\": \"crowd\", \"distance\": 0.0, \"radius\": 200.0, \"policy\": \"prohibited\"}, \"has_approval\": true, \"status\": \"VIOLATION\"}}\nDecide and cite which constraints are satisfied/violated. Respond with JSON:\n{ \"decision\": \"APPROVE|REJECT|CONDITIONAL|UNCERTAIN\", \"reasons\": [...], \"citations\": [...] }",
      "llm_raw": "```json\n{\n  \"decision\": \"REJECT\",\n  \"reasons\": [\n    \"The mission's drop location is within a 'prohibited' crowd zone.\",\n    \"The 'drop_eval' status is 'VIOLATION', which mandates rejection according to the drop rule.\"\n  ],\n  \"citations\": [\n    \"Drop check: location=[500, 500, 50], zone={'zone_id': 'crowd_area', 'type': 'crowd', 'distance': 0.0, 'radius': 200.0, 'policy': 'prohibited'}, has_approval=True => status=VIOLATION\",\n    \"Drop rule: if drop_eval status == VIOLATION (prohibited zone or approval missing), decision MUST be REJECT.\",\n    \"Mission: {\\\"drop_eval\\\": {\\\"drop_location\\\": [500, 500, 50], \\\"zone\\\": {\\\"zone_id\\\": \\\"crowd_area\\\", \\\"type\\\": \\\"crowd\\\", \\\"distance\\\": 0.0, \\\"radius\\\": 200.0, \\\"policy\\\": \\\"prohibited\\\"}, \\\"has_approval\\\": true, \\\"status\\\": \\\"VIOLATION\\\"}}\"\n  ]\n}\n```",
      "llm_parsed": {
        "decision": "REJECT",
        "reasons": [
          "The mission's drop location is within a 'prohibited' crowd zone.",
          "The 'drop_eval' status is 'VIOLATION', which mandates rejection according to the drop rule."
        ],
        "citations": [
          "Drop check: location=[500, 500, 50], zone={'zone_id': 'crowd_area', 'type': 'crowd', 'distance': 0.0, 'radius': 200.0, 'policy': 'prohibited'}, has_approval=True => status=VIOLATION",
          "Drop rule: if drop_eval status == VIOLATION (prohibited zone or approval missing), decision MUST be REJECT.",
          "Mission: {\"drop_eval\": {\"drop_location\": [500, 500, 50], \"zone\": {\"zone_id\": \"crowd_area\", \"type\": \"crowd\", \"distance\": 0.0, \"radius\": 200.0, \"policy\": \"prohibited\"}, \"has_approval\": true, \"status\": \"VIOLATION\"}}"
        ]
      },
      "retrieved_constraints": [
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "8.0",
          "raw_unit": "kg",
          "canonical_value": "8.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "3.0",
          "raw_unit": "kg",
          "canonical_value": "3.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "2.0",
          "raw_unit": "kg",
          "canonical_value": "2.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "2.5",
          "raw_unit": "kg",
          "canonical_value": "2.5",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "2.0",
          "raw_unit": "kg",
          "canonical_value": "2.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "5.0",
          "raw_unit": "kg",
          "canonical_value": "5.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "3.0",
          "raw_unit": "kg",
          "canonical_value": "3.0",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        },
        {
          "concept": "Payload",
          "source_type": "SOP",
          "source_ref": "S017_payload_and_drop_restrictions.jsonc",
          "raw_value": "1.5",
          "raw_unit": "kg",
          "canonical_value": "1.5",
          "canonical_unit": "kg",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/basic/S017_payload_and_drop_restrictions.jsonc",
          "constraint_id": "S017_payload_and_drop_restrictions_test_cases_payload_kg"
        }
      ]
    }
  ]
}