{
  "scenario": "S004",
  "summary": {
    "total_test_cases": 4,
    "llm_calls": 4,
    "llm_accuracy": "4/4",
    "llm_accuracy_percent": "100.0%"
  },
  "results": [
    {
      "test_case_id": "TC1",
      "description": null,
      "expected_decision": "REJECT",
      "llm_decision": "REJECT",
      "mission": {
        "target_xyz": {
          "x": 0.0,
          "y": 0.0,
          "z": 50.0
        },
        "altitude_m": 50.0,
        "path_eval": [
          {
            "id": "airport_core_zone",
            "start_x": 6500.0,
            "start_y": 0.0,
            "end_x": 0.0,
            "end_y": 0.0,
            "min_distance": 49.99,
            "threshold": 500.0,
            "status": "inside",
            "action": "reject"
          },
          {
            "id": "airport_restricted_zone",
            "start_x": 6500.0,
            "start_y": 0.0,
            "end_x": 0.0,
            "end_y": 0.0,
            "min_distance": 49.99,
            "threshold": 2000.0,
            "status": "inside",
            "action": "reject"
          },
          {
            "id": "airport_warning_zone",
            "start_x": 6500.0,
            "start_y": 0.0,
            "end_x": 0.0,
            "end_y": 0.0,
            "min_distance": 49.99,
            "threshold": 5000.0,
            "status": "inside",
            "action": "warn"
          }
        ],
        "path_recommendation": "REJECT",
        "geofence_eval": [
          {
            "id": "airport_core_zone",
            "cx": 0.0,
            "cy": 0.0,
            "cz": 0.0,
            "radius": 500.0,
            "margin": 0.0,
            "distance": 50.0,
            "threshold": 500.0,
            "status": "inside",
            "action": "reject"
          },
          {
            "id": "airport_restricted_zone",
            "cx": 0.0,
            "cy": 0.0,
            "cz": 0.0,
            "radius": 2000.0,
            "margin": 0.0,
            "distance": 50.0,
            "threshold": 2000.0,
            "status": "inside",
            "action": "reject"
          },
          {
            "id": "airport_warning_zone",
            "cx": 0.0,
            "cy": 0.0,
            "cz": 0.0,
            "radius": 5000.0,
            "margin": 0.0,
            "distance": 50.0,
            "threshold": 5000.0,
            "status": "inside",
            "action": "warn"
          }
        ],
        "geofence_recommendation": "REJECT"
      },
      "prompt": "You are a dispatch AI. Decide APPROVE or REJECT with cited constraints.\nRetrieved constraints:\nGeofence checks (pre-computed, use these values directly):\n  - airport_core_zone: center=(0.0,0.0,0.0), radius=500.0m, margin=0.0m, distance=50.0m (3D), threshold=500.0m, action=reject => status=inside\n  - airport_restricted_zone: center=(0.0,0.0,0.0), radius=2000.0m, margin=0.0m, distance=50.0m (3D), threshold=2000.0m, action=reject => status=inside\n  - airport_warning_zone: center=(0.0,0.0,0.0), radius=5000.0m, margin=0.0m, distance=50.0m (3D), threshold=5000.0m, action=warn => status=inside\nPath crossing checks (pre-computed, use these values directly):\n  - airport_core_zone: start=(6500.0,0.0), end=(0.0,0.0), min_distance=49.99m, threshold=500.0m, action=reject => status=inside\n  - airport_restricted_zone: start=(6500.0,0.0), end=(0.0,0.0), min_distance=49.99m, threshold=2000.0m, action=reject => status=inside\n  - airport_warning_zone: start=(6500.0,0.0), end=(0.0,0.0), min_distance=49.99m, threshold=5000.0m, action=warn => status=inside\nGeofence decision rule: if ANY geofence status == inside and action=reject, decision MUST be REJECT. If status==inside and action=warn (obstacle avoidance), decision MUST be APPROVE_WITH_WARNING. If ALL geofences are outside, decision is APPROVE unless other constraints are violated. Do NOT answer UNCERTAIN when geofence_eval is present.\nPath crossing rule: if ANY path_eval status == inside and action=reject, decision MUST be REJECT. If status==inside and action=warn (obstacle avoidance), decision MUST be APPROVE_WITH_WARNING. Do NOT answer UNCERTAIN when path_eval is present.\nGeofence recommendation: REJECT. If geofence_recommendation is REJECT -> final decision MUST be REJECT. If geofence_recommendation is APPROVE_WITH_WARNING -> final decision MUST be APPROVE_WITH_WARNING unless other hard violations exist.\nPath recommendation: REJECT. If path_recommendation is REJECT -> final decision MUST be REJECT. If path_recommendation is APPROVE_WITH_WARNING -> final decision MUST be APPROVE_WITH_WARNING unless a geofence inside or auto_check violation exists.\nMission: {\"target_xyz\": {\"x\": 0.0, \"y\": 0.0, \"z\": 50.0}, \"altitude_m\": 50.0, \"path_eval\": [{\"id\": \"airport_core_zone\", \"start_x\": 6500.0, \"start_y\": 0.0, \"end_x\": 0.0, \"end_y\": 0.0, \"min_distance\": 49.99, \"threshold\": 500.0, \"status\": \"inside\", \"action\": \"reject\"}, {\"id\": \"airport_restricted_zone\", \"start_x\": 6500.0, \"start_y\": 0.0, \"end_x\": 0.0, \"end_y\": 0.0, \"min_distance\": 49.99, \"threshold\": 2000.0, \"status\": \"inside\", \"action\": \"reject\"}, {\"id\": \"airport_warning_zone\", \"start_x\": 6500.0, \"start_y\": 0.0, \"end_x\": 0.0, \"end_y\": 0.0, \"min_distance\": 49.99, \"threshold\": 5000.0, \"status\": \"inside\", \"action\": \"warn\"}], \"path_recommendation\": \"REJECT\", \"geofence_eval\": [{\"id\": \"airport_core_zone\", \"cx\": 0.0, \"cy\": 0.0, \"cz\": 0.0, \"radius\": 500.0, \"margin\": 0.0, \"distance\": 50.0, \"threshold\": 500.0, \"status\": \"inside\", \"action\": \"reject\"}, {\"id\": \"airport_restricted_zone\", \"cx\": 0.0, \"cy\": 0.0, \"cz\": 0.0, \"radius\": 2000.0, \"margin\": 0.0, \"distance\": 50.0, \"threshold\": 2000.0, \"status\": \"inside\", \"action\": \"reject\"}, {\"id\": \"airport_warning_zone\", \"cx\": 0.0, \"cy\": 0.0, \"cz\": 0.0, \"radius\": 5000.0, \"margin\": 0.0, \"distance\": 50.0, \"threshold\": 5000.0, \"status\": \"inside\", \"action\": \"warn\"}], \"geofence_recommendation\": \"REJECT\"}\nDecide and cite which constraints are satisfied/violated. Respond with JSON:\n{ \"decision\": \"APPROVE|REJECT|CONDITIONAL|UNCERTAIN\", \"reasons\": [...], \"citations\": [...] }",
      "llm_raw": "```json\n{\n  \"decision\": \"REJECT\",\n  \"reasons\": [\n    \"Geofence 'airport_core_zone' status is 'inside' with 'action=reject', which triggers a REJECT decision.\",\n    \"Geofence 'airport_restricted_zone' status is 'inside' with 'action=reject', which triggers a REJECT decision.\",\n    \"Path crossing for 'airport_core_zone' status is 'inside' with 'action=reject', which triggers a REJECT decision.\",\n    \"Path crossing for 'airport_restricted_zone' status is 'inside' with 'action=reject', which triggers a REJECT decision.\",\n    \"The 'geofence_recommendation' is 'REJECT', which mandates a final REJECT decision.\",\n    \"The 'path_recommendation' is 'REJECT', which mandates a final REJECT decision.\"\n  ],\n  \"citations\": [\n    \"Geofence decision rule: if ANY geofence status == inside and action=reject, decision MUST be REJECT.\",\n    \"Path crossing rule: if ANY path_eval status == inside and action=reject, decision MUST be REJECT.\",\n    \"Geofence recommendation: If geofence_recommendation is REJECT -> final decision MUST be REJECT.\",\n    \"Path recommendation: If path_recommendation is REJECT -> final decision MUST be REJECT.\",\n    \"Mission.geofence_eval[0]: {'id': 'airport_core_zone', 'status': 'inside', 'action': 'reject'}\",\n    \"Mission.geofence_eval[1]: {'id': 'airport_restricted_zone', 'status': 'inside', 'action': 'reject'}\",\n    \"Mission.path_eval[0]: {'id': 'airport_core_zone', 'status': 'inside', 'action': 'reject'}\",\n    \"Mission.path_eval[1]: {'id': 'airport_restricted_zone', 'status': 'inside', 'action': 'reject'}\",\n    \"Mission.geofence_recommendation: 'REJECT'\",\n    \"Mission.path_recommendation: 'REJECT'\"\n  ]\n}\n```",
      "llm_parsed": {
        "decision": "REJECT",
        "reasons": [
          "Geofence 'airport_core_zone' status is 'inside' with 'action=reject', which triggers a REJECT decision.",
          "Geofence 'airport_restricted_zone' status is 'inside' with 'action=reject', which triggers a REJECT decision.",
          "Path crossing for 'airport_core_zone' status is 'inside' with 'action=reject', which triggers a REJECT decision.",
          "Path crossing for 'airport_restricted_zone' status is 'inside' with 'action=reject', which triggers a REJECT decision.",
          "The 'geofence_recommendation' is 'REJECT', which mandates a final REJECT decision.",
          "The 'path_recommendation' is 'REJECT', which mandates a final REJECT decision."
        ],
        "citations": [
          "Geofence decision rule: if ANY geofence status == inside and action=reject, decision MUST be REJECT.",
          "Path crossing rule: if ANY path_eval status == inside and action=reject, decision MUST be REJECT.",
          "Geofence recommendation: If geofence_recommendation is REJECT -> final decision MUST be REJECT.",
          "Path recommendation: If path_recommendation is REJECT -> final decision MUST be REJECT.",
          "Mission.geofence_eval[0]: {'id': 'airport_core_zone', 'status': 'inside', 'action': 'reject'}",
          "Mission.geofence_eval[1]: {'id': 'airport_restricted_zone', 'status': 'inside', 'action': 'reject'}",
          "Mission.path_eval[0]: {'id': 'airport_core_zone', 'status': 'inside', 'action': 'reject'}",
          "Mission.path_eval[1]: {'id': 'airport_restricted_zone', 'status': 'inside', 'action': 'reject'}",
          "Mission.geofence_recommendation: 'REJECT'",
          "Mission.path_recommendation: 'REJECT'"
        ]
      },
      "retrieved_constraints": []
    },
    {
      "test_case_id": "TC2",
      "description": null,
      "expected_decision": "REJECT",
      "llm_decision": "REJECT",
      "mission": {
        "target_xyz": {
          "x": 1900.0,
          "y": 0.0,
          "z": 50.0
        },
        "altitude_m": 50.0,
        "path_eval": [
          {
            "id": "airport_core_zone",
            "start_x": 6500.0,
            "start_y": 0.0,
            "end_x": 1900.0,
            "end_y": 0.0,
            "min_distance": 1900.66,
            "threshold": 500.0,
            "status": "outside",
            "action": "reject"
          },
          {
            "id": "airport_restricted_zone",
            "start_x": 6500.0,
            "start_y": 0.0,
            "end_x": 1900.0,
            "end_y": 0.0,
            "min_distance": 1900.66,
            "threshold": 2000.0,
            "status": "inside",
            "action": "reject"
          },
          {
            "id": "airport_warning_zone",
            "start_x": 6500.0,
            "start_y": 0.0,
            "end_x": 1900.0,
            "end_y": 0.0,
            "min_distance": 1900.66,
            "threshold": 5000.0,
            "status": "inside",
            "action": "warn"
          }
        ],
        "path_recommendation": "REJECT",
        "geofence_eval": [
          {
            "id": "airport_core_zone",
            "cx": 0.0,
            "cy": 0.0,
            "cz": 0.0,
            "radius": 500.0,
            "margin": 0.0,
            "distance": 1900.66,
            "threshold": 500.0,
            "status": "outside",
            "action": "reject"
          },
          {
            "id": "airport_restricted_zone",
            "cx": 0.0,
            "cy": 0.0,
            "cz": 0.0,
            "radius": 2000.0,
            "margin": 0.0,
            "distance": 1900.66,
            "threshold": 2000.0,
            "status": "inside",
            "action": "reject"
          },
          {
            "id": "airport_warning_zone",
            "cx": 0.0,
            "cy": 0.0,
            "cz": 0.0,
            "radius": 5000.0,
            "margin": 0.0,
            "distance": 1900.66,
            "threshold": 5000.0,
            "status": "inside",
            "action": "warn"
          }
        ],
        "geofence_recommendation": "REJECT"
      },
      "prompt": "You are a dispatch AI. Decide APPROVE or REJECT with cited constraints.\nRetrieved constraints:\nGeofence checks (pre-computed, use these values directly):\n  - airport_core_zone: center=(0.0,0.0,0.0), radius=500.0m, margin=0.0m, distance=1900.66m (3D), threshold=500.0m, action=reject => status=outside\n  - airport_restricted_zone: center=(0.0,0.0,0.0), radius=2000.0m, margin=0.0m, distance=1900.66m (3D), threshold=2000.0m, action=reject => status=inside\n  - airport_warning_zone: center=(0.0,0.0,0.0), radius=5000.0m, margin=0.0m, distance=1900.66m (3D), threshold=5000.0m, action=warn => status=inside\nPath crossing checks (pre-computed, use these values directly):\n  - airport_core_zone: start=(6500.0,0.0), end=(1900.0,0.0), min_distance=1900.66m, threshold=500.0m, action=reject => status=outside\n  - airport_restricted_zone: start=(6500.0,0.0), end=(1900.0,0.0), min_distance=1900.66m, threshold=2000.0m, action=reject => status=inside\n  - airport_warning_zone: start=(6500.0,0.0), end=(1900.0,0.0), min_distance=1900.66m, threshold=5000.0m, action=warn => status=inside\nGeofence decision rule: if ANY geofence status == inside and action=reject, decision MUST be REJECT. If status==inside and action=warn (obstacle avoidance), decision MUST be APPROVE_WITH_WARNING. If ALL geofences are outside, decision is APPROVE unless other constraints are violated. Do NOT answer UNCERTAIN when geofence_eval is present.\nPath crossing rule: if ANY path_eval status == inside and action=reject, decision MUST be REJECT. If status==inside and action=warn (obstacle avoidance), decision MUST be APPROVE_WITH_WARNING. Do NOT answer UNCERTAIN when path_eval is present.\nGeofence recommendation: REJECT. If geofence_recommendation is REJECT -> final decision MUST be REJECT. If geofence_recommendation is APPROVE_WITH_WARNING -> final decision MUST be APPROVE_WITH_WARNING unless other hard violations exist.\nPath recommendation: REJECT. If path_recommendation is REJECT -> final decision MUST be REJECT. If path_recommendation is APPROVE_WITH_WARNING -> final decision MUST be APPROVE_WITH_WARNING unless a geofence inside or auto_check violation exists.\nMission: {\"target_xyz\": {\"x\": 1900.0, \"y\": 0.0, \"z\": 50.0}, \"altitude_m\": 50.0, \"path_eval\": [{\"id\": \"airport_core_zone\", \"start_x\": 6500.0, \"start_y\": 0.0, \"end_x\": 1900.0, \"end_y\": 0.0, \"min_distance\": 1900.66, \"threshold\": 500.0, \"status\": \"outside\", \"action\": \"reject\"}, {\"id\": \"airport_restricted_zone\", \"start_x\": 6500.0, \"start_y\": 0.0, \"end_x\": 1900.0, \"end_y\": 0.0, \"min_distance\": 1900.66, \"threshold\": 2000.0, \"status\": \"inside\", \"action\": \"reject\"}, {\"id\": \"airport_warning_zone\", \"start_x\": 6500.0, \"start_y\": 0.0, \"end_x\": 1900.0, \"end_y\": 0.0, \"min_distance\": 1900.66, \"threshold\": 5000.0, \"status\": \"inside\", \"action\": \"warn\"}], \"path_recommendation\": \"REJECT\", \"geofence_eval\": [{\"id\": \"airport_core_zone\", \"cx\": 0.0, \"cy\": 0.0, \"cz\": 0.0, \"radius\": 500.0, \"margin\": 0.0, \"distance\": 1900.66, \"threshold\": 500.0, \"status\": \"outside\", \"action\": \"reject\"}, {\"id\": \"airport_restricted_zone\", \"cx\": 0.0, \"cy\": 0.0, \"cz\": 0.0, \"radius\": 2000.0, \"margin\": 0.0, \"distance\": 1900.66, \"threshold\": 2000.0, \"status\": \"inside\", \"action\": \"reject\"}, {\"id\": \"airport_warning_zone\", \"cx\": 0.0, \"cy\": 0.0, \"cz\": 0.0, \"radius\": 5000.0, \"margin\": 0.0, \"distance\": 1900.66, \"threshold\": 5000.0, \"status\": \"inside\", \"action\": \"warn\"}], \"geofence_recommendation\": \"REJECT\"}\nDecide and cite which constraints are satisfied/violated. Respond with JSON:\n{ \"decision\": \"APPROVE|REJECT|CONDITIONAL|UNCERTAIN\", \"reasons\": [...], \"citations\": [...] }",
      "llm_raw": "```json\n{\n  \"decision\": \"REJECT\",\n  \"reasons\": [\n    \"The mission's current geofence evaluation shows that it is inside the 'airport_restricted_zone' (status: inside, action: reject), which mandates a REJECT decision.\",\n    \"The mission's planned path evaluation shows that it crosses through the 'airport_restricted_zone' (status: inside, action: reject), which mandates a REJECT decision.\",\n    \"The pre-computed geofence recommendation for this mission is REJECT.\",\n    \"The pre-computed path recommendation for this mission is REJECT.\"\n  ],\n  \"citations\": [\n    \"Geofence decision rule: if ANY geofence status == inside and action=reject, decision MUST be REJECT. (Violated by 'airport_restricted_zone' in geofence_eval)\",\n    \"Path crossing rule: if ANY path_eval status == inside and action=reject, decision MUST be REJECT. (Violated by 'airport_restricted_zone' in path_eval)\",\n    \"Geofence recommendation: If geofence_recommendation is REJECT -> final decision MUST be REJECT.\",\n    \"Path recommendation: If path_recommendation is REJECT -> final decision MUST be REJECT.\"\n  ]\n}\n```",
      "llm_parsed": {
        "decision": "REJECT",
        "reasons": [
          "The mission's current geofence evaluation shows that it is inside the 'airport_restricted_zone' (status: inside, action: reject), which mandates a REJECT decision.",
          "The mission's planned path evaluation shows that it crosses through the 'airport_restricted_zone' (status: inside, action: reject), which mandates a REJECT decision.",
          "The pre-computed geofence recommendation for this mission is REJECT.",
          "The pre-computed path recommendation for this mission is REJECT."
        ],
        "citations": [
          "Geofence decision rule: if ANY geofence status == inside and action=reject, decision MUST be REJECT. (Violated by 'airport_restricted_zone' in geofence_eval)",
          "Path crossing rule: if ANY path_eval status == inside and action=reject, decision MUST be REJECT. (Violated by 'airport_restricted_zone' in path_eval)",
          "Geofence recommendation: If geofence_recommendation is REJECT -> final decision MUST be REJECT.",
          "Path recommendation: If path_recommendation is REJECT -> final decision MUST be REJECT."
        ]
      },
      "retrieved_constraints": []
    },
    {
      "test_case_id": "TC3",
      "description": null,
      "expected_decision": "APPROVE_WITH_WARNING",
      "llm_decision": "APPROVE_WITH_WARNING",
      "mission": {
        "target_xyz": {
          "x": 3500.0,
          "y": 0.0,
          "z": 50.0
        },
        "altitude_m": 50.0,
        "path_eval": [
          {
            "id": "airport_core_zone",
            "start_x": 6500.0,
            "start_y": 0.0,
            "end_x": 3500.0,
            "end_y": 0.0,
            "min_distance": 3500.36,
            "threshold": 500.0,
            "status": "outside",
            "action": "reject"
          },
          {
            "id": "airport_restricted_zone",
            "start_x": 6500.0,
            "start_y": 0.0,
            "end_x": 3500.0,
            "end_y": 0.0,
            "min_distance": 3500.36,
            "threshold": 2000.0,
            "status": "outside",
            "action": "reject"
          },
          {
            "id": "airport_warning_zone",
            "start_x": 6500.0,
            "start_y": 0.0,
            "end_x": 3500.0,
            "end_y": 0.0,
            "min_distance": 3500.36,
            "threshold": 5000.0,
            "status": "inside",
            "action": "warn"
          }
        ],
        "path_recommendation": "APPROVE_WITH_WARNING",
        "geofence_eval": [
          {
            "id": "airport_core_zone",
            "cx": 0.0,
            "cy": 0.0,
            "cz": 0.0,
            "radius": 500.0,
            "margin": 0.0,
            "distance": 3500.36,
            "threshold": 500.0,
            "status": "outside",
            "action": "reject"
          },
          {
            "id": "airport_restricted_zone",
            "cx": 0.0,
            "cy": 0.0,
            "cz": 0.0,
            "radius": 2000.0,
            "margin": 0.0,
            "distance": 3500.36,
            "threshold": 2000.0,
            "status": "outside",
            "action": "reject"
          },
          {
            "id": "airport_warning_zone",
            "cx": 0.0,
            "cy": 0.0,
            "cz": 0.0,
            "radius": 5000.0,
            "margin": 0.0,
            "distance": 3500.36,
            "threshold": 5000.0,
            "status": "inside",
            "action": "warn"
          }
        ],
        "geofence_recommendation": "APPROVE_WITH_WARNING"
      },
      "prompt": "You are a dispatch AI. Decide APPROVE or REJECT with cited constraints.\nRetrieved constraints:\nGeofence checks (pre-computed, use these values directly):\n  - airport_core_zone: center=(0.0,0.0,0.0), radius=500.0m, margin=0.0m, distance=3500.36m (3D), threshold=500.0m, action=reject => status=outside\n  - airport_restricted_zone: center=(0.0,0.0,0.0), radius=2000.0m, margin=0.0m, distance=3500.36m (3D), threshold=2000.0m, action=reject => status=outside\n  - airport_warning_zone: center=(0.0,0.0,0.0), radius=5000.0m, margin=0.0m, distance=3500.36m (3D), threshold=5000.0m, action=warn => status=inside\nPath crossing checks (pre-computed, use these values directly):\n  - airport_core_zone: start=(6500.0,0.0), end=(3500.0,0.0), min_distance=3500.36m, threshold=500.0m, action=reject => status=outside\n  - airport_restricted_zone: start=(6500.0,0.0), end=(3500.0,0.0), min_distance=3500.36m, threshold=2000.0m, action=reject => status=outside\n  - airport_warning_zone: start=(6500.0,0.0), end=(3500.0,0.0), min_distance=3500.36m, threshold=5000.0m, action=warn => status=inside\nGeofence decision rule: if ANY geofence status == inside and action=reject, decision MUST be REJECT. If status==inside and action=warn (obstacle avoidance), decision MUST be APPROVE_WITH_WARNING. If ALL geofences are outside, decision is APPROVE unless other constraints are violated. Do NOT answer UNCERTAIN when geofence_eval is present.\nPath crossing rule: if ANY path_eval status == inside and action=reject, decision MUST be REJECT. If status==inside and action=warn (obstacle avoidance), decision MUST be APPROVE_WITH_WARNING. Do NOT answer UNCERTAIN when path_eval is present.\nGeofence recommendation: APPROVE_WITH_WARNING. If geofence_recommendation is REJECT -> final decision MUST be REJECT. If geofence_recommendation is APPROVE_WITH_WARNING -> final decision MUST be APPROVE_WITH_WARNING unless other hard violations exist.\nPath recommendation: APPROVE_WITH_WARNING. If path_recommendation is REJECT -> final decision MUST be REJECT. If path_recommendation is APPROVE_WITH_WARNING -> final decision MUST be APPROVE_WITH_WARNING unless a geofence inside or auto_check violation exists.\nMission: {\"target_xyz\": {\"x\": 3500.0, \"y\": 0.0, \"z\": 50.0}, \"altitude_m\": 50.0, \"path_eval\": [{\"id\": \"airport_core_zone\", \"start_x\": 6500.0, \"start_y\": 0.0, \"end_x\": 3500.0, \"end_y\": 0.0, \"min_distance\": 3500.36, \"threshold\": 500.0, \"status\": \"outside\", \"action\": \"reject\"}, {\"id\": \"airport_restricted_zone\", \"start_x\": 6500.0, \"start_y\": 0.0, \"end_x\": 3500.0, \"end_y\": 0.0, \"min_distance\": 3500.36, \"threshold\": 2000.0, \"status\": \"outside\", \"action\": \"reject\"}, {\"id\": \"airport_warning_zone\", \"start_x\": 6500.0, \"start_y\": 0.0, \"end_x\": 3500.0, \"end_y\": 0.0, \"min_distance\": 3500.36, \"threshold\": 5000.0, \"status\": \"inside\", \"action\": \"warn\"}], \"path_recommendation\": \"APPROVE_WITH_WARNING\", \"geofence_eval\": [{\"id\": \"airport_core_zone\", \"cx\": 0.0, \"cy\": 0.0, \"cz\": 0.0, \"radius\": 500.0, \"margin\": 0.0, \"distance\": 3500.36, \"threshold\": 500.0, \"status\": \"outside\", \"action\": \"reject\"}, {\"id\": \"airport_restricted_zone\", \"cx\": 0.0, \"cy\": 0.0, \"cz\": 0.0, \"radius\": 2000.0, \"margin\": 0.0, \"distance\": 3500.36, \"threshold\": 2000.0, \"status\": \"outside\", \"action\": \"reject\"}, {\"id\": \"airport_warning_zone\", \"cx\": 0.0, \"cy\": 0.0, \"cz\": 0.0, \"radius\": 5000.0, \"margin\": 0.0, \"distance\": 3500.36, \"threshold\": 5000.0, \"status\": \"inside\", \"action\": \"warn\"}], \"geofence_recommendation\": \"APPROVE_WITH_WARNING\"}\nDecide and cite which constraints are satisfied/violated. Respond with JSON:\n{ \"decision\": \"APPROVE|REJECT|CONDITIONAL|UNCERTAIN\", \"reasons\": [...], \"citations\": [...] }",
      "llm_raw": "```json\n{\n  \"decision\": \"CONDITIONAL\",\n  \"reasons\": [\n    \"The mission path and geofence evaluations indicate the operation will enter the 'airport_warning_zone' (status=inside, action=warn).\",\n    \"No critical geofence or path crossing zones requiring immediate rejection were violated (i.e., no 'status=inside' with 'action=reject').\",\n    \"Both geofence and path recommendations are 'APPROVE_WITH_WARNING', aligning with the 'warn' actions triggered by entering the warning zone.\"\n  ],\n  \"citations\": [\n    \"Geofence checks: airport_warning_zone - status=inside, action=warn. (If status==inside and action=warn (obstacle avoidance), decision MUST be APPROVE_WITH_WARNING.)\",\n    \"Path crossing checks: airport_warning_zone - status=inside, action=warn. (If status==inside and action=warn (obstacle avoidance), decision MUST be APPROVE_WITH_WARNING.)\",\n    \"Geofence recommendation: APPROVE_WITH_WARNING. (If geofence_recommendation is APPROVE_WITH_WARNING -> final decision MUST be APPROVE_WITH_WARNING unless other hard violations exist.)\",\n    \"Path recommendation: APPROVE_WITH_WARNING. (If path_recommendation is APPROVE_WITH_WARNING -> final decision MUST be APPROVE_WITH_WARNING unless a geofence inside or auto_check violation exists.)\"\n  ]\n}\n```",
      "llm_parsed": {
        "decision": "APPROVE_WITH_WARNING",
        "reasons": [
          "The mission path and geofence evaluations indicate the operation will enter the 'airport_warning_zone' (status=inside, action=warn).",
          "No critical geofence or path crossing zones requiring immediate rejection were violated (i.e., no 'status=inside' with 'action=reject').",
          "Both geofence and path recommendations are 'APPROVE_WITH_WARNING', aligning with the 'warn' actions triggered by entering the warning zone."
        ],
        "citations": [
          "Geofence checks: airport_warning_zone - status=inside, action=warn. (If status==inside and action=warn (obstacle avoidance), decision MUST be APPROVE_WITH_WARNING.)",
          "Path crossing checks: airport_warning_zone - status=inside, action=warn. (If status==inside and action=warn (obstacle avoidance), decision MUST be APPROVE_WITH_WARNING.)",
          "Geofence recommendation: APPROVE_WITH_WARNING. (If geofence_recommendation is APPROVE_WITH_WARNING -> final decision MUST be APPROVE_WITH_WARNING unless other hard violations exist.)",
          "Path recommendation: APPROVE_WITH_WARNING. (If path_recommendation is APPROVE_WITH_WARNING -> final decision MUST be APPROVE_WITH_WARNING unless a geofence inside or auto_check violation exists.)"
        ]
      },
      "retrieved_constraints": []
    },
    {
      "test_case_id": "TC4",
      "description": null,
      "expected_decision": "APPROVE",
      "llm_decision": "APPROVE",
      "mission": {
        "target_xyz": {
          "x": 5500.0,
          "y": 0.0,
          "z": 50.0
        },
        "altitude_m": 50.0,
        "path_eval": [
          {
            "id": "airport_core_zone",
            "start_x": 6500.0,
            "start_y": 0.0,
            "end_x": 5500.0,
            "end_y": 0.0,
            "min_distance": 5500.23,
            "threshold": 500.0,
            "status": "outside",
            "action": "reject"
          },
          {
            "id": "airport_restricted_zone",
            "start_x": 6500.0,
            "start_y": 0.0,
            "end_x": 5500.0,
            "end_y": 0.0,
            "min_distance": 5500.23,
            "threshold": 2000.0,
            "status": "outside",
            "action": "reject"
          },
          {
            "id": "airport_warning_zone",
            "start_x": 6500.0,
            "start_y": 0.0,
            "end_x": 5500.0,
            "end_y": 0.0,
            "min_distance": 5500.23,
            "threshold": 5000.0,
            "status": "outside",
            "action": "warn"
          }
        ],
        "geofence_eval": [
          {
            "id": "airport_core_zone",
            "cx": 0.0,
            "cy": 0.0,
            "cz": 0.0,
            "radius": 500.0,
            "margin": 0.0,
            "distance": 5500.23,
            "threshold": 500.0,
            "status": "outside",
            "action": "reject"
          },
          {
            "id": "airport_restricted_zone",
            "cx": 0.0,
            "cy": 0.0,
            "cz": 0.0,
            "radius": 2000.0,
            "margin": 0.0,
            "distance": 5500.23,
            "threshold": 2000.0,
            "status": "outside",
            "action": "reject"
          },
          {
            "id": "airport_warning_zone",
            "cx": 0.0,
            "cy": 0.0,
            "cz": 0.0,
            "radius": 5000.0,
            "margin": 0.0,
            "distance": 5500.23,
            "threshold": 5000.0,
            "status": "outside",
            "action": "warn"
          }
        ],
        "geofence_recommendation": "APPROVE"
      },
      "prompt": "You are a dispatch AI. Decide APPROVE or REJECT with cited constraints.\nRetrieved constraints:\nGeofence checks (pre-computed, use these values directly):\n  - airport_core_zone: center=(0.0,0.0,0.0), radius=500.0m, margin=0.0m, distance=5500.23m (3D), threshold=500.0m, action=reject => status=outside\n  - airport_restricted_zone: center=(0.0,0.0,0.0), radius=2000.0m, margin=0.0m, distance=5500.23m (3D), threshold=2000.0m, action=reject => status=outside\n  - airport_warning_zone: center=(0.0,0.0,0.0), radius=5000.0m, margin=0.0m, distance=5500.23m (3D), threshold=5000.0m, action=warn => status=outside\nPath crossing checks (pre-computed, use these values directly):\n  - airport_core_zone: start=(6500.0,0.0), end=(5500.0,0.0), min_distance=5500.23m, threshold=500.0m, action=reject => status=outside\n  - airport_restricted_zone: start=(6500.0,0.0), end=(5500.0,0.0), min_distance=5500.23m, threshold=2000.0m, action=reject => status=outside\n  - airport_warning_zone: start=(6500.0,0.0), end=(5500.0,0.0), min_distance=5500.23m, threshold=5000.0m, action=warn => status=outside\nGeofence decision rule: if ANY geofence status == inside and action=reject, decision MUST be REJECT. If status==inside and action=warn (obstacle avoidance), decision MUST be APPROVE_WITH_WARNING. If ALL geofences are outside, decision is APPROVE unless other constraints are violated. Do NOT answer UNCERTAIN when geofence_eval is present.\nPath crossing rule: if ANY path_eval status == inside and action=reject, decision MUST be REJECT. If status==inside and action=warn (obstacle avoidance), decision MUST be APPROVE_WITH_WARNING. Do NOT answer UNCERTAIN when path_eval is present.\nGeofence recommendation: APPROVE. If geofence_recommendation is REJECT -> final decision MUST be REJECT. If geofence_recommendation is APPROVE_WITH_WARNING -> final decision MUST be APPROVE_WITH_WARNING unless other hard violations exist.\nMission: {\"target_xyz\": {\"x\": 5500.0, \"y\": 0.0, \"z\": 50.0}, \"altitude_m\": 50.0, \"path_eval\": [{\"id\": \"airport_core_zone\", \"start_x\": 6500.0, \"start_y\": 0.0, \"end_x\": 5500.0, \"end_y\": 0.0, \"min_distance\": 5500.23, \"threshold\": 500.0, \"status\": \"outside\", \"action\": \"reject\"}, {\"id\": \"airport_restricted_zone\", \"start_x\": 6500.0, \"start_y\": 0.0, \"end_x\": 5500.0, \"end_y\": 0.0, \"min_distance\": 5500.23, \"threshold\": 2000.0, \"status\": \"outside\", \"action\": \"reject\"}, {\"id\": \"airport_warning_zone\", \"start_x\": 6500.0, \"start_y\": 0.0, \"end_x\": 5500.0, \"end_y\": 0.0, \"min_distance\": 5500.23, \"threshold\": 5000.0, \"status\": \"outside\", \"action\": \"warn\"}], \"geofence_eval\": [{\"id\": \"airport_core_zone\", \"cx\": 0.0, \"cy\": 0.0, \"cz\": 0.0, \"radius\": 500.0, \"margin\": 0.0, \"distance\": 5500.23, \"threshold\": 500.0, \"status\": \"outside\", \"action\": \"reject\"}, {\"id\": \"airport_restricted_zone\", \"cx\": 0.0, \"cy\": 0.0, \"cz\": 0.0, \"radius\": 2000.0, \"margin\": 0.0, \"distance\": 5500.23, \"threshold\": 2000.0, \"status\": \"outside\", \"action\": \"reject\"}, {\"id\": \"airport_warning_zone\", \"cx\": 0.0, \"cy\": 0.0, \"cz\": 0.0, \"radius\": 5000.0, \"margin\": 0.0, \"distance\": 5500.23, \"threshold\": 5000.0, \"status\": \"outside\", \"action\": \"warn\"}], \"geofence_recommendation\": \"APPROVE\"}\nDecide and cite which constraints are satisfied/violated. Respond with JSON:\n{ \"decision\": \"APPROVE|REJECT|CONDITIONAL|UNCERTAIN\", \"reasons\": [...], \"citations\": [...] }",
      "llm_raw": "```json\n{\n  \"decision\": \"APPROVE\",\n  \"reasons\": [\n    \"All geofence checks indicate 'outside' status, with no 'inside' status for 'reject' or 'warn' actions.\",\n    \"All path crossing checks indicate 'outside' status, with no 'inside' status for 'reject' or 'warn' actions.\",\n    \"The geofence recommendation is 'APPROVE', aligning with the lack of violations.\"\n  ],\n  \"citations\": [\n    \"Geofence checks (pre-computed): airport_core_zone (status=outside), airport_restricted_zone (status=outside), airport_warning_zone (status=outside).\",\n    \"Geofence decision rule: 'If ALL geofences are outside, decision is APPROVE unless other constraints are violated.'\",\n    \"Path crossing checks (pre-computed): airport_core_zone (status=outside), airport_restricted_zone (status=outside), airport_warning_zone (status=outside).\",\n    \"Path crossing rule: 'if ANY path_eval status == inside and action=reject, decision MUST be REJECT.' (Not met). 'If status==inside and action=warn (obstacle avoidance), decision MUST be APPROVE_WITH_WARNING.' (Not met).\",\n    \"Mission: geofence_recommendation: APPROVE.\"\n  ]\n}\n```",
      "llm_parsed": {
        "decision": "APPROVE",
        "reasons": [
          "All geofence checks indicate 'outside' status, with no 'inside' status for 'reject' or 'warn' actions.",
          "All path crossing checks indicate 'outside' status, with no 'inside' status for 'reject' or 'warn' actions.",
          "The geofence recommendation is 'APPROVE', aligning with the lack of violations."
        ],
        "citations": [
          "Geofence checks (pre-computed): airport_core_zone (status=outside), airport_restricted_zone (status=outside), airport_warning_zone (status=outside).",
          "Geofence decision rule: 'If ALL geofences are outside, decision is APPROVE unless other constraints are violated.'",
          "Path crossing checks (pre-computed): airport_core_zone (status=outside), airport_restricted_zone (status=outside), airport_warning_zone (status=outside).",
          "Path crossing rule: 'if ANY path_eval status == inside and action=reject, decision MUST be REJECT.' (Not met). 'If status==inside and action=warn (obstacle avoidance), decision MUST be APPROVE_WITH_WARNING.' (Not met).",
          "Mission: geofence_recommendation: APPROVE."
        ]
      },
      "retrieved_constraints": []
    }
  ]
}