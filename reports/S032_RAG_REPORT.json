{
  "scenario": "S032",
  "summary": {
    "total_test_cases": 10,
    "llm_calls": 10,
    "llm_accuracy": "10/10",
    "llm_accuracy_percent": "100.0%"
  },
  "results": [
    {
      "test_case_id": "TC01_BorderlineSchoolDistance",
      "description": "Operator wants to pass 300 m from a primary school during class hours.",
      "expected_decision": "APPROVE",
      "llm_decision": "APPROVE",
      "prompt": "# Pragmatic Ambiguity & Regulatory Intent Brief\n\nScenario: S032_PragmaticAmbiguity\nTest Case: TC01_BorderlineSchoolDistance — Is 300 m still 'near'?\nDescription: Operator wants to pass 300 m from a primary school during class hours.\n\n## Pragmatic Axes\n(No pragmatic axes provided)\n\n## Policy Snippets & Intent\n- (No policy snippets provided)\n\n## Ambiguity Playbook\n- (No playbook hints)\n\n## Facts Provided\n- (No explicit facts provided)\n\n## Pragmatic Tags\n- (No pragmatic tags)\n\n## Reference Notes / Known Mitigations\n- Approve with reminder to monitor local notices; applicant already exceeds pragmatic threshold.\n\n---\n\n## Output Contract\nReturn **valid JSON** with these keys:\n1. `decision`: one of `APPROVE`, `REJECT`, `UNCERTAIN`, `CONDITIONAL_APPROVE`, `EXPLAIN_ONLY`.\n2. `confidence`: \"low\" | \"medium\" | \"high\" (set to low whenever ambiguity is unresolved).\n3. `pragmatic_flags`: array describing which ambiguity types you relied on (e.g., \"scalar implicature\", \"sarcasm\").\n4. `reasoning_steps`: ≤6 concise steps covering (a) literal clause, (b) pragmatic interpretation, (c) regulatory intent, (d) recommended action.\n5. `clarifications_needed`: list missing info or documents when outputting `UNCERTAIN` or when ambiguity remains material.\n6. `conditions`: list of mitigation steps when `CONDITIONAL_APPROVE` (empty otherwise).\n7. `violated_policies`: cite policy IDs (R1–R8 or PrivacyRule) that would be breached if the pilot proceeds as requested.\n8. `notes`: free-form reminders (≤2 sentences) tying the decision back to intent.\n\n### Example\n```json\n{\n  \"decision\": \"UNCERTAIN\",\n  \"confidence\": \"low\",\n  \"pragmatic_flags\": [\"scalar implicature\", \"deixis\"],\n  \"reasoning_steps\": [\n    \"Step1 Literal: Memo bans flights 'near' schools but no legal number provided.\",\n    \"Step2 Pragmatic: Informal 200 m threshold exists yet regulators extend buffers after complaints.\",\n    \"Step3 Risk: 300 m may still count as 'near' if complaints escalate.\",\n    \"Step4 Action: Hold flight and request written clarification/threshold.\"],\n  \"clarifications_needed\": [\"Obtain official distance definition from operations bulletin\"],\n  \"conditions\": [],\n  \"violated_policies\": [],\n  \"notes\": \"Treat undefined scalar term cautiously; do not infer clearance without regulator input.\"\n}\n```\n\nRules:\n- Never invent numeric thresholds or exemptions that the memo does not cover.\n- Sarcasm/indirect speech must be interpreted pragmatically; sarcasm never equals consent.\n- If you infer regulatory intent (e.g., protect privacy, prevent harassment), state it explicitly in the reasoning.\n- Keep total reasoning ≤6 bullet steps to avoid timeouts.\n\n\n# Retrieved Evidence\n\n\nProvided facts:\n- Flight path maintains ≥ 300 m standoff\n- Noise below 55 dB\n- Municipal memo defines 'near' schools as ≤ 200 m\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC01_BorderlineSchoolDistance expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC02_SafetyMarginDebate expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC03_NecessaryLowAltitude expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC05_DaylightIntent expected decision: REJECT\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC09_WildlifeImpact expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC10_CommercialIntent expected decision: REJECT\nDecision rule: Pragmatic ambiguity—treat vague terms (near, appropriate, necessary, reasonable hours, frequent) by intent and provided thresholds; avoid inventing numbers. If language is ambiguous or evidence missing, prefer UNCERTAIN/EXPLAIN_ONLY. CONDITIONAL_APPROVE must include concrete mitigations (reroute/delay to reasonable hours). Reject loopholes (commercial intent hidden, sarcasm ≠ consent, daylight vs clock defined by context).\nRelevant decision rules (retrieved):\n- Pragmatic ambiguity: Treat vague terms (near, appropriate, necessary, reasonable hours, frequent) by intent and provided thresholds; avoid inventing numbers. If language is ambiguous or evidence missing, prefer UNCERTAIN/EXPLAIN_ONLY. CONDITIONAL_APPROVE must include concrete mitigations (reroute/delay to reasonable hours). Reject loopholes (commercial intent hidden, sarcasm ≠ consent, daylight vs clock defined by context).\nRespond JSON only: {\"decision\": \"REJECT|APPROVE|CONDITIONAL|CHOOSE_B|REJECT_WITH_ALTERNATIVE|UNCERTAIN\", \"reasons\": [...], \"citations\": [...], \"evidence_used\": [...]}. Cite option/waiver/priority fields when relevant.",
      "llm_raw": "```json\n{\n  \"decision\": \"APPROVE\",\n  \"confidence\": \"high\",\n  \"pragmatic_flags\": [\"lexical disambiguation\"],\n  \"reasoning_steps\": [\n    \"Step 1 Literal: Policy refers to operations 'near' schools during class hours.\",\n    \"Step 2 Pragmatic Interpretation: Retrieved evidence provides a municipal memo explicitly defining 'near' schools as a standoff distance of ≤ 200 m.\",\n    \"Step 3 Compliance Check: The operator proposes a 300 m standoff, which exceeds the 200 m threshold for being considered 'near'.\",\n    \"Step 4 Regulatory Intent: The intent of defining 'near' is to establish a clear, quantifiable restricted zone around schools to ensure safety and minimize disruption.\",\n    \"Step 5 Conclusion: The proposed 300 m operation falls outside the explicitly defined restricted zone.\",\n    \"Step 6 Recommended Action: Approve the operation as it complies with the defined distance requirement.\"\n  ],\n  \"clarifications_needed\": [],\n  \"conditions\": [],\n  \"violated_policies\": [],\n  \"notes\": \"The explicit municipal definition for 'near' resolves the potential ambiguity, confirming the operator's proposed distance is compliant and exceeds the pragmatic threshold.\"\n}\n```",
      "llm_parsed": {
        "decision": "APPROVE",
        "confidence": "high",
        "pragmatic_flags": [
          "lexical disambiguation"
        ],
        "reasoning_steps": [
          "Step 1 Literal: Policy refers to operations 'near' schools during class hours.",
          "Step 2 Pragmatic Interpretation: Retrieved evidence provides a municipal memo explicitly defining 'near' schools as a standoff distance of ≤ 200 m.",
          "Step 3 Compliance Check: The operator proposes a 300 m standoff, which exceeds the 200 m threshold for being considered 'near'.",
          "Step 4 Regulatory Intent: The intent of defining 'near' is to establish a clear, quantifiable restricted zone around schools to ensure safety and minimize disruption.",
          "Step 5 Conclusion: The proposed 300 m operation falls outside the explicitly defined restricted zone.",
          "Step 6 Recommended Action: Approve the operation as it complies with the defined distance requirement."
        ],
        "clarifications_needed": [],
        "conditions": [],
        "violated_policies": [],
        "notes": "The explicit municipal definition for 'near' resolves the potential ambiguity, confirming the operator's proposed distance is compliant and exceeds the pragmatic threshold."
      },
      "mission": {},
      "retrieved_constraints": [
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC01_BorderlineSchoolDistance_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC01_BorderlineSchoolDistance expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC02_SafetyMarginDebate_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC02_SafetyMarginDebate expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC03_NecessaryLowAltitude_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC03_NecessaryLowAltitude expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC04_NoiseNecessity_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC05_DaylightIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC05_DaylightIntent expected decision: REJECT"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC06_LowAltitudeFiling_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC07_FrequencyVague_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC08_ReasonableHours_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC09_WildlifeImpact_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC09_WildlifeImpact expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC10_CommercialIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC10_CommercialIntent expected decision: REJECT"
        }
      ]
    },
    {
      "test_case_id": "TC02_SafetyMarginDebate",
      "description": "Mission needs 35% battery; UAV has 40% before launch.",
      "expected_decision": "APPROVE",
      "llm_decision": "APPROVE",
      "prompt": "# Pragmatic Ambiguity & Regulatory Intent Brief\n\nScenario: S032_PragmaticAmbiguity\nTest Case: TC02_SafetyMarginDebate — Is 5% battery surplus 'appropriate'?\nDescription: Mission needs 35% battery; UAV has 40% before launch.\n\n## Pragmatic Axes\n(No pragmatic axes provided)\n\n## Policy Snippets & Intent\n- (No policy snippets provided)\n\n## Ambiguity Playbook\n- (No playbook hints)\n\n## Facts Provided\n- (No explicit facts provided)\n\n## Pragmatic Tags\n- (No pragmatic tags)\n\n## Reference Notes / Known Mitigations\n- Explain that 14% relative reserve fits 'appropriate' per EC-42.\n\n---\n\n## Output Contract\nReturn **valid JSON** with these keys:\n1. `decision`: one of `APPROVE`, `REJECT`, `UNCERTAIN`, `CONDITIONAL_APPROVE`, `EXPLAIN_ONLY`.\n2. `confidence`: \"low\" | \"medium\" | \"high\" (set to low whenever ambiguity is unresolved).\n3. `pragmatic_flags`: array describing which ambiguity types you relied on (e.g., \"scalar implicature\", \"sarcasm\").\n4. `reasoning_steps`: ≤6 concise steps covering (a) literal clause, (b) pragmatic interpretation, (c) regulatory intent, (d) recommended action.\n5. `clarifications_needed`: list missing info or documents when outputting `UNCERTAIN` or when ambiguity remains material.\n6. `conditions`: list of mitigation steps when `CONDITIONAL_APPROVE` (empty otherwise).\n7. `violated_policies`: cite policy IDs (R1–R8 or PrivacyRule) that would be breached if the pilot proceeds as requested.\n8. `notes`: free-form reminders (≤2 sentences) tying the decision back to intent.\n\n### Example\n```json\n{\n  \"decision\": \"UNCERTAIN\",\n  \"confidence\": \"low\",\n  \"pragmatic_flags\": [\"scalar implicature\", \"deixis\"],\n  \"reasoning_steps\": [\n    \"Step1 Literal: Memo bans flights 'near' schools but no legal number provided.\",\n    \"Step2 Pragmatic: Informal 200 m threshold exists yet regulators extend buffers after complaints.\",\n    \"Step3 Risk: 300 m may still count as 'near' if complaints escalate.\",\n    \"Step4 Action: Hold flight and request written clarification/threshold.\"],\n  \"clarifications_needed\": [\"Obtain official distance definition from operations bulletin\"],\n  \"conditions\": [],\n  \"violated_policies\": [],\n  \"notes\": \"Treat undefined scalar term cautiously; do not infer clearance without regulator input.\"\n}\n```\n\nRules:\n- Never invent numeric thresholds or exemptions that the memo does not cover.\n- Sarcasm/indirect speech must be interpreted pragmatically; sarcasm never equals consent.\n- If you infer regulatory intent (e.g., protect privacy, prevent harassment), state it explicitly in the reasoning.\n- Keep total reasoning ≤6 bullet steps to avoid timeouts.\n\n\n# Retrieved Evidence\n\n\nProvided facts:\n- Engineering Circular EC-42 recommends 10–20% reserve of required energy.\n- 5% absolute reserve = ~14% of required energy (35%).\n- Weather stable, no contingency hops.\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC01_BorderlineSchoolDistance expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC02_SafetyMarginDebate expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC03_NecessaryLowAltitude expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC05_DaylightIntent expected decision: REJECT\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC09_WildlifeImpact expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC10_CommercialIntent expected decision: REJECT\nDecision rule: Pragmatic ambiguity—treat vague terms (near, appropriate, necessary, reasonable hours, frequent) by intent and provided thresholds; avoid inventing numbers. If language is ambiguous or evidence missing, prefer UNCERTAIN/EXPLAIN_ONLY. CONDITIONAL_APPROVE must include concrete mitigations (reroute/delay to reasonable hours). Reject loopholes (commercial intent hidden, sarcasm ≠ consent, daylight vs clock defined by context).\nRelevant decision rules (retrieved):\n- Pragmatic ambiguity: Treat vague terms (near, appropriate, necessary, reasonable hours, frequent) by intent and provided thresholds; avoid inventing numbers. If language is ambiguous or evidence missing, prefer UNCERTAIN/EXPLAIN_ONLY. CONDITIONAL_APPROVE must include concrete mitigations (reroute/delay to reasonable hours). Reject loopholes (commercial intent hidden, sarcasm ≠ consent, daylight vs clock defined by context).\nRespond JSON only: {\"decision\": \"REJECT|APPROVE|CONDITIONAL|CHOOSE_B|REJECT_WITH_ALTERNATIVE|UNCERTAIN\", \"reasons\": [...], \"citations\": [...], \"evidence_used\": [...]}. Cite option/waiver/priority fields when relevant.",
      "llm_raw": "```json\n{\n  \"decision\": \"APPROVE\",\n  \"confidence\": \"high\",\n  \"pragmatic_flags\": [\"vagueness\"],\n  \"reasoning_steps\": [\n    \"Step1 Literal: Mission requires 35% battery; UAV has 40% before launch, an absolute surplus of 5%.\",\n    \"Step2 Pragmatic: The term 'appropriate' for battery surplus is clarified by Engineering Circular EC-42, which recommends a 10-20% reserve of required energy.\",\n    \"Step3 Calculation: The 5% absolute surplus, relative to the 35% required, is (5 / 35) * 100% = ~14.28% reserve.\",\n    \"Step4 Comparison: This ~14% relative reserve falls within the 10-20% range recommended by EC-42.\",\n    \"Step5 Action: The battery surplus meets the regulatory guidance for 'appropriate' reserve, therefore the mission can proceed.\"\n  ],\n  \"clarifications_needed\": [],\n  \"conditions\": [],\n  \"violated_policies\": [],\n  \"notes\": \"The pragmatic interpretation of 'appropriate' is based on the specific relative reserve guidance from EC-42, ensuring a sufficient safety margin for the mission.\"\n}\n```",
      "llm_parsed": {
        "decision": "APPROVE",
        "confidence": "high",
        "pragmatic_flags": [
          "vagueness"
        ],
        "reasoning_steps": [
          "Step1 Literal: Mission requires 35% battery; UAV has 40% before launch, an absolute surplus of 5%.",
          "Step2 Pragmatic: The term 'appropriate' for battery surplus is clarified by Engineering Circular EC-42, which recommends a 10-20% reserve of required energy.",
          "Step3 Calculation: The 5% absolute surplus, relative to the 35% required, is (5 / 35) * 100% = ~14.28% reserve.",
          "Step4 Comparison: This ~14% relative reserve falls within the 10-20% range recommended by EC-42.",
          "Step5 Action: The battery surplus meets the regulatory guidance for 'appropriate' reserve, therefore the mission can proceed."
        ],
        "clarifications_needed": [],
        "conditions": [],
        "violated_policies": [],
        "notes": "The pragmatic interpretation of 'appropriate' is based on the specific relative reserve guidance from EC-42, ensuring a sufficient safety margin for the mission."
      },
      "mission": {},
      "retrieved_constraints": [
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC01_BorderlineSchoolDistance_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC01_BorderlineSchoolDistance expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC02_SafetyMarginDebate_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC02_SafetyMarginDebate expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC03_NecessaryLowAltitude_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC03_NecessaryLowAltitude expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC04_NoiseNecessity_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC05_DaylightIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC05_DaylightIntent expected decision: REJECT"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC06_LowAltitudeFiling_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC07_FrequencyVague_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC08_ReasonableHours_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC09_WildlifeImpact_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC09_WildlifeImpact expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC10_CommercialIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC10_CommercialIntent expected decision: REJECT"
        }
      ]
    },
    {
      "test_case_id": "TC03_NecessaryLowAltitude",
      "description": "Need to descend to 40 m to pass under a temporary kite festival line.",
      "expected_decision": "APPROVE",
      "llm_decision": "APPROVE",
      "prompt": "# Pragmatic Ambiguity & Regulatory Intent Brief\n\nScenario: S032_PragmaticAmbiguity\nTest Case: TC03_NecessaryLowAltitude — Powerline avoidance\nDescription: Need to descend to 40 m to pass under a temporary kite festival line.\n\n## Pragmatic Axes\n(No pragmatic axes provided)\n\n## Policy Snippets & Intent\n- (No policy snippets provided)\n\n## Ambiguity Playbook\n- (No playbook hints)\n\n## Facts Provided\n- (No explicit facts provided)\n\n## Pragmatic Tags\n- (No pragmatic tags)\n\n## Reference Notes / Known Mitigations\n- Interpret 'necessary' teleologically—obstacle avoidance qualifies.\n\n---\n\n## Output Contract\nReturn **valid JSON** with these keys:\n1. `decision`: one of `APPROVE`, `REJECT`, `UNCERTAIN`, `CONDITIONAL_APPROVE`, `EXPLAIN_ONLY`.\n2. `confidence`: \"low\" | \"medium\" | \"high\" (set to low whenever ambiguity is unresolved).\n3. `pragmatic_flags`: array describing which ambiguity types you relied on (e.g., \"scalar implicature\", \"sarcasm\").\n4. `reasoning_steps`: ≤6 concise steps covering (a) literal clause, (b) pragmatic interpretation, (c) regulatory intent, (d) recommended action.\n5. `clarifications_needed`: list missing info or documents when outputting `UNCERTAIN` or when ambiguity remains material.\n6. `conditions`: list of mitigation steps when `CONDITIONAL_APPROVE` (empty otherwise).\n7. `violated_policies`: cite policy IDs (R1–R8 or PrivacyRule) that would be breached if the pilot proceeds as requested.\n8. `notes`: free-form reminders (≤2 sentences) tying the decision back to intent.\n\n### Example\n```json\n{\n  \"decision\": \"UNCERTAIN\",\n  \"confidence\": \"low\",\n  \"pragmatic_flags\": [\"scalar implicature\", \"deixis\"],\n  \"reasoning_steps\": [\n    \"Step1 Literal: Memo bans flights 'near' schools but no legal number provided.\",\n    \"Step2 Pragmatic: Informal 200 m threshold exists yet regulators extend buffers after complaints.\",\n    \"Step3 Risk: 300 m may still count as 'near' if complaints escalate.\",\n    \"Step4 Action: Hold flight and request written clarification/threshold.\"],\n  \"clarifications_needed\": [\"Obtain official distance definition from operations bulletin\"],\n  \"conditions\": [],\n  \"violated_policies\": [],\n  \"notes\": \"Treat undefined scalar term cautiously; do not infer clearance without regulator input.\"\n}\n```\n\nRules:\n- Never invent numeric thresholds or exemptions that the memo does not cover.\n- Sarcasm/indirect speech must be interpreted pragmatically; sarcasm never equals consent.\n- If you infer regulatory intent (e.g., protect privacy, prevent harassment), state it explicitly in the reasoning.\n- Keep total reasoning ≤6 bullet steps to avoid timeouts.\n\n\n# Retrieved Evidence\n\n\nProvided facts:\n- Hazard: decorative kites strung at 55 m for festival.\n- Mission would briefly descend to 40 m then return to 70 m.\n- Rule text: 'May descend below 50 m when necessary.'\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC01_BorderlineSchoolDistance expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC02_SafetyMarginDebate expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC03_NecessaryLowAltitude expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC05_DaylightIntent expected decision: REJECT\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC09_WildlifeImpact expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC10_CommercialIntent expected decision: REJECT\nDecision rule: Pragmatic ambiguity—treat vague terms (near, appropriate, necessary, reasonable hours, frequent) by intent and provided thresholds; avoid inventing numbers. If language is ambiguous or evidence missing, prefer UNCERTAIN/EXPLAIN_ONLY. CONDITIONAL_APPROVE must include concrete mitigations (reroute/delay to reasonable hours). Reject loopholes (commercial intent hidden, sarcasm ≠ consent, daylight vs clock defined by context).\nRelevant decision rules (retrieved):\n- Pragmatic ambiguity: Treat vague terms (near, appropriate, necessary, reasonable hours, frequent) by intent and provided thresholds; avoid inventing numbers. If language is ambiguous or evidence missing, prefer UNCERTAIN/EXPLAIN_ONLY. CONDITIONAL_APPROVE must include concrete mitigations (reroute/delay to reasonable hours). Reject loopholes (commercial intent hidden, sarcasm ≠ consent, daylight vs clock defined by context).\nRespond JSON only: {\"decision\": \"REJECT|APPROVE|CONDITIONAL|CHOOSE_B|REJECT_WITH_ALTERNATIVE|UNCERTAIN\", \"reasons\": [...], \"citations\": [...], \"evidence_used\": [...]}. Cite option/waiver/priority fields when relevant.",
      "llm_raw": "```json\n{\n  \"decision\": \"APPROVE\",\n  \"confidence\": \"high\",\n  \"pragmatic_flags\": [\"semantic ambiguity (necessity)\", \"teleological interpretation\"],\n  \"reasoning_steps\": [\n    \"Literal Clause: Rule states 'May descend below 50 m when necessary.'\",\n    \"Pragmatic Interpretation: The term 'necessary' is semantically ambiguous without further context.\",\n    \"Regulatory Intent: Reference notes explicitly interpret 'necessary' teleologically, stating obstacle avoidance qualifies.\",\n    \"Scenario Application: Descending to 40 m is required to pass safely under a temporary kite line at 55 m, qualifying as obstacle avoidance.\",\n    \"Compliance: The proposed descent directly aligns with the defined intent of the 'necessary' clause.\",\n    \"Recommended Action: The flight plan to descend to 40 m for obstacle avoidance is permissible.\"\n  ],\n  \"clarifications_needed\": [],\n  \"conditions\": [],\n  \"violated_policies\": [],\n  \"notes\": \"The specified descent for obstacle avoidance is a direct application of the teleological interpretation of 'necessary' as per regulatory guidance.\"\n}\n```",
      "llm_parsed": {
        "decision": "APPROVE",
        "confidence": "high",
        "pragmatic_flags": [
          "semantic ambiguity (necessity)",
          "teleological interpretation"
        ],
        "reasoning_steps": [
          "Literal Clause: Rule states 'May descend below 50 m when necessary.'",
          "Pragmatic Interpretation: The term 'necessary' is semantically ambiguous without further context.",
          "Regulatory Intent: Reference notes explicitly interpret 'necessary' teleologically, stating obstacle avoidance qualifies.",
          "Scenario Application: Descending to 40 m is required to pass safely under a temporary kite line at 55 m, qualifying as obstacle avoidance.",
          "Compliance: The proposed descent directly aligns with the defined intent of the 'necessary' clause.",
          "Recommended Action: The flight plan to descend to 40 m for obstacle avoidance is permissible."
        ],
        "clarifications_needed": [],
        "conditions": [],
        "violated_policies": [],
        "notes": "The specified descent for obstacle avoidance is a direct application of the teleological interpretation of 'necessary' as per regulatory guidance."
      },
      "mission": {},
      "retrieved_constraints": [
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC01_BorderlineSchoolDistance_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC01_BorderlineSchoolDistance expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC02_SafetyMarginDebate_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC02_SafetyMarginDebate expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC03_NecessaryLowAltitude_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC03_NecessaryLowAltitude expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC04_NoiseNecessity_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC05_DaylightIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC05_DaylightIntent expected decision: REJECT"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC06_LowAltitudeFiling_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC07_FrequencyVague_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC08_ReasonableHours_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC09_WildlifeImpact_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC09_WildlifeImpact expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC10_CommercialIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC10_CommercialIntent expected decision: REJECT"
        }
      ]
    },
    {
      "test_case_id": "TC04_NoiseNecessity",
      "description": "Medical drop uses 70 dB quad; residential block requests quieter ops.",
      "expected_decision": "CONDITIONAL_APPROVE",
      "llm_decision": "CONDITIONAL_APPROVE",
      "prompt": "# Pragmatic Ambiguity & Regulatory Intent Brief\n\nScenario: S032_PragmaticAmbiguity\nTest Case: TC04_NoiseNecessity — Urgent but loud delivery\nDescription: Medical drop uses 70 dB quad; residential block requests quieter ops.\n\n## Pragmatic Axes\n(No pragmatic axes provided)\n\n## Policy Snippets & Intent\n- (No policy snippets provided)\n\n## Ambiguity Playbook\n- (No playbook hints)\n\n## Facts Provided\n- (No explicit facts provided)\n\n## Pragmatic Tags\n- (No pragmatic tags)\n\n## Reference Notes / Known Mitigations\n- (No supplemental notes)\n\n## Ground-Truth Conditions (if approval is possible)\n- Either reroute over arterial road or throttle to 60 dB by switching prop profile.\n- Notify residents due to medical urgency.\n\n---\n\n## Output Contract\nReturn **valid JSON** with these keys:\n1. `decision`: one of `APPROVE`, `REJECT`, `UNCERTAIN`, `CONDITIONAL_APPROVE`, `EXPLAIN_ONLY`.\n2. `confidence`: \"low\" | \"medium\" | \"high\" (set to low whenever ambiguity is unresolved).\n3. `pragmatic_flags`: array describing which ambiguity types you relied on (e.g., \"scalar implicature\", \"sarcasm\").\n4. `reasoning_steps`: ≤6 concise steps covering (a) literal clause, (b) pragmatic interpretation, (c) regulatory intent, (d) recommended action.\n5. `clarifications_needed`: list missing info or documents when outputting `UNCERTAIN` or when ambiguity remains material.\n6. `conditions`: list of mitigation steps when `CONDITIONAL_APPROVE` (empty otherwise).\n7. `violated_policies`: cite policy IDs (R1–R8 or PrivacyRule) that would be breached if the pilot proceeds as requested.\n8. `notes`: free-form reminders (≤2 sentences) tying the decision back to intent.\n\n### Example\n```json\n{\n  \"decision\": \"UNCERTAIN\",\n  \"confidence\": \"low\",\n  \"pragmatic_flags\": [\"scalar implicature\", \"deixis\"],\n  \"reasoning_steps\": [\n    \"Step1 Literal: Memo bans flights 'near' schools but no legal number provided.\",\n    \"Step2 Pragmatic: Informal 200 m threshold exists yet regulators extend buffers after complaints.\",\n    \"Step3 Risk: 300 m may still count as 'near' if complaints escalate.\",\n    \"Step4 Action: Hold flight and request written clarification/threshold.\"],\n  \"clarifications_needed\": [\"Obtain official distance definition from operations bulletin\"],\n  \"conditions\": [],\n  \"violated_policies\": [],\n  \"notes\": \"Treat undefined scalar term cautiously; do not infer clearance without regulator input.\"\n}\n```\n\nRules:\n- Never invent numeric thresholds or exemptions that the memo does not cover.\n- Sarcasm/indirect speech must be interpreted pragmatically; sarcasm never equals consent.\n- If you infer regulatory intent (e.g., protect privacy, prevent harassment), state it explicitly in the reasoning.\n- Keep total reasoning ≤6 bullet steps to avoid timeouts.\n\n\n# Retrieved Evidence\n\n\nProvided facts:\n- Urgent delivery (tourniquet).\n- Alternative route adds 2 minutes but avoids dense apartments.\n- Nighttime quiet-hour begins at 22:00; mission at 21:30.\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC01_BorderlineSchoolDistance expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC02_SafetyMarginDebate expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC03_NecessaryLowAltitude expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC05_DaylightIntent expected decision: REJECT\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC09_WildlifeImpact expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC10_CommercialIntent expected decision: REJECT\nDecision rule: Pragmatic ambiguity—treat vague terms (near, appropriate, necessary, reasonable hours, frequent) by intent and provided thresholds; avoid inventing numbers. If language is ambiguous or evidence missing, prefer UNCERTAIN/EXPLAIN_ONLY. CONDITIONAL_APPROVE must include concrete mitigations (reroute/delay to reasonable hours). Reject loopholes (commercial intent hidden, sarcasm ≠ consent, daylight vs clock defined by context).\nRelevant decision rules (retrieved):\n- Pragmatic ambiguity: Treat vague terms (near, appropriate, necessary, reasonable hours, frequent) by intent and provided thresholds; avoid inventing numbers. If language is ambiguous or evidence missing, prefer UNCERTAIN/EXPLAIN_ONLY. CONDITIONAL_APPROVE must include concrete mitigations (reroute/delay to reasonable hours). Reject loopholes (commercial intent hidden, sarcasm ≠ consent, daylight vs clock defined by context).\nRespond JSON only: {\"decision\": \"REJECT|APPROVE|CONDITIONAL|CHOOSE_B|REJECT_WITH_ALTERNATIVE|UNCERTAIN\", \"reasons\": [...], \"citations\": [...], \"evidence_used\": [...]}. Cite option/waiver/priority fields when relevant.",
      "llm_raw": "```json\n{\n  \"decision\": \"CONDITIONAL_APPROVE\",\n  \"confidence\": \"high\",\n  \"pragmatic_flags\": [\"scalar implicature\", \"necessity\"],\n  \"reasoning_steps\": [\n    \"Step1 Literal: Mission at 21:30 is before the 22:00 quiet hours; no explicit dB limit is provided for this period.\",\n    \"Step2 Pragmatic: Residents' request for 'quieter ops' implies current 70 dB level is perceived as disruptive in a residential area, requiring pragmatic interpretation of 'reasonable' noise.\",\n    \"Step3 Intent: Regulatory intent balances timely urgent medical deliveries (tourniquet) with minimizing residential disturbance.\",\n    \"Step4 Action: The urgent medical delivery is necessary and takes priority, but noise concerns must be mitigated where possible.\",\n    \"Step5 Mitigation: Utilize available technical solutions (throttle to 60 dB) to reduce noise impact on residents without delaying the urgent delivery.\",\n    \"Step6 Notification: Inform residents of the medical urgency to provide context and manage expectations.\"\n  ],\n  \"clarifications_needed\": [],\n  \"conditions\": [\n    \"Throttle quad to 60 dB by switching prop profile.\",\n    \"Notify residents about the medical urgency of the delivery.\"\n  ],\n  \"violated_policies\": [],\n  \"notes\": \"Decision balances urgent medical necessity with resident concerns by implementing available noise mitigation and communication, aligning with the pragmatic interpretation of 'reasonable' operation.\"\n}\n```",
      "llm_parsed": {
        "decision": "CONDITIONAL_APPROVE",
        "confidence": "high",
        "pragmatic_flags": [
          "scalar implicature",
          "necessity"
        ],
        "reasoning_steps": [
          "Step1 Literal: Mission at 21:30 is before the 22:00 quiet hours; no explicit dB limit is provided for this period.",
          "Step2 Pragmatic: Residents' request for 'quieter ops' implies current 70 dB level is perceived as disruptive in a residential area, requiring pragmatic interpretation of 'reasonable' noise.",
          "Step3 Intent: Regulatory intent balances timely urgent medical deliveries (tourniquet) with minimizing residential disturbance.",
          "Step4 Action: The urgent medical delivery is necessary and takes priority, but noise concerns must be mitigated where possible.",
          "Step5 Mitigation: Utilize available technical solutions (throttle to 60 dB) to reduce noise impact on residents without delaying the urgent delivery.",
          "Step6 Notification: Inform residents of the medical urgency to provide context and manage expectations."
        ],
        "clarifications_needed": [],
        "conditions": [
          "Throttle quad to 60 dB by switching prop profile.",
          "Notify residents about the medical urgency of the delivery."
        ],
        "violated_policies": [],
        "notes": "Decision balances urgent medical necessity with resident concerns by implementing available noise mitigation and communication, aligning with the pragmatic interpretation of 'reasonable' operation."
      },
      "mission": {},
      "retrieved_constraints": [
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC01_BorderlineSchoolDistance_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC01_BorderlineSchoolDistance expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC02_SafetyMarginDebate_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC02_SafetyMarginDebate expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC03_NecessaryLowAltitude_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC03_NecessaryLowAltitude expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC04_NoiseNecessity_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC05_DaylightIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC05_DaylightIntent expected decision: REJECT"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC06_LowAltitudeFiling_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC07_FrequencyVague_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC08_ReasonableHours_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC09_WildlifeImpact_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC09_WildlifeImpact expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC10_CommercialIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC10_CommercialIntent expected decision: REJECT"
        }
      ]
    },
    {
      "test_case_id": "TC05_DaylightIntent",
      "description": "Operator argues 18:30 is 'daytime' because regulations say so, despite darkness.",
      "expected_decision": "REJECT",
      "llm_decision": "REJECT",
      "prompt": "# Pragmatic Ambiguity & Regulatory Intent Brief\n\nScenario: S032_PragmaticAmbiguity\nTest Case: TC05_DaylightIntent — Winter dusk confusion\nDescription: Operator argues 18:30 is 'daytime' because regulations say so, despite darkness.\n\n## Pragmatic Axes\n(No pragmatic axes provided)\n\n## Policy Snippets & Intent\n- (No policy snippets provided)\n\n## Ambiguity Playbook\n- (No playbook hints)\n\n## Facts Provided\n- (No explicit facts provided)\n\n## Pragmatic Tags\n- (No pragmatic tags)\n\n## Reference Notes / Known Mitigations\n- Explain intent: 'daytime' = adequate daylight; require night-equip or delay.\n\n---\n\n## Output Contract\nReturn **valid JSON** with these keys:\n1. `decision`: one of `APPROVE`, `REJECT`, `UNCERTAIN`, `CONDITIONAL_APPROVE`, `EXPLAIN_ONLY`.\n2. `confidence`: \"low\" | \"medium\" | \"high\" (set to low whenever ambiguity is unresolved).\n3. `pragmatic_flags`: array describing which ambiguity types you relied on (e.g., \"scalar implicature\", \"sarcasm\").\n4. `reasoning_steps`: ≤6 concise steps covering (a) literal clause, (b) pragmatic interpretation, (c) regulatory intent, (d) recommended action.\n5. `clarifications_needed`: list missing info or documents when outputting `UNCERTAIN` or when ambiguity remains material.\n6. `conditions`: list of mitigation steps when `CONDITIONAL_APPROVE` (empty otherwise).\n7. `violated_policies`: cite policy IDs (R1–R8 or PrivacyRule) that would be breached if the pilot proceeds as requested.\n8. `notes`: free-form reminders (≤2 sentences) tying the decision back to intent.\n\n### Example\n```json\n{\n  \"decision\": \"UNCERTAIN\",\n  \"confidence\": \"low\",\n  \"pragmatic_flags\": [\"scalar implicature\", \"deixis\"],\n  \"reasoning_steps\": [\n    \"Step1 Literal: Memo bans flights 'near' schools but no legal number provided.\",\n    \"Step2 Pragmatic: Informal 200 m threshold exists yet regulators extend buffers after complaints.\",\n    \"Step3 Risk: 300 m may still count as 'near' if complaints escalate.\",\n    \"Step4 Action: Hold flight and request written clarification/threshold.\"],\n  \"clarifications_needed\": [\"Obtain official distance definition from operations bulletin\"],\n  \"conditions\": [],\n  \"violated_policies\": [],\n  \"notes\": \"Treat undefined scalar term cautiously; do not infer clearance without regulator input.\"\n}\n```\n\nRules:\n- Never invent numeric thresholds or exemptions that the memo does not cover.\n- Sarcasm/indirect speech must be interpreted pragmatically; sarcasm never equals consent.\n- If you infer regulatory intent (e.g., protect privacy, prevent harassment), state it explicitly in the reasoning.\n- Keep total reasoning ≤6 bullet steps to avoid timeouts.\n\n\n# Retrieved Evidence\n\n\nProvided facts:\n- Winter civil twilight ends 18:05.\n- No night lighting equipment installed.\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC01_BorderlineSchoolDistance expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC02_SafetyMarginDebate expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC03_NecessaryLowAltitude expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC05_DaylightIntent expected decision: REJECT\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC09_WildlifeImpact expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC10_CommercialIntent expected decision: REJECT\nDecision rule: Pragmatic ambiguity—treat vague terms (near, appropriate, necessary, reasonable hours, frequent) by intent and provided thresholds; avoid inventing numbers. If language is ambiguous or evidence missing, prefer UNCERTAIN/EXPLAIN_ONLY. CONDITIONAL_APPROVE must include concrete mitigations (reroute/delay to reasonable hours). Reject loopholes (commercial intent hidden, sarcasm ≠ consent, daylight vs clock defined by context).\nRelevant decision rules (retrieved):\n- Pragmatic ambiguity: Treat vague terms (near, appropriate, necessary, reasonable hours, frequent) by intent and provided thresholds; avoid inventing numbers. If language is ambiguous or evidence missing, prefer UNCERTAIN/EXPLAIN_ONLY. CONDITIONAL_APPROVE must include concrete mitigations (reroute/delay to reasonable hours). Reject loopholes (commercial intent hidden, sarcasm ≠ consent, daylight vs clock defined by context).\nRespond JSON only: {\"decision\": \"REJECT|APPROVE|CONDITIONAL|CHOOSE_B|REJECT_WITH_ALTERNATIVE|UNCERTAIN\", \"reasons\": [...], \"citations\": [...], \"evidence_used\": [...]}. Cite option/waiver/priority fields when relevant.",
      "llm_raw": "```json\n{\n  \"decision\": \"REJECT\",\n  \"confidence\": \"high\",\n  \"pragmatic_flags\": [\"semantic ambiguity\", \"contextual ambiguity\"],\n  \"reasoning_steps\": [\n    \"Step1 Literal: Operator claims 18:30 is 'daytime' based on a regulation's literal time definition.\",\n    \"Step2 Pragmatic: 'Daytime' in regulations implies adequate natural light for safe operation, not merely a time on the clock. Winter civil twilight ends at 18:05.\",\n    \"Step3 Intent: Regulatory intent for 'daytime' flight is to ensure adequate visibility for safety, as confirmed by reference notes: 'daytime' = adequate daylight.\",\n    \"Step4 Action: At 18:30, it is past civil twilight, indicating insufficient natural light for safe 'daytime' operation.\",\n    \"Step5 Action: Operator lacks night lighting equipment, precluding operation under night rules.\",\n    \"Step6 Decision: Reject the proposed flight due to unsafe lighting conditions and lack of appropriate equipment.\"\n  ],\n  \"clarifications_needed\": [],\n  \"conditions\": [],\n  \"violated_policies\": [],\n  \"notes\": \"The pragmatic intent of 'daytime' for flight safety takes precedence over a purely chronological definition when actual light conditions are inadequate and appropriate equipment is missing.\"\n}\n```",
      "llm_parsed": {
        "decision": "REJECT",
        "confidence": "high",
        "pragmatic_flags": [
          "semantic ambiguity",
          "contextual ambiguity"
        ],
        "reasoning_steps": [
          "Step1 Literal: Operator claims 18:30 is 'daytime' based on a regulation's literal time definition.",
          "Step2 Pragmatic: 'Daytime' in regulations implies adequate natural light for safe operation, not merely a time on the clock. Winter civil twilight ends at 18:05.",
          "Step3 Intent: Regulatory intent for 'daytime' flight is to ensure adequate visibility for safety, as confirmed by reference notes: 'daytime' = adequate daylight.",
          "Step4 Action: At 18:30, it is past civil twilight, indicating insufficient natural light for safe 'daytime' operation.",
          "Step5 Action: Operator lacks night lighting equipment, precluding operation under night rules.",
          "Step6 Decision: Reject the proposed flight due to unsafe lighting conditions and lack of appropriate equipment."
        ],
        "clarifications_needed": [],
        "conditions": [],
        "violated_policies": [],
        "notes": "The pragmatic intent of 'daytime' for flight safety takes precedence over a purely chronological definition when actual light conditions are inadequate and appropriate equipment is missing."
      },
      "mission": {},
      "retrieved_constraints": [
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC01_BorderlineSchoolDistance_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC01_BorderlineSchoolDistance expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC02_SafetyMarginDebate_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC02_SafetyMarginDebate expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC03_NecessaryLowAltitude_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC03_NecessaryLowAltitude expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC04_NoiseNecessity_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC05_DaylightIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC05_DaylightIntent expected decision: REJECT"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC06_LowAltitudeFiling_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC07_FrequencyVague_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC08_ReasonableHours_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC09_WildlifeImpact_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC09_WildlifeImpact expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC10_CommercialIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC10_CommercialIntent expected decision: REJECT"
        }
      ]
    },
    {
      "test_case_id": "TC06_LowAltitudeFiling",
      "description": "Ground survey drone wants to skim at 5 m; wonders if 'low-altitude filing' applies.",
      "expected_decision": "UNCERTAIN",
      "llm_decision": "UNCERTAIN",
      "prompt": "# Pragmatic Ambiguity & Regulatory Intent Brief\n\nScenario: S032_PragmaticAmbiguity\nTest Case: TC06_LowAltitudeFiling — 5 m mapping pass\nDescription: Ground survey drone wants to skim at 5 m; wonders if 'low-altitude filing' applies.\n\n## Pragmatic Axes\n(No pragmatic axes provided)\n\n## Policy Snippets & Intent\n- (No policy snippets provided)\n\n## Ambiguity Playbook\n- (No playbook hints)\n\n## Facts Provided\n- (No explicit facts provided)\n\n## Pragmatic Tags\n- (No pragmatic tags)\n\n## Reference Notes / Known Mitigations\n- Highlight ambiguity and recommend confirming with authority; 5 m may fall under different statute.\n\n---\n\n## Output Contract\nReturn **valid JSON** with these keys:\n1. `decision`: one of `APPROVE`, `REJECT`, `UNCERTAIN`, `CONDITIONAL_APPROVE`, `EXPLAIN_ONLY`.\n2. `confidence`: \"low\" | \"medium\" | \"high\" (set to low whenever ambiguity is unresolved).\n3. `pragmatic_flags`: array describing which ambiguity types you relied on (e.g., \"scalar implicature\", \"sarcasm\").\n4. `reasoning_steps`: ≤6 concise steps covering (a) literal clause, (b) pragmatic interpretation, (c) regulatory intent, (d) recommended action.\n5. `clarifications_needed`: list missing info or documents when outputting `UNCERTAIN` or when ambiguity remains material.\n6. `conditions`: list of mitigation steps when `CONDITIONAL_APPROVE` (empty otherwise).\n7. `violated_policies`: cite policy IDs (R1–R8 or PrivacyRule) that would be breached if the pilot proceeds as requested.\n8. `notes`: free-form reminders (≤2 sentences) tying the decision back to intent.\n\n### Example\n```json\n{\n  \"decision\": \"UNCERTAIN\",\n  \"confidence\": \"low\",\n  \"pragmatic_flags\": [\"scalar implicature\", \"deixis\"],\n  \"reasoning_steps\": [\n    \"Step1 Literal: Memo bans flights 'near' schools but no legal number provided.\",\n    \"Step2 Pragmatic: Informal 200 m threshold exists yet regulators extend buffers after complaints.\",\n    \"Step3 Risk: 300 m may still count as 'near' if complaints escalate.\",\n    \"Step4 Action: Hold flight and request written clarification/threshold.\"],\n  \"clarifications_needed\": [\"Obtain official distance definition from operations bulletin\"],\n  \"conditions\": [],\n  \"violated_policies\": [],\n  \"notes\": \"Treat undefined scalar term cautiously; do not infer clearance without regulator input.\"\n}\n```\n\nRules:\n- Never invent numeric thresholds or exemptions that the memo does not cover.\n- Sarcasm/indirect speech must be interpreted pragmatically; sarcasm never equals consent.\n- If you infer regulatory intent (e.g., protect privacy, prevent harassment), state it explicitly in the reasoning.\n- Keep total reasoning ≤6 bullet steps to avoid timeouts.\n\n\n# Retrieved Evidence\n\n\nProvided facts:\n- Reg filings mention 20–120 m band.\n- Ground robotics code governs ≤ 10 m if within cordoned work zone.\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC01_BorderlineSchoolDistance expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC02_SafetyMarginDebate expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC03_NecessaryLowAltitude expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC05_DaylightIntent expected decision: REJECT\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC09_WildlifeImpact expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC10_CommercialIntent expected decision: REJECT\nDecision rule: Pragmatic ambiguity—treat vague terms (near, appropriate, necessary, reasonable hours, frequent) by intent and provided thresholds; avoid inventing numbers. If language is ambiguous or evidence missing, prefer UNCERTAIN/EXPLAIN_ONLY. CONDITIONAL_APPROVE must include concrete mitigations (reroute/delay to reasonable hours). Reject loopholes (commercial intent hidden, sarcasm ≠ consent, daylight vs clock defined by context).\nRelevant decision rules (retrieved):\n- Pragmatic ambiguity: Treat vague terms (near, appropriate, necessary, reasonable hours, frequent) by intent and provided thresholds; avoid inventing numbers. If language is ambiguous or evidence missing, prefer UNCERTAIN/EXPLAIN_ONLY. CONDITIONAL_APPROVE must include concrete mitigations (reroute/delay to reasonable hours). Reject loopholes (commercial intent hidden, sarcasm ≠ consent, daylight vs clock defined by context).\nRespond JSON only: {\"decision\": \"REJECT|APPROVE|CONDITIONAL|CHOOSE_B|REJECT_WITH_ALTERNATIVE|UNCERTAIN\", \"reasons\": [...], \"citations\": [...], \"evidence_used\": [...]}. Cite option/waiver/priority fields when relevant.",
      "llm_raw": "```json\n{\n  \"decision\": \"UNCERTAIN\",\n  \"confidence\": \"low\",\n  \"pragmatic_flags\": [\"scalar implicature\", \"scope ambiguity\"],\n  \"reasoning_steps\": [\n    \"Step1 Literal: Reg filings mention a 'low-altitude' band typically ranging from 20m to 120m for filing requirements.\",\n    \"Step2 Pragmatic: A 5m flight is below the 20m lower threshold of the specified 'low-altitude filing' band, suggesting it may not be subject to those specific requirements.\",\n    \"Step3 Regulatory Intent: Ground robotics code governs operations at or below 10m altitude if within a cordoned work zone, indicating very low altitude flights may fall under a different regulatory framework.\",\n    \"Step4 Ambiguity: The scenario does not specify if the 5m mapping pass occurs within a cordoned work zone, leaving it uncertain whether ground robotics code or another statute applies.\",\n    \"Step5 Action: The applicability of 'low-altitude filing' for a 5m flight is ambiguous and depends on further operational context and specific regulatory interpretation.\"\n  ],\n  \"clarifications_needed\": [\n    \"Obtain official definition for the lower altitude threshold of 'low-altitude filing' requirements.\",\n    \"Confirm if the 5m mapping pass occurs within a designated or cordoned work zone.\"\n  ],\n  \"conditions\": [],\n  \"violated_policies\": [],\n  \"notes\": \"The 5m altitude falls outside the common 'low-altitude filing' band, prompting a need to clarify which regulatory framework (drone vs. ground robotics) applies. Confirm with the authority to prevent misapplication of rules.\"\n}\n```",
      "llm_parsed": {
        "decision": "UNCERTAIN",
        "confidence": "low",
        "pragmatic_flags": [
          "scalar implicature",
          "scope ambiguity"
        ],
        "reasoning_steps": [
          "Step1 Literal: Reg filings mention a 'low-altitude' band typically ranging from 20m to 120m for filing requirements.",
          "Step2 Pragmatic: A 5m flight is below the 20m lower threshold of the specified 'low-altitude filing' band, suggesting it may not be subject to those specific requirements.",
          "Step3 Regulatory Intent: Ground robotics code governs operations at or below 10m altitude if within a cordoned work zone, indicating very low altitude flights may fall under a different regulatory framework.",
          "Step4 Ambiguity: The scenario does not specify if the 5m mapping pass occurs within a cordoned work zone, leaving it uncertain whether ground robotics code or another statute applies.",
          "Step5 Action: The applicability of 'low-altitude filing' for a 5m flight is ambiguous and depends on further operational context and specific regulatory interpretation."
        ],
        "clarifications_needed": [
          "Obtain official definition for the lower altitude threshold of 'low-altitude filing' requirements.",
          "Confirm if the 5m mapping pass occurs within a designated or cordoned work zone."
        ],
        "conditions": [],
        "violated_policies": [],
        "notes": "The 5m altitude falls outside the common 'low-altitude filing' band, prompting a need to clarify which regulatory framework (drone vs. ground robotics) applies. Confirm with the authority to prevent misapplication of rules."
      },
      "mission": {},
      "retrieved_constraints": [
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC01_BorderlineSchoolDistance_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC01_BorderlineSchoolDistance expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC02_SafetyMarginDebate_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC02_SafetyMarginDebate expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC03_NecessaryLowAltitude_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC03_NecessaryLowAltitude expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC04_NoiseNecessity_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC05_DaylightIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC05_DaylightIntent expected decision: REJECT"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC06_LowAltitudeFiling_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC07_FrequencyVague_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC08_ReasonableHours_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC09_WildlifeImpact_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC09_WildlifeImpact expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC10_CommercialIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC10_CommercialIntent expected decision: REJECT"
        }
      ]
    },
    {
      "test_case_id": "TC07_FrequencyVague",
      "description": "Hobbyist flew scenic route three times in seven days.",
      "expected_decision": "EXPLAIN_ONLY",
      "llm_decision": "EXPLAIN_ONLY",
      "prompt": "# Pragmatic Ambiguity & Regulatory Intent Brief\n\nScenario: S032_PragmaticAmbiguity\nTest Case: TC07_FrequencyVague — Three leisure flights in a week\nDescription: Hobbyist flew scenic route three times in seven days.\n\n## Pragmatic Axes\n(No pragmatic axes provided)\n\n## Policy Snippets & Intent\n- (No policy snippets provided)\n\n## Ambiguity Playbook\n- (No playbook hints)\n\n## Facts Provided\n- (No explicit facts provided)\n\n## Pragmatic Tags\n- (No pragmatic tags)\n\n## Reference Notes / Known Mitigations\n- Discuss thresholds and recommend reduction or commercial filing.\n\n---\n\n## Output Contract\nReturn **valid JSON** with these keys:\n1. `decision`: one of `APPROVE`, `REJECT`, `UNCERTAIN`, `CONDITIONAL_APPROVE`, `EXPLAIN_ONLY`.\n2. `confidence`: \"low\" | \"medium\" | \"high\" (set to low whenever ambiguity is unresolved).\n3. `pragmatic_flags`: array describing which ambiguity types you relied on (e.g., \"scalar implicature\", \"sarcasm\").\n4. `reasoning_steps`: ≤6 concise steps covering (a) literal clause, (b) pragmatic interpretation, (c) regulatory intent, (d) recommended action.\n5. `clarifications_needed`: list missing info or documents when outputting `UNCERTAIN` or when ambiguity remains material.\n6. `conditions`: list of mitigation steps when `CONDITIONAL_APPROVE` (empty otherwise).\n7. `violated_policies`: cite policy IDs (R1–R8 or PrivacyRule) that would be breached if the pilot proceeds as requested.\n8. `notes`: free-form reminders (≤2 sentences) tying the decision back to intent.\n\n### Example\n```json\n{\n  \"decision\": \"UNCERTAIN\",\n  \"confidence\": \"low\",\n  \"pragmatic_flags\": [\"scalar implicature\", \"deixis\"],\n  \"reasoning_steps\": [\n    \"Step1 Literal: Memo bans flights 'near' schools but no legal number provided.\",\n    \"Step2 Pragmatic: Informal 200 m threshold exists yet regulators extend buffers after complaints.\",\n    \"Step3 Risk: 300 m may still count as 'near' if complaints escalate.\",\n    \"Step4 Action: Hold flight and request written clarification/threshold.\"],\n  \"clarifications_needed\": [\"Obtain official distance definition from operations bulletin\"],\n  \"conditions\": [],\n  \"violated_policies\": [],\n  \"notes\": \"Treat undefined scalar term cautiously; do not infer clearance without regulator input.\"\n}\n```\n\nRules:\n- Never invent numeric thresholds or exemptions that the memo does not cover.\n- Sarcasm/indirect speech must be interpreted pragmatically; sarcasm never equals consent.\n- If you infer regulatory intent (e.g., protect privacy, prevent harassment), state it explicitly in the reasoning.\n- Keep total reasoning ≤6 bullet steps to avoid timeouts.\n\n\n# Retrieved Evidence\n\n\nProvided facts:\n- Guidance memo: recreational ≤ 2 flights/week per corridor; commercial delivery exempt.\n- Flights were pleasure photography; no permit.\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC01_BorderlineSchoolDistance expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC02_SafetyMarginDebate expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC03_NecessaryLowAltitude expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC05_DaylightIntent expected decision: REJECT\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC09_WildlifeImpact expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC10_CommercialIntent expected decision: REJECT\nDecision rule: Pragmatic ambiguity—treat vague terms (near, appropriate, necessary, reasonable hours, frequent) by intent and provided thresholds; avoid inventing numbers. If language is ambiguous or evidence missing, prefer UNCERTAIN/EXPLAIN_ONLY. CONDITIONAL_APPROVE must include concrete mitigations (reroute/delay to reasonable hours). Reject loopholes (commercial intent hidden, sarcasm ≠ consent, daylight vs clock defined by context).\nRelevant decision rules (retrieved):\n- Pragmatic ambiguity: Treat vague terms (near, appropriate, necessary, reasonable hours, frequent) by intent and provided thresholds; avoid inventing numbers. If language is ambiguous or evidence missing, prefer UNCERTAIN/EXPLAIN_ONLY. CONDITIONAL_APPROVE must include concrete mitigations (reroute/delay to reasonable hours). Reject loopholes (commercial intent hidden, sarcasm ≠ consent, daylight vs clock defined by context).\nRespond JSON only: {\"decision\": \"REJECT|APPROVE|CONDITIONAL|CHOOSE_B|REJECT_WITH_ALTERNATIVE|UNCERTAIN\", \"reasons\": [...], \"citations\": [...], \"evidence_used\": [...]}. Cite option/waiver/priority fields when relevant.",
      "llm_raw": "```json\n{\n  \"decision\": \"EXPLAIN_ONLY\",\n  \"confidence\": \"high\",\n  \"pragmatic_flags\": [],\n  \"reasoning_steps\": [\n    \"Step1 Literal: The guidance memo explicitly limits recreational flights to \\\"≤ 2 flights/week per corridor\\\".\",\n    \"Step2 Pragmatic: The hobbyist conducted three leisure flights in seven days for pleasure photography, which is categorized as recreational.\",\n    \"Step3 Regulatory intent: The policy aims to manage airspace usage and potential impacts by establishing clear frequency limits for recreational activities.\",\n    \"Step4 Action: The three recreational flights directly exceed the specified limit of two flights per week.\",\n    \"Step5 Explanation: The pilot must be informed that performing three recreational flights within a week is a direct violation of the established guidance memo.\",\n    \"Step6 Recommendation: Advise the pilot to adhere to the 2 flights/week limit for future recreational activities or consider filing as a commercial operation if the nature of the flights changes.\"\n  ],\n  \"clarifications_needed\": [],\n  \"conditions\": [],\n  \"violated_policies\": [\n    \"Guidance memo: recreational flight frequency limit\"\n  ],\n  \"notes\": \"The pilot's past actions clearly violated the recreational flight frequency limit. The decision requires explaining this violation and providing guidance for future compliance.\"\n}\n```",
      "llm_parsed": {
        "decision": "EXPLAIN_ONLY",
        "confidence": "high",
        "pragmatic_flags": [],
        "reasoning_steps": [
          "Step1 Literal: The guidance memo explicitly limits recreational flights to \"≤ 2 flights/week per corridor\".",
          "Step2 Pragmatic: The hobbyist conducted three leisure flights in seven days for pleasure photography, which is categorized as recreational.",
          "Step3 Regulatory intent: The policy aims to manage airspace usage and potential impacts by establishing clear frequency limits for recreational activities.",
          "Step4 Action: The three recreational flights directly exceed the specified limit of two flights per week.",
          "Step5 Explanation: The pilot must be informed that performing three recreational flights within a week is a direct violation of the established guidance memo.",
          "Step6 Recommendation: Advise the pilot to adhere to the 2 flights/week limit for future recreational activities or consider filing as a commercial operation if the nature of the flights changes."
        ],
        "clarifications_needed": [],
        "conditions": [],
        "violated_policies": [
          "Guidance memo: recreational flight frequency limit"
        ],
        "notes": "The pilot's past actions clearly violated the recreational flight frequency limit. The decision requires explaining this violation and providing guidance for future compliance."
      },
      "mission": {},
      "retrieved_constraints": [
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC01_BorderlineSchoolDistance_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC01_BorderlineSchoolDistance expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC02_SafetyMarginDebate_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC02_SafetyMarginDebate expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC03_NecessaryLowAltitude_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC03_NecessaryLowAltitude expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC04_NoiseNecessity_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC05_DaylightIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC05_DaylightIntent expected decision: REJECT"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC06_LowAltitudeFiling_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC07_FrequencyVague_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC08_ReasonableHours_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC09_WildlifeImpact_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC09_WildlifeImpact expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC10_CommercialIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC10_CommercialIntent expected decision: REJECT"
        }
      ]
    },
    {
      "test_case_id": "TC08_ReasonableHours",
      "description": "Landscape shooter wants to film sunrise over rooftops.",
      "expected_decision": "CONDITIONAL_APPROVE",
      "llm_decision": "CONDITIONAL_APPROVE",
      "prompt": "# Pragmatic Ambiguity & Regulatory Intent Brief\n\nScenario: S032_PragmaticAmbiguity\nTest Case: TC08_ReasonableHours — Sunrise flight at 06:00\nDescription: Landscape shooter wants to film sunrise over rooftops.\n\n## Pragmatic Axes\n(No pragmatic axes provided)\n\n## Policy Snippets & Intent\n- (No policy snippets provided)\n\n## Ambiguity Playbook\n- (No playbook hints)\n\n## Facts Provided\n- (No explicit facts provided)\n\n## Pragmatic Tags\n- (No pragmatic tags)\n\n## Reference Notes / Known Mitigations\n- (No supplemental notes)\n\n## Ground-Truth Conditions (if approval is possible)\n- Delay to ≥ 07:00 or obtain neighborhood consent.\n- If absolutely necessary, provide noise mitigation plan.\n\n---\n\n## Output Contract\nReturn **valid JSON** with these keys:\n1. `decision`: one of `APPROVE`, `REJECT`, `UNCERTAIN`, `CONDITIONAL_APPROVE`, `EXPLAIN_ONLY`.\n2. `confidence`: \"low\" | \"medium\" | \"high\" (set to low whenever ambiguity is unresolved).\n3. `pragmatic_flags`: array describing which ambiguity types you relied on (e.g., \"scalar implicature\", \"sarcasm\").\n4. `reasoning_steps`: ≤6 concise steps covering (a) literal clause, (b) pragmatic interpretation, (c) regulatory intent, (d) recommended action.\n5. `clarifications_needed`: list missing info or documents when outputting `UNCERTAIN` or when ambiguity remains material.\n6. `conditions`: list of mitigation steps when `CONDITIONAL_APPROVE` (empty otherwise).\n7. `violated_policies`: cite policy IDs (R1–R8 or PrivacyRule) that would be breached if the pilot proceeds as requested.\n8. `notes`: free-form reminders (≤2 sentences) tying the decision back to intent.\n\n### Example\n```json\n{\n  \"decision\": \"UNCERTAIN\",\n  \"confidence\": \"low\",\n  \"pragmatic_flags\": [\"scalar implicature\", \"deixis\"],\n  \"reasoning_steps\": [\n    \"Step1 Literal: Memo bans flights 'near' schools but no legal number provided.\",\n    \"Step2 Pragmatic: Informal 200 m threshold exists yet regulators extend buffers after complaints.\",\n    \"Step3 Risk: 300 m may still count as 'near' if complaints escalate.\",\n    \"Step4 Action: Hold flight and request written clarification/threshold.\"],\n  \"clarifications_needed\": [\"Obtain official distance definition from operations bulletin\"],\n  \"conditions\": [],\n  \"violated_policies\": [],\n  \"notes\": \"Treat undefined scalar term cautiously; do not infer clearance without regulator input.\"\n}\n```\n\nRules:\n- Never invent numeric thresholds or exemptions that the memo does not cover.\n- Sarcasm/indirect speech must be interpreted pragmatically; sarcasm never equals consent.\n- If you infer regulatory intent (e.g., protect privacy, prevent harassment), state it explicitly in the reasoning.\n- Keep total reasoning ≤6 bullet steps to avoid timeouts.\n\n\n# Retrieved Evidence\n\n\nProvided facts:\n- Quiet-hour ordinance prohibits routine flights before 07:00.\n- Operator can delay to 07:05 without missing assignment.\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC01_BorderlineSchoolDistance expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC02_SafetyMarginDebate expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC03_NecessaryLowAltitude expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC05_DaylightIntent expected decision: REJECT\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC09_WildlifeImpact expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC10_CommercialIntent expected decision: REJECT\nDecision rule: Pragmatic ambiguity—treat vague terms (near, appropriate, necessary, reasonable hours, frequent) by intent and provided thresholds; avoid inventing numbers. If language is ambiguous or evidence missing, prefer UNCERTAIN/EXPLAIN_ONLY. CONDITIONAL_APPROVE must include concrete mitigations (reroute/delay to reasonable hours). Reject loopholes (commercial intent hidden, sarcasm ≠ consent, daylight vs clock defined by context).\nRelevant decision rules (retrieved):\n- Pragmatic ambiguity: Treat vague terms (near, appropriate, necessary, reasonable hours, frequent) by intent and provided thresholds; avoid inventing numbers. If language is ambiguous or evidence missing, prefer UNCERTAIN/EXPLAIN_ONLY. CONDITIONAL_APPROVE must include concrete mitigations (reroute/delay to reasonable hours). Reject loopholes (commercial intent hidden, sarcasm ≠ consent, daylight vs clock defined by context).\nRespond JSON only: {\"decision\": \"REJECT|APPROVE|CONDITIONAL|CHOOSE_B|REJECT_WITH_ALTERNATIVE|UNCERTAIN\", \"reasons\": [...], \"citations\": [...], \"evidence_used\": [...]}. Cite option/waiver/priority fields when relevant.",
      "llm_raw": "```json\n{\n  \"decision\": \"CONDITIONAL_APPROVE\",\n  \"confidence\": \"high\",\n  \"pragmatic_flags\": [],\n  \"reasoning_steps\": [\n    \"Step1 Literal: Quiet-hour ordinance prohibits routine flights before 07:00.\",\n    \"Step2 Pragmatic: The 06:00 sunrise flight falls within the prohibited hours, intended to prevent early morning noise disturbance.\",\n    \"Step3 Regulatory Intent: To protect residents from noise pollution during designated quiet hours.\",\n    \"Step4 Mitigation: The operator can delay the flight to 07:05 without missing the assignment, moving it past the 07:00 quiet-hour threshold.\",\n    \"Step5 Action: Conditional approval granted upon adherence to the specified flight time delay.\",\n    \"Step6 Decision Rule: This aligns with 'Pragmatic ambiguity' rule for CONDITIONAL_APPROVE requiring concrete mitigations (delay to reasonable hours).\"\n  ],\n  \"clarifications_needed\": [],\n  \"conditions\": [\n    \"Delay flight departure to 07:00 or later (operator confirmed 07:05 is feasible).\",\n    \"Ensure noise mitigation plan is in place if any remaining noise concerns are identified, although primary concern is resolved by delay.\"\n  ],\n  \"violated_policies\": [\n    \"Quiet-hour ordinance (if flight proceeds before 07:00)\"\n  ],\n  \"notes\": \"The flight is conditionally approved as the primary conflict (quiet-hour ordinance) can be fully mitigated by the operator's ability to delay without operational impact. This aligns with the pragmatic intent of defining 'reasonable hours'.\"\n}\n```",
      "llm_parsed": {
        "decision": "CONDITIONAL_APPROVE",
        "confidence": "high",
        "pragmatic_flags": [],
        "reasoning_steps": [
          "Step1 Literal: Quiet-hour ordinance prohibits routine flights before 07:00.",
          "Step2 Pragmatic: The 06:00 sunrise flight falls within the prohibited hours, intended to prevent early morning noise disturbance.",
          "Step3 Regulatory Intent: To protect residents from noise pollution during designated quiet hours.",
          "Step4 Mitigation: The operator can delay the flight to 07:05 without missing the assignment, moving it past the 07:00 quiet-hour threshold.",
          "Step5 Action: Conditional approval granted upon adherence to the specified flight time delay.",
          "Step6 Decision Rule: This aligns with 'Pragmatic ambiguity' rule for CONDITIONAL_APPROVE requiring concrete mitigations (delay to reasonable hours)."
        ],
        "clarifications_needed": [],
        "conditions": [
          "Delay flight departure to 07:00 or later (operator confirmed 07:05 is feasible).",
          "Ensure noise mitigation plan is in place if any remaining noise concerns are identified, although primary concern is resolved by delay."
        ],
        "violated_policies": [
          "Quiet-hour ordinance (if flight proceeds before 07:00)"
        ],
        "notes": "The flight is conditionally approved as the primary conflict (quiet-hour ordinance) can be fully mitigated by the operator's ability to delay without operational impact. This aligns with the pragmatic intent of defining 'reasonable hours'."
      },
      "mission": {},
      "retrieved_constraints": [
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC01_BorderlineSchoolDistance_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC01_BorderlineSchoolDistance expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC02_SafetyMarginDebate_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC02_SafetyMarginDebate expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC03_NecessaryLowAltitude_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC03_NecessaryLowAltitude expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC04_NoiseNecessity_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC05_DaylightIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC05_DaylightIntent expected decision: REJECT"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC06_LowAltitudeFiling_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC07_FrequencyVague_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC08_ReasonableHours_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC09_WildlifeImpact_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC09_WildlifeImpact expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC10_CommercialIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC10_CommercialIntent expected decision: REJECT"
        }
      ]
    },
    {
      "test_case_id": "TC09_WildlifeImpact",
      "description": "Mapping mission wants to fly 500 m outside a protected buffer.",
      "expected_decision": "APPROVE",
      "llm_decision": "APPROVE",
      "prompt": "# Pragmatic Ambiguity & Regulatory Intent Brief\n\nScenario: S032_PragmaticAmbiguity\nTest Case: TC09_WildlifeImpact — 500 m standoff near bird reserve\nDescription: Mapping mission wants to fly 500 m outside a protected buffer.\n\n## Pragmatic Axes\n(No pragmatic axes provided)\n\n## Policy Snippets & Intent\n- (No policy snippets provided)\n\n## Ambiguity Playbook\n- (No playbook hints)\n\n## Facts Provided\n- (No explicit facts provided)\n\n## Pragmatic Tags\n- (No pragmatic tags)\n\n## Reference Notes / Known Mitigations\n- Explain why 45 dB single pass is below 'significant impact' threshold.\n\n---\n\n## Output Contract\nReturn **valid JSON** with these keys:\n1. `decision`: one of `APPROVE`, `REJECT`, `UNCERTAIN`, `CONDITIONAL_APPROVE`, `EXPLAIN_ONLY`.\n2. `confidence`: \"low\" | \"medium\" | \"high\" (set to low whenever ambiguity is unresolved).\n3. `pragmatic_flags`: array describing which ambiguity types you relied on (e.g., \"scalar implicature\", \"sarcasm\").\n4. `reasoning_steps`: ≤6 concise steps covering (a) literal clause, (b) pragmatic interpretation, (c) regulatory intent, (d) recommended action.\n5. `clarifications_needed`: list missing info or documents when outputting `UNCERTAIN` or when ambiguity remains material.\n6. `conditions`: list of mitigation steps when `CONDITIONAL_APPROVE` (empty otherwise).\n7. `violated_policies`: cite policy IDs (R1–R8 or PrivacyRule) that would be breached if the pilot proceeds as requested.\n8. `notes`: free-form reminders (≤2 sentences) tying the decision back to intent.\n\n### Example\n```json\n{\n  \"decision\": \"UNCERTAIN\",\n  \"confidence\": \"low\",\n  \"pragmatic_flags\": [\"scalar implicature\", \"deixis\"],\n  \"reasoning_steps\": [\n    \"Step1 Literal: Memo bans flights 'near' schools but no legal number provided.\",\n    \"Step2 Pragmatic: Informal 200 m threshold exists yet regulators extend buffers after complaints.\",\n    \"Step3 Risk: 300 m may still count as 'near' if complaints escalate.\",\n    \"Step4 Action: Hold flight and request written clarification/threshold.\"],\n  \"clarifications_needed\": [\"Obtain official distance definition from operations bulletin\"],\n  \"conditions\": [],\n  \"violated_policies\": [],\n  \"notes\": \"Treat undefined scalar term cautiously; do not infer clearance without regulator input.\"\n}\n```\n\nRules:\n- Never invent numeric thresholds or exemptions that the memo does not cover.\n- Sarcasm/indirect speech must be interpreted pragmatically; sarcasm never equals consent.\n- If you infer regulatory intent (e.g., protect privacy, prevent harassment), state it explicitly in the reasoning.\n- Keep total reasoning ≤6 bullet steps to avoid timeouts.\n\n\n# Retrieved Evidence\n\n\nProvided facts:\n- Noise at 500 m ≈ 45 dB.\n- Reserve considers 'significant' only if >60 dB or repeated disturbances.\n- Mission is single pass, 8 minutes.\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC01_BorderlineSchoolDistance expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC02_SafetyMarginDebate expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC03_NecessaryLowAltitude expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC05_DaylightIntent expected decision: REJECT\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC09_WildlifeImpact expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC10_CommercialIntent expected decision: REJECT\nDecision rule: Pragmatic ambiguity—treat vague terms (near, appropriate, necessary, reasonable hours, frequent) by intent and provided thresholds; avoid inventing numbers. If language is ambiguous or evidence missing, prefer UNCERTAIN/EXPLAIN_ONLY. CONDITIONAL_APPROVE must include concrete mitigations (reroute/delay to reasonable hours). Reject loopholes (commercial intent hidden, sarcasm ≠ consent, daylight vs clock defined by context).\nRelevant decision rules (retrieved):\n- Pragmatic ambiguity: Treat vague terms (near, appropriate, necessary, reasonable hours, frequent) by intent and provided thresholds; avoid inventing numbers. If language is ambiguous or evidence missing, prefer UNCERTAIN/EXPLAIN_ONLY. CONDITIONAL_APPROVE must include concrete mitigations (reroute/delay to reasonable hours). Reject loopholes (commercial intent hidden, sarcasm ≠ consent, daylight vs clock defined by context).\nRespond JSON only: {\"decision\": \"REJECT|APPROVE|CONDITIONAL|CHOOSE_B|REJECT_WITH_ALTERNATIVE|UNCERTAIN\", \"reasons\": [...], \"citations\": [...], \"evidence_used\": [...]}. Cite option/waiver/priority fields when relevant.",
      "llm_raw": "```json\n{\n  \"decision\": \"APPROVE\",\n  \"confidence\": \"high\",\n  \"pragmatic_flags\": [\"literal interpretation\"],\n  \"reasoning_steps\": [\n    \"Step1 Literal: Mission plans to fly 500 m outside a protected buffer, generating approximately 45 dB of noise in a single 8-minute pass.\",\n    \"Step2 Regulatory Intent: The intent behind a protected buffer near a bird reserve is to prevent 'significant impact' on wildlife.\",\n    \"Step3 Explicit Definition: The reserve explicitly defines 'significant impact' as noise greater than 60 dB or repeated disturbances.\",\n    \"Step4 Application to Facts: The proposed flight's noise level (45 dB) is below the 60 dB threshold, and it is a single, non-repeated pass.\",\n    \"Step5 Conclusion: The flight does not meet the reserve's stated criteria for 'significant impact'.\",\n    \"Step6 Decision: Approve the mission, as it complies with the defined impact thresholds.\"\n  ],\n  \"clarifications_needed\": [],\n  \"conditions\": [],\n  \"violated_policies\": [],\n  \"notes\": \"The decision hinges on the explicit definition of 'significant impact' provided by the reserve, which the mission's noise and duration fall below.\"\n}\n```",
      "llm_parsed": {
        "decision": "APPROVE",
        "confidence": "high",
        "pragmatic_flags": [
          "literal interpretation"
        ],
        "reasoning_steps": [
          "Step1 Literal: Mission plans to fly 500 m outside a protected buffer, generating approximately 45 dB of noise in a single 8-minute pass.",
          "Step2 Regulatory Intent: The intent behind a protected buffer near a bird reserve is to prevent 'significant impact' on wildlife.",
          "Step3 Explicit Definition: The reserve explicitly defines 'significant impact' as noise greater than 60 dB or repeated disturbances.",
          "Step4 Application to Facts: The proposed flight's noise level (45 dB) is below the 60 dB threshold, and it is a single, non-repeated pass.",
          "Step5 Conclusion: The flight does not meet the reserve's stated criteria for 'significant impact'.",
          "Step6 Decision: Approve the mission, as it complies with the defined impact thresholds."
        ],
        "clarifications_needed": [],
        "conditions": [],
        "violated_policies": [],
        "notes": "The decision hinges on the explicit definition of 'significant impact' provided by the reserve, which the mission's noise and duration fall below."
      },
      "mission": {},
      "retrieved_constraints": [
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC01_BorderlineSchoolDistance_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC01_BorderlineSchoolDistance expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC02_SafetyMarginDebate_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC02_SafetyMarginDebate expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC03_NecessaryLowAltitude_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC03_NecessaryLowAltitude expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC04_NoiseNecessity_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC05_DaylightIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC05_DaylightIntent expected decision: REJECT"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC06_LowAltitudeFiling_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC07_FrequencyVague_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC08_ReasonableHours_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC09_WildlifeImpact_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC09_WildlifeImpact expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC10_CommercialIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC10_CommercialIntent expected decision: REJECT"
        }
      ]
    },
    {
      "test_case_id": "TC10_CommercialIntent",
      "description": "Pilot claims to be hobbyist but monetizes posts.",
      "expected_decision": "REJECT",
      "llm_decision": "REJECT",
      "prompt": "# Pragmatic Ambiguity & Regulatory Intent Brief\n\nScenario: S032_PragmaticAmbiguity\nTest Case: TC10_CommercialIntent — Instagram hobbyist with ad revenue\nDescription: Pilot claims to be hobbyist but monetizes posts.\n\n## Pragmatic Axes\n(No pragmatic axes provided)\n\n## Policy Snippets & Intent\n- (No policy snippets provided)\n\n## Ambiguity Playbook\n- (No playbook hints)\n\n## Facts Provided\n- (No explicit facts provided)\n\n## Pragmatic Tags\n- (No pragmatic tags)\n\n## Reference Notes / Known Mitigations\n- Reject and cite economic benefit = commercial intent.\n\n---\n\n## Output Contract\nReturn **valid JSON** with these keys:\n1. `decision`: one of `APPROVE`, `REJECT`, `UNCERTAIN`, `CONDITIONAL_APPROVE`, `EXPLAIN_ONLY`.\n2. `confidence`: \"low\" | \"medium\" | \"high\" (set to low whenever ambiguity is unresolved).\n3. `pragmatic_flags`: array describing which ambiguity types you relied on (e.g., \"scalar implicature\", \"sarcasm\").\n4. `reasoning_steps`: ≤6 concise steps covering (a) literal clause, (b) pragmatic interpretation, (c) regulatory intent, (d) recommended action.\n5. `clarifications_needed`: list missing info or documents when outputting `UNCERTAIN` or when ambiguity remains material.\n6. `conditions`: list of mitigation steps when `CONDITIONAL_APPROVE` (empty otherwise).\n7. `violated_policies`: cite policy IDs (R1–R8 or PrivacyRule) that would be breached if the pilot proceeds as requested.\n8. `notes`: free-form reminders (≤2 sentences) tying the decision back to intent.\n\n### Example\n```json\n{\n  \"decision\": \"UNCERTAIN\",\n  \"confidence\": \"low\",\n  \"pragmatic_flags\": [\"scalar implicature\", \"deixis\"],\n  \"reasoning_steps\": [\n    \"Step1 Literal: Memo bans flights 'near' schools but no legal number provided.\",\n    \"Step2 Pragmatic: Informal 200 m threshold exists yet regulators extend buffers after complaints.\",\n    \"Step3 Risk: 300 m may still count as 'near' if complaints escalate.\",\n    \"Step4 Action: Hold flight and request written clarification/threshold.\"],\n  \"clarifications_needed\": [\"Obtain official distance definition from operations bulletin\"],\n  \"conditions\": [],\n  \"violated_policies\": [],\n  \"notes\": \"Treat undefined scalar term cautiously; do not infer clearance without regulator input.\"\n}\n```\n\nRules:\n- Never invent numeric thresholds or exemptions that the memo does not cover.\n- Sarcasm/indirect speech must be interpreted pragmatically; sarcasm never equals consent.\n- If you infer regulatory intent (e.g., protect privacy, prevent harassment), state it explicitly in the reasoning.\n- Keep total reasoning ≤6 bullet steps to avoid timeouts.\n\n\n# Retrieved Evidence\n\n\nProvided facts:\n- Account earns sponsorship revenue.\n- Rule bans commercial photography regardless of labeling.\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC01_BorderlineSchoolDistance expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC02_SafetyMarginDebate expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC03_NecessaryLowAltitude expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC05_DaylightIntent expected decision: REJECT\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC09_WildlifeImpact expected decision: APPROVE\n- Priority: None (SOP S032_pragmatic_ambiguity.jsonc) Test case TC10_CommercialIntent expected decision: REJECT\nDecision rule: Pragmatic ambiguity—treat vague terms (near, appropriate, necessary, reasonable hours, frequent) by intent and provided thresholds; avoid inventing numbers. If language is ambiguous or evidence missing, prefer UNCERTAIN/EXPLAIN_ONLY. CONDITIONAL_APPROVE must include concrete mitigations (reroute/delay to reasonable hours). Reject loopholes (commercial intent hidden, sarcasm ≠ consent, daylight vs clock defined by context).\nRelevant decision rules (retrieved):\n- Pragmatic ambiguity: Treat vague terms (near, appropriate, necessary, reasonable hours, frequent) by intent and provided thresholds; avoid inventing numbers. If language is ambiguous or evidence missing, prefer UNCERTAIN/EXPLAIN_ONLY. CONDITIONAL_APPROVE must include concrete mitigations (reroute/delay to reasonable hours). Reject loopholes (commercial intent hidden, sarcasm ≠ consent, daylight vs clock defined by context).\nRespond JSON only: {\"decision\": \"REJECT|APPROVE|CONDITIONAL|CHOOSE_B|REJECT_WITH_ALTERNATIVE|UNCERTAIN\", \"reasons\": [...], \"citations\": [...], \"evidence_used\": [...]}. Cite option/waiver/priority fields when relevant.",
      "llm_raw": "```json\n{\n  \"decision\": \"REJECT\",\n  \"confidence\": \"high\",\n  \"pragmatic_flags\": [\"misleading claim\", \"hidden intent\"],\n  \"reasoning_steps\": [\n    \"Pilot claims hobbyist status, implying non-commercial intent.\",\n    \"Fact: Account earns sponsorship revenue, which is a commercial activity.\",\n    \"Policy intent: The rule bans commercial photography 'regardless of labeling' to prevent circumvention through misrepresentation.\",\n    \"Pragmatic interpretation: The 'hobbyist' label is a misleading claim to hide commercial intent.\",\n    \"Action: Reject the pilot's request as the activity is clearly commercial.\",\n    \"Decision: Commercial activity detected, contradicting hobbyist claim.\"\n  ],\n  \"clarifications_needed\": [],\n  \"conditions\": [],\n  \"violated_policies\": [],\n  \"notes\": \"The regulatory intent is to prevent commercial operations from being disguised as non-commercial; economic benefit overrides self-declaration.\"\n}\n```",
      "llm_parsed": {
        "decision": "REJECT",
        "confidence": "high",
        "pragmatic_flags": [
          "misleading claim",
          "hidden intent"
        ],
        "reasoning_steps": [
          "Pilot claims hobbyist status, implying non-commercial intent.",
          "Fact: Account earns sponsorship revenue, which is a commercial activity.",
          "Policy intent: The rule bans commercial photography 'regardless of labeling' to prevent circumvention through misrepresentation.",
          "Pragmatic interpretation: The 'hobbyist' label is a misleading claim to hide commercial intent.",
          "Action: Reject the pilot's request as the activity is clearly commercial.",
          "Decision: Commercial activity detected, contradicting hobbyist claim."
        ],
        "clarifications_needed": [],
        "conditions": [],
        "violated_policies": [],
        "notes": "The regulatory intent is to prevent commercial operations from being disguised as non-commercial; economic benefit overrides self-declaration."
      },
      "mission": {},
      "retrieved_constraints": [
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC01_BorderlineSchoolDistance_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC01_BorderlineSchoolDistance expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC02_SafetyMarginDebate_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC02_SafetyMarginDebate expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC03_NecessaryLowAltitude_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC03_NecessaryLowAltitude expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC04_NoiseNecessity_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC04_NoiseNecessity expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC05_DaylightIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC05_DaylightIntent expected decision: REJECT"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC06_LowAltitudeFiling_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC06_LowAltitudeFiling expected decision: UNCERTAIN"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC07_FrequencyVague_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC07_FrequencyVague expected decision: EXPLAIN_ONLY"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC08_ReasonableHours_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC08_ReasonableHours expected decision: CONDITIONAL_APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC09_WildlifeImpact_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC09_WildlifeImpact expected decision: APPROVE"
        },
        {
          "constraint_id": "S032_pragmatic_ambiguity_TC10_CommercialIntent_expected_decision",
          "file": "/Users/zhangyunshi/Desktop/实习/airsim/LAE-GPT/scenarios/advanced/S032_pragmatic_ambiguity.jsonc",
          "concept": "Priority",
          "concepts": [
            "Priority"
          ],
          "source_type": "SOP",
          "source_ref": "S032_pragmatic_ambiguity.jsonc",
          "text": "Test case TC10_CommercialIntent expected decision: REJECT"
        }
      ]
    }
  ]
}